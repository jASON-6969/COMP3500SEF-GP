{"version":3,"file":"js/app.c394c117.js","mappings":"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","sources":["webpack://inventory-management-system/./src/App.vue","webpack://inventory-management-system/./src/App.vue?7ccd","webpack://inventory-management-system/./src/views/SalesRecord.vue","webpack://inventory-management-system/./src/components/SalesRecordFilters.vue","webpack://inventory-management-system/./src/lib/supabase.js","webpack://inventory-management-system/./src/lib/revenueUtils.js","webpack://inventory-management-system/./src/api/sales.js","webpack://inventory-management-system/./src/components/SalesRecordFilters.vue?2c89","webpack://inventory-management-system/./src/components/SalesRecordList.vue","webpack://inventory-management-system/./src/components/RevenueChart.vue","webpack://inventory-management-system/./src/components/RevenueChart.vue?f0fb","webpack://inventory-management-system/./src/components/SalesRecordList.vue?75ec","webpack://inventory-management-system/./src/components/SalesRanking.vue","webpack://inventory-management-system/./src/components/SalesRanking.vue?287f","webpack://inventory-management-system/./src/views/SalesRecord.vue?84fd","webpack://inventory-management-system/./src/views/Inventory.vue","webpack://inventory-management-system/./src/views/Inventory.vue?abe9","webpack://inventory-management-system/./src/views/Selling.vue","webpack://inventory-management-system/./src/components/InventorySearchPanel.vue","webpack://inventory-management-system/./src/components/StoreSelector.vue","webpack://inventory-management-system/./src/api/inventory.js","webpack://inventory-management-system/./src/components/StoreSelector.vue?a4bf","webpack://inventory-management-system/./src/components/ProductSelector.vue","webpack://inventory-management-system/./src/components/ProductSelector.vue?98cc","webpack://inventory-management-system/./src/components/ColorSelector.vue","webpack://inventory-management-system/./src/components/ColorSelector.vue?0d92","webpack://inventory-management-system/./src/components/StorageSelector.vue","webpack://inventory-management-system/./src/components/StorageSelector.vue?bbc1","webpack://inventory-management-system/./src/components/InventorySearchPanel.vue?01b1","webpack://inventory-management-system/./src/components/CartPanel.vue","webpack://inventory-management-system/./src/components/CartPanel.vue?9ff6","webpack://inventory-management-system/./src/lib/cart.js","webpack://inventory-management-system/./src/lib/inventoryOps.js","webpack://inventory-management-system/./src/views/Selling.vue?f5a1","webpack://inventory-management-system/./src/router/index.js","webpack://inventory-management-system/./src/main.js","webpack://inventory-management-system/webpack/bootstrap","webpack://inventory-management-system/webpack/runtime/chunk loaded","webpack://inventory-management-system/webpack/runtime/compat get default export","webpack://inventory-management-system/webpack/runtime/define property getters","webpack://inventory-management-system/webpack/runtime/global","webpack://inventory-management-system/webpack/runtime/hasOwnProperty shorthand","webpack://inventory-management-system/webpack/runtime/make namespace object","webpack://inventory-management-system/webpack/runtime/jsonp chunk loading","webpack://inventory-management-system/webpack/startup"],"sourcesContent":["<template>\r\n  <v-app>\r\n    <v-app-bar\r\n      color=\"primary\"\r\n      dark\r\n      prominent\r\n    >\r\n      <v-toolbar-title>Distributed Inventory and Sales Management System</v-toolbar-title>\r\n      <v-spacer></v-spacer>\r\n      \r\n      <!-- header -->\r\n      <v-btn\r\n        :to=\"{ name: 'Selling' }\"\r\n        color=\"white\"\r\n        variant=\"text\"\r\n        class=\"mr-2\"\r\n      >\r\n        <v-icon left>mdi-cash-register</v-icon>\r\n        selling\r\n      </v-btn>\r\n      \r\n      <v-btn\r\n        :to=\"{ name: 'Inventory' }\"\r\n        color=\"white\"\r\n        variant=\"text\"\r\n        class=\"mr-2\"\r\n      >\r\n        <v-icon left>mdi-warehouse</v-icon>\r\n        Inventory \r\n      </v-btn>\r\n      \r\n      <v-btn\r\n        :to=\"{ name: 'SalesRecord' }\"\r\n        color=\"white\"\r\n        variant=\"text\"\r\n        class=\"mr-2\"\r\n      >\r\n        <v-icon left>mdi-chart-line</v-icon>\r\n        sales record\r\n      </v-btn>\r\n      \r\n      <v-btn icon>\r\n        <v-icon>mdi-account</v-icon>\r\n      </v-btn>\r\n    </v-app-bar>\r\n\r\n    <v-main>\r\n      <router-view />\r\n    </v-main>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'App'\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import { render } from \"./App.vue?vue&type=template&id=6a8f2ebe\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <v-container fluid>\n    <v-row>\n      <v-col cols=\"12\">\n        <!-- Page Title -->\n        <v-card class=\"mb-4\">\n          <v-card-title class=\"d-flex align-center\">\n            <v-icon left size=\"large\" color=\"primary\">mdi-chart-line</v-icon>\n            <h1 class=\"text-h4\">Sales Records Query</h1>\n            <v-spacer></v-spacer>\n            <v-btn\n              color=\"primary\"\n              variant=\"outlined\"\n              @click=\"refreshData\"\n              :loading=\"isRefreshing\"\n            >\n              <v-icon left>mdi-refresh</v-icon>\n              Refresh Data\n            </v-btn>\n          </v-card-title>\n          <v-card-text>\n            <p class=\"text-body-1 text-grey-darken-1\">\n              View and manage all sales records with filtering by date, product, and store\n            </p>\n          </v-card-text>\n        </v-card>\n\n        <!-- Filter Panel -->\n        <SalesRecordFilters\n          @filters-change=\"onFiltersChange\"\n          @error=\"onFilterError\"\n          class=\"mb-4\"\n        />\n\n        <!-- Sales Ranking -->\n        <SalesRanking class=\"mb-4\" />\n\n        <!-- Sales Records List -->\n        <SalesRecordList\n          :sales-records=\"salesRecords\"\n          :stats=\"salesStats\"\n          :loading=\"loading\"\n          :error=\"error\"\n        />\n      </v-col>\n    </v-row>\n\n    <!-- Error Dialog -->\n    <v-dialog v-model=\"showErrorDialog\" max-width=\"500px\">\n      <v-card>\n        <v-card-title class=\"text-h5 text-error\">\n          <v-icon left color=\"error\">mdi-alert-circle</v-icon>\n          Error\n        </v-card-title>\n        <v-card-text>\n          {{ errorDialogMessage }}\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"primary\" @click=\"showErrorDialog = false\">OK</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nimport SalesRecordFilters from '../components/SalesRecordFilters.vue'\nimport SalesRecordList from '../components/SalesRecordList.vue'\nimport SalesRanking from '../components/SalesRanking.vue'\nimport { \n  fetchSalesWithFilters, \n  fetchSalesStats \n} from '../api/sales'\n\nexport default {\n  name: 'SalesRecord',\n  components: {\n    SalesRecordFilters,\n    SalesRecordList,\n    SalesRanking\n  },\n  data() {\n    return {\n      salesRecords: [],\n      salesStats: null,\n      loading: false,\n      isRefreshing: false,\n      error: '',\n      showErrorDialog: false,\n      errorDialogMessage: '',\n      currentFilters: {}\n    }\n  },\n  async mounted() {\n    // Initial load of all sales records\n    await this.loadSalesData()\n  },\n  methods: {\n    async onFiltersChange(filters) {\n      this.currentFilters = filters\n      await this.loadSalesData(filters)\n    },\n    \n    async loadSalesData(filters = {}) {\n      this.loading = true\n      this.error = ''\n      \n      try {\n        // Fetch sales records and statistics in parallel\n        const [records, stats] = await Promise.all([\n          fetchSalesWithFilters(filters),\n          fetchSalesStats(filters)\n        ])\n        \n        this.salesRecords = records\n        this.salesStats = stats\n        \n        // If no records found, show message\n        if (records.length === 0 && Object.keys(filters).length > 0) {\n          this.error = 'No sales records found matching the criteria. Please try adjusting the filter conditions'\n        }\n        \n      } catch (error) {\n        console.error('Failed to load sales data:', error)\n        this.error = 'Failed to load sales records: ' + error.message\n        this.salesRecords = []\n        this.salesStats = null\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    async refreshData() {\n      this.isRefreshing = true\n      try {\n        await this.loadSalesData(this.currentFilters)\n      } finally {\n        this.isRefreshing = false\n      }\n    },\n    \n    onFilterError(message) {\n      this.errorDialogMessage = message\n      this.showErrorDialog = true\n    }\n  }\n}\n</script>\n\n<style scoped>\n.v-card {\n  border-radius: 12px;\n}\n\n.text-grey-darken-1 {\n  color: rgba(0, 0, 0, 0.6) !important;\n}\n</style>","<template>\n  <v-card>\n    <v-card-title>\n      <v-icon left>mdi-filter</v-icon>\n      Filter Conditions\n    </v-card-title>\n    <v-card-text>\n      <v-row>\n        <!-- Date Filter -->\n        <v-col cols=\"12\" md=\"4\">\n          <v-select\n            v-model=\"dateFilterType\"\n            :items=\"dateFilterOptions\"\n            label=\"Date Filter Type\"\n            outlined\n            dense\n            @change=\"onDateFilterTypeChange\"\n          ></v-select>\n        </v-col>\n        \n        <!-- Two Days Selection -->\n        <v-col cols=\"12\" md=\"8\" v-if=\"dateFilterType === 'two-days'\">\n          <v-row>\n            <v-col cols=\"6\">\n              <v-text-field\n                v-model=\"firstDate\"\n                label=\"Start Date\"\n                type=\"date\"\n                outlined\n                dense\n                :max=\"new Date().toISOString().split('T')[0]\"\n                @update:model-value=\"onTwoDaysChange\"\n              ></v-text-field>\n            </v-col>\n            <v-col cols=\"6\">\n              <v-text-field\n                v-model=\"secondDate\"\n                label=\"End Date\"\n                type=\"date\"\n                outlined\n                dense\n                :max=\"new Date().toISOString().split('T')[0]\"\n                @update:model-value=\"onTwoDaysChange\"\n              ></v-text-field>\n            </v-col>\n          </v-row>\n        </v-col>\n        \n        <!-- Product Filter -->\n        <v-col cols=\"12\" md=\"4\">\n          <v-combobox\n            v-model=\"selectedProducts\"\n            :items=\"availableProducts\"\n            :loading=\"loadingProducts\"\n            label=\"Product Filter\"\n            placeholder=\"Select products\"\n            outlined\n            dense\n            multiple\n            chips\n            clearable\n            @update:model-value=\"onFiltersChange\"\n          ></v-combobox>\n        </v-col>\n        \n        <!-- Store Name Filter -->\n        <v-col cols=\"12\" md=\"4\">\n          <v-combobox\n            v-model=\"selectedStoreNames\"\n            :items=\"availableStoreNames\"\n            :loading=\"loadingStoreNames\"\n            label=\"Store Filter\"\n            placeholder=\"Select stores\"\n            outlined\n            dense\n            multiple\n            chips\n            clearable\n            @update:model-value=\"onFiltersChange\"\n          ></v-combobox>\n        </v-col>\n      </v-row>\n      \n      <!-- Action Buttons -->\n      <v-row class=\"mt-2\">\n        <v-col cols=\"12\" class=\"text-right\">\n          <v-btn\n            color=\"secondary\"\n            @click=\"resetFilters\"\n            class=\"mr-2\"\n          >\n            <v-icon left>mdi-refresh</v-icon>\n            Reset\n          </v-btn>\n          <v-btn\n            color=\"primary\"\n            @click=\"applyFilters\"\n            :loading=\"loading\"\n          >\n            <v-icon left>mdi-magnify</v-icon>\n            Search\n          </v-btn>\n        </v-col>\n      </v-row>\n    </v-card-text>\n    \n  </v-card>\n</template>\n\n<script>\nimport { \n  fetchDistinctProducts, \n  fetchDistinctStoreNames \n} from '../api/sales'\n\nexport default {\n  name: 'SalesRecordFilters',\n  emits: ['filters-change'],\n  data() {\n    return {\n      dateFilterType: 'none',\n      dateFilterOptions: [\n        { title: 'No Date Filter', value: 'none' },\n        { title: 'Select Day Range', value: 'two-days' }\n      ],\n      firstDate: null,\n      secondDate: null,\n      selectedProducts: [],\n      selectedStoreNames: [],\n      availableProducts: [],\n      availableStoreNames: [],\n      loadingProducts: false,\n      loadingStoreNames: false,\n      loading: false\n    }\n  },\n  mounted() {\n    this.loadFilterOptions()\n  },\n  methods: {\n    async loadFilterOptions() {\n      // Load product and store options in parallel\n      this.loadingProducts = true\n      this.loadingStoreNames = true\n      \n      try {\n        const [products, storeNames] = await Promise.all([\n          fetchDistinctProducts(),\n          fetchDistinctStoreNames()\n        ])\n        \n        this.availableProducts = products\n        this.availableStoreNames = storeNames\n      } catch (error) {\n        console.error('Failed to load filter options:', error)\n        this.$emit('error', 'Failed to load filter options')\n      } finally {\n        this.loadingProducts = false\n        this.loadingStoreNames = false\n      }\n    },\n    \n    onDateFilterTypeChange() {\n      this.resetDateFilters()\n      this.onFiltersChange()\n    },\n    \n    onTwoDaysChange() {\n      this.onFiltersChange()\n    },\n    \n    formatDate(date) {\n      if (!date) return ''\n      const dateObj = new Date(date)\n      // 使用本地时区，不需要手动添加偏移\n      return dateObj.toLocaleDateString('en-US')\n    },\n    \n    onFiltersChange() {\n      // Real-time filter change notification\n      this.emitFilters()\n    },\n    \n    emitFilters() {\n      const filters = {\n        dateRange: this.getDateRangeFilter(),\n        products: this.selectedProducts,\n        storeNames: this.selectedStoreNames\n      }\n      \n      this.$emit('filters-change', filters)\n    },\n    \n    getDateRangeFilter() {\n      if (this.dateFilterType === 'two-days' && this.firstDate && this.secondDate) {\n        // 验证日期范围的有效性\n        const startDate = new Date(this.firstDate)\n        const endDate = new Date(this.secondDate)\n        \n        if (startDate > endDate) {\n          this.$emit('error', '开始日期不能晚于结束日期')\n          return null\n        }\n        \n        // Return the two dates in chronological order\n        const dates = [this.firstDate, this.secondDate].sort()\n        return dates\n      }\n      return null\n    },\n    \n    applyFilters() {\n      this.loading = true\n      this.emitFilters()\n      \n      // Simulate loading state\n      setTimeout(() => {\n        this.loading = false\n      }, 500)\n    },\n    \n    resetFilters() {\n      this.dateFilterType = 'none'\n      this.firstDate = null\n      this.secondDate = null\n      this.selectedProducts = []\n      this.selectedStoreNames = []\n      this.emitFilters()\n    },\n    \n    resetDateFilters() {\n      this.firstDate = null\n      this.secondDate = null\n    }\n  }\n}\n</script>\n\n<style scoped>\n.v-date-picker {\n  margin: 0 auto;\n}\n</style>\n","import { createClient } from '@supabase/supabase-js'\r\n\r\n// Read from environment variables injected at build time via Vite/CLI env\r\n// For Vue CLI, we expect variables to be provided using process.env at build time\r\nconst SUPABASE_URL = process.env.VUE_APP_SUPABASE_URL || process.env.SUPABASE_URL\r\nconst SUPABASE_ANON_KEY = process.env.VUE_APP_SUPABASE_ANON_KEY || process.env.SUPABASE_ANON_KEY\r\n\r\nif (!SUPABASE_URL || !SUPABASE_ANON_KEY) {\r\n  // Fallback to avoid runtime crashes; developer will see console error in browser\r\n  // You can set VUE_APP_SUPABASE_URL and VUE_APP_SUPABASE_ANON_KEY in .env.* at frontend root\r\n  // Since backend/.env exists, copy values into frontend/.env.local when building locally\r\n  // eslint-disable-next-line no-console\r\n  console.error('[Supabase] Missing SUPABASE_URL or SUPABASE_ANON_KEY environment variables')\r\n}\r\n\r\nexport const supabase = createClient(\r\n  SUPABASE_URL || '',\r\n  SUPABASE_ANON_KEY || ''\r\n)\r\n\r\nexport default supabase\r\n\r\n\r\n","/**\r\n * Revenue Analysis Utilities\r\n * 统一处理Revenue分析相关的数据计算和转换\r\n */\r\n\r\n/**\r\n * 时区偏移常量 - 数据库使用UTC，需要转换为本地时间\r\n */\r\nconst TIMEZONE_OFFSET_HOURS = 8\r\n\r\n/**\r\n * 应用时区偏移到日期\r\n * @param {Date} date - 原始日期\r\n * @returns {Date} 调整后的日期\r\n */\r\nexport function applyTimezoneOffset(date) {\r\n  return new Date(date.getTime() + TIMEZONE_OFFSET_HOURS * 60 * 60 * 1000)\r\n}\r\n\r\n/**\r\n * 计算日收入数据\r\n * @param {Array} salesData - 销售数据数组\r\n * @returns {Array} 日收入数据数组\r\n */\r\nexport function calculateDailyRevenue(salesData) {\r\n  if (!Array.isArray(salesData) || salesData.length === 0) {\r\n    return []\r\n  }\r\n  \r\n  const dailyMap = new Map()\r\n  \r\n  salesData.forEach((record, index) => {\r\n    if (!record || !record.time) {\r\n      console.warn(`calculateDailyRevenue: Skipping invalid record at index ${index}`)\r\n      return\r\n    }\r\n    \r\n    const date = new Date(record.time)\r\n    if (isNaN(date.getTime())) {\r\n      console.warn(`calculateDailyRevenue: Invalid time format at index ${index}: ${record.time}`)\r\n      return\r\n    }\r\n    \r\n    // 应用时区偏移\r\n    const adjustedDate = applyTimezoneOffset(date)\r\n    const dateKey = adjustedDate.toISOString().split('T')[0]\r\n    \r\n    const price = parseFloat(record.price) || 0\r\n    const currentRevenue = dailyMap.get(dateKey) || 0\r\n    dailyMap.set(dateKey, currentRevenue + price)\r\n  })\r\n  \r\n  return Array.from(dailyMap.entries())\r\n    .map(([date, revenue]) => ({ \r\n      date, \r\n      revenue: Math.round(revenue * 100) / 100\r\n    }))\r\n    .sort((a, b) => new Date(a.date) - new Date(b.date))\r\n}\r\n\r\n/**\r\n * 计算月收入数据\r\n * @param {Array} salesData - 销售数据数组\r\n * @returns {Array} 月收入数据数组\r\n */\r\nexport function calculateMonthlyRevenue(salesData) {\r\n  if (!Array.isArray(salesData) || salesData.length === 0) {\r\n    return []\r\n  }\r\n  \r\n  const monthlyMap = new Map()\r\n  \r\n  salesData.forEach(record => {\r\n    if (!record || !record.time) return\r\n    \r\n    const date = new Date(record.time)\r\n    if (isNaN(date.getTime())) return\r\n    \r\n    // 应用时区偏移\r\n    const adjustedDate = applyTimezoneOffset(date)\r\n    const monthKey = `${adjustedDate.getFullYear()}-${String(adjustedDate.getMonth() + 1).padStart(2, '0')}`\r\n    \r\n    const price = parseFloat(record.price) || 0\r\n    const currentRevenue = monthlyMap.get(monthKey) || 0\r\n    monthlyMap.set(monthKey, currentRevenue + price)\r\n  })\r\n  \r\n  return Array.from(monthlyMap.entries())\r\n    .map(([month, revenue]) => ({ \r\n      month, \r\n      revenue: Math.round(revenue * 100) / 100\r\n    }))\r\n    .sort((a, b) => a.month.localeCompare(b.month))\r\n}\r\n\r\n/**\r\n * 计算指定日期的小时收入数据\r\n * @param {Array} salesData - 销售数据数组\r\n * @param {string} selectedDate - 选择的日期 (YYYY-MM-DD格式)\r\n * @returns {Array} 小时收入数据数组\r\n */\r\nexport function calculateHourlyRevenue(salesData, selectedDate) {\r\n  if (!Array.isArray(salesData) || salesData.length === 0 || !selectedDate) {\r\n    return []\r\n  }\r\n  \r\n  const selectedDateObj = new Date(selectedDate)\r\n  const startOfDay = new Date(selectedDateObj)\r\n  startOfDay.setHours(0, 0, 0, 0)\r\n  const endOfDay = new Date(selectedDateObj)\r\n  endOfDay.setHours(23, 59, 59, 999)\r\n  \r\n  // 过滤出指定日期的数据\r\n  const dayData = salesData.filter(item => {\r\n    if (!item.time) return false\r\n    const itemDate = new Date(item.time)\r\n    const adjustedItemDate = applyTimezoneOffset(itemDate)\r\n    return adjustedItemDate >= startOfDay && adjustedItemDate <= endOfDay\r\n  })\r\n  \r\n  // 初始化24小时数据\r\n  const hourlyMap = new Map()\r\n  for (let hour = 0; hour < 24; hour++) {\r\n    hourlyMap.set(hour, 0)\r\n  }\r\n  \r\n  // 计算每小时收入\r\n  dayData.forEach(item => {\r\n    if (!item.time) return\r\n    \r\n    const itemDate = new Date(item.time)\r\n    const adjustedItemDate = applyTimezoneOffset(itemDate)\r\n    const hour = adjustedItemDate.getHours()\r\n    const revenue = parseFloat(item.price) || 0\r\n    \r\n    if (hour >= 0 && hour <= 23) {\r\n      hourlyMap.set(hour, (hourlyMap.get(hour) || 0) + revenue)\r\n    }\r\n  })\r\n  \r\n  return Array.from(hourlyMap.entries())\r\n    .map(([hour, revenue]) => ({\r\n      hour: hour,\r\n      revenue: Math.round(revenue * 100) / 100\r\n    }))\r\n    .sort((a, b) => a.hour - b.hour)\r\n}\r\n\r\n/**\r\n * 格式化日期为显示格式\r\n * @param {string} dateString - 日期字符串\r\n * @param {string} format - 格式类型 ('date' | 'datetime')\r\n * @returns {string} 格式化后的日期字符串\r\n */\r\nexport function formatDate(dateString, format = 'date') {\r\n  if (!dateString) return ''\r\n  \r\n  const date = new Date(dateString)\r\n  const adjustedDate = applyTimezoneOffset(date)\r\n  \r\n  if (format === 'datetime') {\r\n    return adjustedDate.toLocaleString('en-US', {\r\n      year: 'numeric',\r\n      month: '2-digit',\r\n      day: '2-digit',\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      second: '2-digit',\r\n      hour12: false\r\n    })\r\n  }\r\n  \r\n  return adjustedDate.toLocaleDateString('en-US')\r\n}\r\n\r\n/**\r\n * 检查数据是否为聚合数据\r\n * @param {Array} data - 数据数组\r\n * @returns {boolean} 是否为聚合数据\r\n * @deprecated 此函数已简化，不再需要复杂的聚合数据检测\r\n */\r\nexport function isAggregatedData(data) {\r\n  // 简化逻辑：如果数据有revenue字段且没有time字段，则认为是聚合数据\r\n  if (!Array.isArray(data) || data.length === 0) return false\r\n  return data.some(item => item.revenue && !item.time)\r\n}\r\n\r\n/**\r\n * 获取图表标签\r\n * @param {Array} data - 数据数组\r\n * @param {string} type - 图表类型 ('daily' | 'monthly')\r\n * @returns {Array} 标签数组\r\n */\r\nexport function getChartLabels(data, type) {\r\n  if (!Array.isArray(data) || data.length === 0) return []\r\n  \r\n  return data.map(item => {\r\n    if (type === 'daily') {\r\n      const dateStr = item.date || item.time\r\n      if (!dateStr) return 'Invalid Date'\r\n      \r\n      const date = new Date(dateStr)\r\n      if (isNaN(date.getTime())) return 'Invalid Date'\r\n      \r\n      const adjustedDate = applyTimezoneOffset(date)\r\n      return adjustedDate.toLocaleDateString('zh-CN', {\r\n        month: 'short',\r\n        day: 'numeric'\r\n      })\r\n    } else {\r\n      return item.month || 'Unknown Month'\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 获取图表数据\r\n * @param {Array} data - 数据数组\r\n * @returns {Array} 数据数组\r\n */\r\nexport function getChartData(data) {\r\n  if (!Array.isArray(data) || data.length === 0) return []\r\n  \r\n  return data.map(item => {\r\n    const revenue = parseFloat(item.revenue || item.price || 0)\r\n    return isNaN(revenue) ? 0 : revenue\r\n  })\r\n}\r\n","import supabase from '../lib/supabase'\nimport { calculateDailyRevenue, calculateMonthlyRevenue } from '../lib/revenueUtils'\n\nconst TABLE_NAME = 'sales'\n\nexport async function createSale(saleData) {\n  const { data, error } = await supabase\n    .from(TABLE_NAME)\n    .insert([saleData])\n    .select()\n\n  if (error) throw error\n  return data\n}\n\nexport async function fetchSales() {\n  const { data, error } = await supabase\n    .from(TABLE_NAME)\n    .select('*')\n    .order('time', { ascending: false })\n\n  if (error) throw error\n  return data\n}\n\nexport async function fetchSalesWithFilters(filters) {\n  let query = supabase\n    .from(TABLE_NAME)\n    .select('*')\n\n  // Date filtering\n  if (filters.dateRange) {\n    if (filters.dateRange.length === 1) {\n      // Single day selection\n      const startDate = new Date(filters.dateRange[0])\n      startDate.setHours(0, 0, 0, 0)\n      const endDate = new Date(filters.dateRange[0])\n      endDate.setHours(23, 59, 59, 999)\n      \n      query = query\n        .gte('time', startDate.toISOString())\n        .lte('time', endDate.toISOString())\n    } else if (filters.dateRange.length === 2) {\n      // Date range\n      const startDate = new Date(filters.dateRange[0])\n      startDate.setHours(0, 0, 0, 0)\n      const endDate = new Date(filters.dateRange[1])\n      endDate.setHours(23, 59, 59, 999)\n      \n      query = query\n        .gte('time', startDate.toISOString())\n        .lte('time', endDate.toISOString())\n    }\n  }\n\n  // Product filtering (multiple selection)\n  if (filters.products && filters.products.length > 0) {\n    query = query.in('product', filters.products)\n  }\n\n  // Store name filtering\n  if (filters.storeNames && filters.storeNames.length > 0) {\n    query = query.in('name', filters.storeNames)\n  }\n\n  // Sorting and pagination\n  query = query.order('time', { ascending: false })\n  \n  if (filters.limit) {\n    query = query.limit(filters.limit)\n  }\n  \n  if (filters.offset) {\n    query = query.range(filters.offset, filters.offset + (filters.limit || 20) - 1)\n  }\n\n  const { data, error } = await query\n\n  if (error) throw error\n  return data\n}\n\nexport async function fetchDistinctProducts() {\n  const { data, error } = await supabase\n    .from(TABLE_NAME)\n    .select('product')\n    .order('product')\n\n  if (error) throw error\n  \n  // Remove duplicates and return product list\n  const uniqueProducts = [...new Set(data.map(item => item.product))]\n  return uniqueProducts\n}\n\nexport async function fetchDistinctStoreNames() {\n  const { data, error } = await supabase\n    .from(TABLE_NAME)\n    .select('name')\n    .order('name')\n\n  if (error) throw error\n  \n  // Remove duplicates and return store names list\n  const uniqueStoreNames = [...new Set(data.map(item => item.name))]\n  return uniqueStoreNames\n}\n\nexport async function fetchSalesStats(filters = {}) {\n  let query = supabase\n    .from(TABLE_NAME)\n    .select('price, quantity, time')\n\n  // Apply the same filter conditions\n  if (filters.dateRange) {\n    if (filters.dateRange.length === 1) {\n      const startDate = new Date(filters.dateRange[0])\n      startDate.setHours(0, 0, 0, 0)\n      const endDate = new Date(filters.dateRange[0])\n      endDate.setHours(23, 59, 59, 999)\n      \n      query = query\n        .gte('time', startDate.toISOString())\n        .lte('time', endDate.toISOString())\n    } else if (filters.dateRange.length === 2) {\n      const startDate = new Date(filters.dateRange[0])\n      startDate.setHours(0, 0, 0, 0)\n      const endDate = new Date(filters.dateRange[1])\n      endDate.setHours(23, 59, 59, 999)\n      \n      query = query\n        .gte('time', startDate.toISOString())\n        .lte('time', endDate.toISOString())\n    }\n  }\n\n  if (filters.products && filters.products.length > 0) {\n    query = query.in('product', filters.products)\n  }\n\n  if (filters.storeNames && filters.storeNames.length > 0) {\n    query = query.in('name', filters.storeNames)\n  }\n\n  const { data, error } = await query\n\n  if (error) throw error\n\n  // Calculate statistics\n  const totalRecords = data.length\n  const totalRevenue = data.reduce((sum, record) => sum + (record.price || 0), 0)\n  const totalQuantity = data.reduce((sum, record) => sum + (record.quantity || 0), 0)\n\n  // Calculate daily and monthly revenue\n  const dailyRevenue = calculateDailyRevenue(data)\n  const monthlyRevenue = calculateMonthlyRevenue(data)\n\n  return {\n    totalRecords,\n    totalRevenue,\n    totalQuantity,\n    dailyRevenue,\n    monthlyRevenue\n  }\n}\n\n// 使用统一的工具函数，移除重复代码\n\nexport async function fetchSalesRanking(filters = {}) {\n  let query = supabase\n    .from(TABLE_NAME)\n    .select('product, price, quantity, name, time')\n\n  // Apply date filtering\n  if (filters.dateRange && filters.dateRange.length === 2) {\n    const startDate = new Date(filters.dateRange[0])\n    startDate.setHours(0, 0, 0, 0)\n    const endDate = new Date(filters.dateRange[1])\n    endDate.setHours(23, 59, 59, 999)\n    \n    query = query\n      .gte('time', startDate.toISOString())\n      .lte('time', endDate.toISOString())\n  }\n\n  // Apply product filtering\n  if (filters.products && filters.products.length > 0) {\n    query = query.in('product', filters.products)\n  }\n\n  // Apply store filtering\n  if (filters.stores && filters.stores.length > 0) {\n    query = query.in('name', filters.stores)\n  }\n\n  const { data, error } = await query\n\n  if (error) throw error\n\n  // Process data to create ranking\n  const productStats = new Map()\n  \n  data.forEach(record => {\n    const product = record.product\n    const price = parseFloat(record.price) || 0\n    const quantity = parseInt(record.quantity) || 0\n    const store = record.name\n    \n    if (!productStats.has(product)) {\n      productStats.set(product, {\n        product,\n        totalRevenue: 0,\n        totalQuantity: 0,\n        stores: new Set(),\n        prices: []\n      })\n    }\n    \n    const stats = productStats.get(product)\n    stats.totalRevenue += price\n    stats.totalQuantity += quantity\n    stats.stores.add(store)\n    stats.prices.push(price / quantity) // Calculate unit price\n  })\n\n  // Convert to array and calculate additional metrics\n  let ranking = Array.from(productStats.values()).map(stats => ({\n    product: stats.product,\n    totalRevenue: Math.round(stats.totalRevenue * 100) / 100,\n    totalQuantity: stats.totalQuantity,\n    storeCount: stats.stores.size,\n    averagePrice: stats.prices.length > 0 \n      ? Math.round((stats.prices.reduce((sum, price) => sum + price, 0) / stats.prices.length) * 100) / 100\n      : 0\n  }))\n\n  // Sort by the specified criteria\n  const sortBy = filters.sortBy || 'revenue'\n  switch (sortBy) {\n    case 'revenue':\n      ranking.sort((a, b) => b.totalRevenue - a.totalRevenue)\n      break\n    case 'quantity':\n      ranking.sort((a, b) => b.totalQuantity - a.totalQuantity)\n      break\n    case 'stores':\n      ranking.sort((a, b) => b.storeCount - a.storeCount)\n      break\n    case 'price':\n      ranking.sort((a, b) => b.averagePrice - a.averagePrice)\n      break\n    default:\n      ranking.sort((a, b) => b.totalRevenue - a.totalRevenue)\n  }\n\n  // Apply limit\n  const limit = parseInt(filters.limit) || 10\n  ranking = ranking.slice(0, limit)\n\n  return {\n    ranking,\n    total: productStats.size\n  }\n}\n\nexport default {\n  createSale,\n  fetchSales,\n  fetchSalesWithFilters,\n  fetchDistinctProducts,\n  fetchDistinctStoreNames,\n  fetchSalesStats,\n  fetchSalesRanking\n}\n","import { render } from \"./SalesRecordFilters.vue?vue&type=template&id=51b2f8df&scoped=true\"\nimport script from \"./SalesRecordFilters.vue?vue&type=script&lang=js\"\nexport * from \"./SalesRecordFilters.vue?vue&type=script&lang=js\"\n\nimport \"./SalesRecordFilters.vue?vue&type=style&index=0&id=51b2f8df&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-51b2f8df\"]])\n\nexport default __exports__","<template>\r\n  <v-card>\r\n    <v-card-title>\r\n      <v-icon left>mdi-format-list-bulleted</v-icon>\r\n      Sales Records\r\n      <v-spacer></v-spacer>\r\n      <v-chip color=\"primary\" variant=\"outlined\">\r\n        Total {{ totalRecords }} Records\r\n      </v-chip>\r\n    </v-card-title>\r\n    \r\n    <v-card-text>\r\n      <!-- Statistics -->\r\n      <v-row class=\"mb-4\" v-if=\"stats\">\r\n        <v-col cols=\"12\" md=\"3\">\r\n          <v-card color=\"primary\" variant=\"tonal\">\r\n            <v-card-text class=\"text-center\">\r\n              <div class=\"text-h6\">{{ stats.totalRecords }}</div>\r\n              <div class=\"text-caption\">Total Records</div>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"3\">\r\n          <v-card color=\"success\" variant=\"tonal\">\r\n            <v-card-text class=\"text-center\">\r\n              <div class=\"text-h6\">${{ stats.totalRevenue.toLocaleString() }}</div>\r\n              <div class=\"text-caption\">Total Revenue</div>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"3\">\r\n          <v-card color=\"info\" variant=\"tonal\">\r\n            <v-card-text class=\"text-center\">\r\n              <div class=\"text-h6\">{{ stats.totalQuantity }}</div>\r\n              <div class=\"text-caption\">Total Quantity</div>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"3\">\r\n          <v-card color=\"warning\" variant=\"tonal\">\r\n            <v-card-text class=\"text-center\">\r\n              <v-btn\r\n                color=\"warning\"\r\n                variant=\"elevated\"\r\n                @click=\"showRevenueChart\"\r\n                :disabled=\"!stats.dailyRevenue || stats.dailyRevenue.length === 0\"\r\n              >\r\n                <v-icon left>mdi-chart-line</v-icon>\r\n                Show Revenue\r\n              </v-btn>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <!-- Loading State -->\r\n      <div v-if=\"loading\" class=\"text-center py-8\">\r\n        <v-progress-circular indeterminate color=\"primary\" size=\"64\"></v-progress-circular>\r\n        <div class=\"mt-2\">Loading...</div>\r\n      </div>\r\n\r\n      <!-- Error State -->\r\n      <v-alert v-else-if=\"error\" type=\"error\" class=\"mb-4\">\r\n        {{ error }}\r\n      </v-alert>\r\n\r\n      <!-- No Data State -->\r\n      <div v-else-if=\"salesRecords.length === 0\" class=\"text-center py-8\">\r\n        <v-icon size=\"64\" color=\"grey\">mdi-inbox-outline</v-icon>\r\n        <div class=\"text-h6 mt-2\">No Sales Records Found</div>\r\n        <div class=\"text-body-2 text-grey\">Please adjust filter conditions or check data</div>\r\n      </div>\r\n\r\n      <!-- Sales Records List -->\r\n      <div v-else>\r\n        <v-expansion-panels v-model=\"expandedPanels\" multiple>\r\n          <v-expansion-panel\r\n            v-for=\"(record, index) in paginatedRecords\"\r\n            :key=\"record.id || index\"\r\n            :value=\"index\"\r\n          >\r\n            <v-expansion-panel-title>\r\n              <template v-slot:default=\"{ expanded }\">\r\n                <v-row no-gutters>\r\n                  <v-col cols=\"12\" md=\"3\">\r\n                    <v-icon :icon=\"expanded ? 'mdi-chevron-up' : 'mdi-chevron-down'\"></v-icon>\r\n                    <span class=\"ml-2\">{{ record.product }}</span>\r\n                  </v-col>\r\n                  <v-col cols=\"12\" md=\"2\">\r\n                    <span class=\"text-caption text-grey\">Store:</span>\r\n                    <div class=\"font-weight-medium\">{{ record.name }}</div>\r\n                  </v-col>\r\n                  <v-col cols=\"12\" md=\"2\">\r\n                    <span class=\"text-caption text-grey\">Qty:</span>\r\n                    <div class=\"font-weight-medium\">{{ record.quantity }}</div>\r\n                  </v-col>\r\n                  <v-col cols=\"12\" md=\"2\">\r\n                    <span class=\"text-caption text-grey\">Unit:</span>\r\n                    <div class=\"font-weight-medium\">${{ record.unit_price }}</div>\r\n                  </v-col>\r\n                  <v-col cols=\"12\" md=\"2\">\r\n                    <span class=\"text-caption text-grey\">Total:</span>\r\n                    <div class=\"font-weight-bold text-primary\">${{ record.price }}</div>\r\n                  </v-col>\r\n                  <v-col cols=\"12\" md=\"1\">\r\n                    <span class=\"text-caption text-grey\">Time:</span>\r\n                    <div class=\"text-caption\">{{ formatDate(record.time) }}</div>\r\n                  </v-col>\r\n                </v-row>\r\n              </template>\r\n            </v-expansion-panel-title>\r\n            \r\n            <v-expansion-panel-text>\r\n              <v-divider class=\"mb-3\"></v-divider>\r\n              \r\n              <v-row>\r\n                <v-col cols=\"12\" md=\"6\">\r\n                  <v-list density=\"compact\">\r\n                    <v-list-item>\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-store</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Store Name</v-list-item-title>\r\n                      <v-list-item-subtitle>{{ record.name }}</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                    \r\n                    <v-list-item>\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-map-marker</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Store Location</v-list-item-title>\r\n                      <v-list-item-subtitle>{{ record.store_location }}</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                    \r\n                    <v-list-item>\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-package-variant</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Product</v-list-item-title>\r\n                      <v-list-item-subtitle>{{ record.product }}</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                    \r\n                    <v-list-item>\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-palette</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Color</v-list-item-title>\r\n                      <v-list-item-subtitle>{{ record.color }}</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                  </v-list>\r\n                </v-col>\r\n                \r\n                <v-col cols=\"12\" md=\"6\">\r\n                  <v-list density=\"compact\">\r\n                    <v-list-item v-if=\"record.storage\">\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-memory</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Storage</v-list-item-title>\r\n                      <v-list-item-subtitle>{{ record.storage }}GB</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                    \r\n                    <v-list-item>\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-numeric</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Quantity</v-list-item-title>\r\n                      <v-list-item-subtitle>{{ record.quantity }}</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                    \r\n                    <v-list-item>\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-currency-usd</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Unit Price</v-list-item-title>\r\n                      <v-list-item-subtitle>${{ record.unit_price }}</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                    \r\n                    <v-list-item>\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-calculator</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Total Price</v-list-item-title>\r\n                      <v-list-item-subtitle class=\"text-h6 text-primary\">${{ record.price }}</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                  </v-list>\r\n                </v-col>\r\n              </v-row>\r\n              \r\n              <v-divider class=\"mt-3\"></v-divider>\r\n              \r\n              <v-row class=\"mt-2\">\r\n                <v-col cols=\"12\" class=\"text-right\">\r\n                  <v-chip color=\"grey\" variant=\"outlined\" size=\"small\">\r\n                    <v-icon start>mdi-clock</v-icon>\r\n                    Sale Time: {{ formatDateTime(record.time) }}\r\n                  </v-chip>\r\n                  <v-chip color=\"grey\" variant=\"outlined\" size=\"small\" class=\"ml-2\">\r\n                    <v-icon start>mdi-identifier</v-icon>\r\n                    ID: {{ record.id }}\r\n                  </v-chip>\r\n                  <v-chip color=\"primary\" variant=\"outlined\" size=\"small\" class=\"ml-2\" v-if=\"record.order_id\">\r\n                    <v-icon start>mdi-receipt</v-icon>\r\n                    Order ID: {{ record.order_id }}\r\n                  </v-chip>\r\n                </v-col>\r\n              </v-row>\r\n            </v-expansion-panel-text>\r\n          </v-expansion-panel>\r\n        </v-expansion-panels>\r\n        \r\n        <!-- Pagination -->\r\n        <v-pagination\r\n          v-if=\"totalPages > 1\"\r\n          v-model=\"currentPage\"\r\n          :length=\"totalPages\"\r\n          :total-visible=\"7\"\r\n          class=\"mt-4\"\r\n          @update:model-value=\"onPageChange\"\r\n        >        </v-pagination>\r\n      </div>\r\n    </v-card-text>\r\n\r\n    <!-- Revenue Chart Dialog -->\r\n    <v-dialog v-model=\"showChartDialog\" max-width=\"1200px\">\r\n      <v-card>\r\n        <v-card-title class=\"d-flex align-center\">\r\n          <v-icon left color=\"primary\">mdi-chart-line</v-icon>\r\n          Revenue Analysis\r\n          <v-spacer></v-spacer>\r\n          <v-btn\r\n            icon=\"mdi-close\"\r\n            variant=\"text\"\r\n            @click=\"showChartDialog = false\"\r\n          ></v-btn>\r\n        </v-card-title>\r\n        <v-card-text>\r\n          <!-- Date Range Selector for Revenue Analysis -->\r\n          <v-card class=\"mb-4\" variant=\"outlined\">\r\n            <v-card-title class=\"text-subtitle-1\">\r\n              <v-icon left>mdi-calendar-range</v-icon>\r\n              Date Range Filter\r\n            </v-card-title>\r\n            <v-card-text>\r\n              <v-row>\r\n                <v-col cols=\"12\" md=\"4\">\r\n                  <v-text-field\r\n                    v-model=\"revenueDateRange.startDate\"\r\n                    label=\"Start Date\"\r\n                    type=\"date\"\r\n                    prepend-icon=\"mdi-calendar-start\"\r\n                    variant=\"outlined\"\r\n                    density=\"compact\"\r\n                    :max=\"revenueDateRange.endDate || new Date().toISOString().split('T')[0]\"\r\n                    @update:model-value=\"onRevenueDateRangeChange\"\r\n                  ></v-text-field>\r\n                </v-col>\r\n                <v-col cols=\"12\" md=\"4\">\r\n                  <v-text-field\r\n                    v-model=\"revenueDateRange.endDate\"\r\n                    label=\"End Date\"\r\n                    type=\"date\"\r\n                    prepend-icon=\"mdi-calendar-end\"\r\n                    variant=\"outlined\"\r\n                    density=\"compact\"\r\n                    :min=\"revenueDateRange.startDate\"\r\n                    :max=\"new Date().toISOString().split('T')[0]\"\r\n                    @update:model-value=\"onRevenueDateRangeChange\"\r\n                  ></v-text-field>\r\n                </v-col>\r\n                <v-col cols=\"12\" md=\"4\" class=\"d-flex align-center\">\r\n                  <v-btn\r\n                    color=\"primary\"\r\n                    variant=\"outlined\"\r\n                    @click=\"applyRevenueDateRange\"\r\n                    :disabled=\"!revenueDateRange.startDate || !revenueDateRange.endDate\"\r\n                    class=\"mr-2\"\r\n                  >\r\n                    <v-icon left>mdi-filter</v-icon>\r\n                    Apply Filter\r\n                  </v-btn>\r\n                  <v-btn\r\n                    color=\"secondary\"\r\n                    variant=\"text\"\r\n                    @click=\"clearRevenueDateRange\"\r\n                  >\r\n                    <v-icon left>mdi-refresh</v-icon>\r\n                    Clear\r\n                  </v-btn>\r\n                </v-col>\r\n              </v-row>\r\n            </v-card-text>\r\n          </v-card>\r\n          \r\n          <v-tabs v-model=\"activeTab\" class=\"mb-4\">\r\n            <v-tab value=\"daily\">Daily Revenue</v-tab>\r\n            <v-tab value=\"monthly\">Monthly Revenue</v-tab>\r\n          </v-tabs>\r\n          \r\n          <v-tabs-window v-model=\"activeTab\">\r\n            <v-tabs-window-item value=\"daily\">\r\n              <div v-if=\"filteredDailyRevenue && filteredDailyRevenue.length > 0\">\r\n                <RevenueChart\r\n                  :data=\"filteredDailyRevenue\"\r\n                  :type=\"'daily'\"\r\n                  :title=\"'Daily Revenue Trend'\"\r\n                />\r\n              </div>\r\n              <div v-else class=\"text-center py-8\">\r\n                <v-icon size=\"64\" color=\"grey\">mdi-chart-line</v-icon>\r\n                <div class=\"text-h6 mt-2\">No Daily Revenue Data</div>\r\n                <div class=\"text-body-2 text-grey\">No sales data available for daily analysis</div>\r\n              </div>\r\n            </v-tabs-window-item>\r\n            \r\n            <v-tabs-window-item value=\"monthly\">\r\n              <div v-if=\"filteredMonthlyRevenue && filteredMonthlyRevenue.length > 0\">\r\n                <RevenueChart\r\n                  :data=\"filteredMonthlyRevenue\"\r\n                  :type=\"'monthly'\"\r\n                  :title=\"'Monthly Revenue Trend'\"\r\n                />\r\n              </div>\r\n              <div v-else class=\"text-center py-8\">\r\n                <v-icon size=\"64\" color=\"grey\">mdi-chart-line</v-icon>\r\n                <div class=\"text-h6 mt-2\">No Monthly Revenue Data</div>\r\n                <div class=\"text-body-2 text-grey\">No sales data available for monthly analysis</div>\r\n              </div>\r\n            </v-tabs-window-item>\r\n          </v-tabs-window>\r\n        </v-card-text>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport RevenueChart from './RevenueChart.vue'\r\n\r\nexport default {\r\n  name: 'SalesRecordList',\r\n  components: {\r\n    RevenueChart\r\n  },\r\n  props: {\r\n    salesRecords: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    stats: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    error: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currentPage: 1,\r\n      itemsPerPage: 20,\r\n      expandedPanels: [],\r\n      showChartDialog: false,\r\n      activeTab: 'daily',\r\n      revenueDateRange: {\r\n        startDate: '',\r\n        endDate: ''\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    totalRecords() {\r\n      return this.salesRecords.length\r\n    },\r\n    totalPages() {\r\n      return Math.ceil(this.totalRecords / this.itemsPerPage)\r\n    },\r\n    paginatedRecords() {\r\n      const start = (this.currentPage - 1) * this.itemsPerPage\r\n      const end = start + this.itemsPerPage\r\n      return this.salesRecords.slice(start, end)\r\n    },\r\n    filteredSalesRecords() {\r\n      if (!this.revenueDateRange.startDate || !this.revenueDateRange.endDate) {\r\n        return this.salesRecords\r\n      }\r\n      \r\n      const startDate = new Date(this.revenueDateRange.startDate)\r\n      startDate.setHours(0, 0, 0, 0)\r\n      const endDate = new Date(this.revenueDateRange.endDate)\r\n      endDate.setHours(23, 59, 59, 999)\r\n      \r\n      return this.salesRecords.filter(record => {\r\n        if (!record.time) return false\r\n        const recordDate = new Date(record.time)\r\n        return recordDate >= startDate && recordDate <= endDate\r\n      })\r\n    },\r\n    filteredDailyRevenue() {\r\n      if (!this.stats || !this.stats.dailyRevenue) {\r\n        return []\r\n      }\r\n      \r\n      if (!this.revenueDateRange.startDate || !this.revenueDateRange.endDate) {\r\n        return this.stats.dailyRevenue\r\n      }\r\n      \r\n      const startDate = new Date(this.revenueDateRange.startDate)\r\n      const endDate = new Date(this.revenueDateRange.endDate)\r\n      \r\n      return this.stats.dailyRevenue.filter(item => {\r\n        const itemDate = new Date(item.date)\r\n        return itemDate >= startDate && itemDate <= endDate\r\n      })\r\n    },\r\n    filteredMonthlyRevenue() {\r\n      if (!this.stats || !this.stats.monthlyRevenue) {\r\n        return []\r\n      }\r\n      \r\n      if (!this.revenueDateRange.startDate || !this.revenueDateRange.endDate) {\r\n        return this.stats.monthlyRevenue\r\n      }\r\n      \r\n      const startDate = new Date(this.revenueDateRange.startDate)\r\n      const endDate = new Date(this.revenueDateRange.endDate)\r\n      \r\n      return this.stats.monthlyRevenue.filter(item => {\r\n        const [year, month] = item.month.split('-')\r\n        const itemDate = new Date(year, month - 1, 1)\r\n        return itemDate >= startDate && itemDate <= endDate\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    salesRecords() {\r\n      // Reset to first page when records change\r\n      this.currentPage = 1\r\n      this.expandedPanels = []\r\n    }\r\n  },\r\n  methods: {\r\n    formatDate(dateString) {\r\n      if (!dateString) return ''\r\n      const date = new Date(dateString)\r\n      // 添加8小时时区偏移，确保显示本地时间\r\n      const localDate = new Date(date.getTime() + 8 * 60 * 60 * 1000)\r\n      return localDate.toLocaleDateString('en-US')\r\n    },\r\n    \r\n    formatDateTime(dateString) {\r\n      if (!dateString) return ''\r\n      const date = new Date(dateString)\r\n      // 添加8小时时区偏移，确保显示本地时间\r\n      const localDate = new Date(date.getTime() + 8 * 60 * 60 * 1000)\r\n      return localDate.toLocaleString('en-US', {\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        second: '2-digit',\r\n        hour12: false\r\n      })\r\n    },\r\n    \r\n    onPageChange(page) {\r\n      this.currentPage = page\r\n      // Scroll to top\r\n      this.$nextTick(() => {\r\n        const element = this.$el.querySelector('.v-card')\r\n        if (element) {\r\n          element.scrollIntoView({ behavior: 'smooth' })\r\n        }\r\n      })\r\n    },\r\n    \r\n    expandAll() {\r\n      this.expandedPanels = Array.from({ length: this.paginatedRecords.length }, (_, i) => i)\r\n    },\r\n    \r\n    collapseAll() {\r\n      this.expandedPanels = []\r\n    },\r\n    \r\n    showRevenueChart() {\r\n      this.showChartDialog = true\r\n      this.activeTab = 'daily'\r\n    },\r\n    \r\n    onRevenueDateRangeChange() {\r\n      // Auto-apply filter when both dates are selected\r\n      if (this.revenueDateRange.startDate && this.revenueDateRange.endDate) {\r\n        this.applyRevenueDateRange()\r\n      }\r\n    },\r\n    \r\n    applyRevenueDateRange() {\r\n      // Force reactivity update\r\n      this.$forceUpdate()\r\n    },\r\n    \r\n    clearRevenueDateRange() {\r\n      this.revenueDateRange.startDate = ''\r\n      this.revenueDateRange.endDate = ''\r\n      this.applyRevenueDateRange()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.v-expansion-panel-title {\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.v-list-item {\r\n  min-height: 36px;\r\n}\r\n\r\n.v-chip {\r\n  font-size: 0.75rem;\r\n}\r\n</style>\r\n","<template>\n  <div class=\"revenue-chart\">\n    <v-card>\n      <v-card-title class=\"d-flex align-center\">\n        <v-icon left color=\"primary\">mdi-chart-line</v-icon>\n        {{ title }}\n        <v-spacer></v-spacer>\n        <v-chip color=\"success\" variant=\"outlined\">\n          Total: ${{ totalRevenue.toLocaleString() }}\n        </v-chip>\n      </v-card-title>\n      <v-card-text>\n        <!-- Day Selector for Daily Revenue Trend -->\n        <div v-if=\"type === 'daily'\" class=\"mb-4\">\n          <v-row align=\"center\">\n            <v-col cols=\"12\" md=\"6\">\n              <v-text-field\n                v-model=\"selectedDate\"\n                label=\"Select Day\"\n                type=\"date\"\n                prepend-icon=\"mdi-calendar\"\n                variant=\"outlined\"\n                density=\"compact\"\n                :max=\"new Date().toISOString().split('T')[0]\"\n                @update:model-value=\"onDateChange\"\n                @blur=\"onDateChange\"\n              ></v-text-field>\n            </v-col>\n            <v-col cols=\"12\" md=\"6\">\n              <v-btn\n                color=\"primary\"\n                variant=\"outlined\"\n                @click=\"loadHourlyData\"\n                :loading=\"loadingHourlyData\"\n                :disabled=\"!selectedDate\"\n              >\n                <v-icon left>mdi-refresh</v-icon>\n                Load Hourly Data\n              </v-btn>\n            </v-col>\n          </v-row>\n        </div>\n        \n        <div class=\"chart-container\">\n          <canvas ref=\"chartCanvas\"></canvas>\n        </div>\n      </v-card-text>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport Chart from 'chart.js/auto'\nimport { \n  calculateHourlyRevenue, \n  getChartLabels, \n  getChartData \n} from '../lib/revenueUtils'\n\nexport default {\n  name: 'RevenueChart',\n  props: {\n    data: {\n      type: Array,\n      required: true\n    },\n    type: {\n      type: String,\n      required: true,\n      validator: value => ['daily', 'monthly'].includes(value)\n    },\n    title: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      chart: null,\n      selectedDate: '',\n      loadingHourlyData: false,\n      hourlyData: [],\n      updateTimeout: null\n    }\n  },\n  computed: {\n    totalRevenue() {\n      if (!this.data || !Array.isArray(this.data)) {\n        return 0\n      }\n      return this.data.reduce((sum, item) => {\n        const revenue = parseFloat(item.revenue)\n        return sum + (isNaN(revenue) ? 0 : revenue)\n      }, 0)\n    }\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.createChart()\n    })\n  },\n  beforeUnmount() {\n    // 清理定时器\n    if (this.updateTimeout) {\n      clearTimeout(this.updateTimeout)\n      this.updateTimeout = null\n    }\n    \n    // 销毁图表\n    if (this.chart) {\n      this.chart.destroy()\n      this.chart = null\n    }\n  },\n  watch: {\n    data: {\n      handler(newData, oldData) {\n        // 防止无限递归：只有当数据真正改变时才更新\n        if (JSON.stringify(newData) !== JSON.stringify(oldData)) {\n          this.debouncedUpdateChart()\n        }\n      },\n      deep: true\n    },\n    hourlyData: {\n      handler(newData, oldData) {\n        // 防止无限递归：只有当数据真正改变时才更新\n        if (JSON.stringify(newData) !== JSON.stringify(oldData)) {\n          this.debouncedUpdateChart()\n        }\n      },\n      deep: true\n    }\n  },\n  methods: {\n    debouncedUpdateChart() {\n      // 清除之前的定时器\n      if (this.updateTimeout) {\n        clearTimeout(this.updateTimeout)\n      }\n      \n      // 设置新的定时器，防抖延迟100ms\n      this.updateTimeout = setTimeout(() => {\n        this.$nextTick(() => {\n          this.updateChart()\n        })\n      }, 100)\n    },\n\n    getChartConfig() {\n      const chartType = this.type || 'daily'\n      const hasHourlyData = this.hourlyData.length > 0\n      const isDailyWithHourly = chartType === 'daily' && hasHourlyData\n      \n      let labels, datasets\n      \n      if (isDailyWithHourly) {\n        // 小时数据图表\n        labels = Array.from({ length: 24 }, (_, i) => `${i}:00`)\n        const revenues = Array.from({ length: 24 }, (_, i) => {\n          const hourData = this.hourlyData.find(h => h.hour === i)\n          return hourData ? hourData.revenue : 0\n        })\n        \n        datasets = [{\n          label: 'Hourly Revenue',\n          data: revenues,\n          borderColor: '#1976d2',\n          backgroundColor: 'rgba(25, 118, 210, 0.1)',\n          borderWidth: 2,\n          fill: false,\n          tension: 0.4,\n          pointRadius: 4,\n          pointHoverRadius: 6\n        }]\n      } else {\n        // 日/月数据图表\n        labels = getChartLabels(this.data, chartType)\n        const revenues = getChartData(this.data)\n        \n        datasets = [{\n          label: chartType === 'daily' ? 'Daily Revenue' : 'Monthly Revenue',\n          data: revenues,\n          borderColor: '#1976d2',\n          backgroundColor: 'rgba(25, 118, 210, 0.1)',\n          borderWidth: 2,\n          fill: false,\n          tension: 0.4,\n          pointRadius: 4,\n          pointHoverRadius: 6\n        }]\n      }\n      \n      return {\n        type: 'line',\n        data: { labels, datasets },\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          animation: {\n            duration: 750,\n            easing: 'easeInOutQuart'\n          },\n          plugins: {\n            legend: {\n              display: true,\n              position: 'top'\n            },\n            tooltip: {\n              enabled: true,\n              callbacks: {\n                label: function(context) {\n                  return `${context.dataset.label}: $${context.parsed.y.toLocaleString()}`\n                }\n              }\n            }\n          },\n          scales: {\n            x: {\n              display: true,\n              title: {\n                display: true,\n                text: isDailyWithHourly ? 'Time (Hours)' : (chartType === 'daily' ? 'Date' : 'Month')\n              },\n              grid: {\n                display: true,\n                color: 'rgba(0, 0, 0, 0.1)'\n              }\n            },\n            y: {\n              display: true,\n              title: {\n                display: true,\n                text: 'Revenue ($)'\n              },\n              grid: {\n                display: true,\n                color: 'rgba(0, 0, 0, 0.1)'\n              },\n              ticks: {\n                callback: function(value) {\n                  return '$' + value.toLocaleString()\n                }\n              }\n            }\n          },\n          interaction: {\n            intersect: false,\n            mode: 'index'\n          }\n        }\n      }\n    },\n\n    createChart() {\n      if (!this.$refs.chartCanvas) {\n        console.warn('RevenueChart: Canvas element not found')\n        return\n      }\n      \n      // 检查Canvas元素是否已挂载到DOM\n      if (!this.$refs.chartCanvas.parentNode) {\n        console.warn('RevenueChart: Canvas element not mounted to DOM')\n        return\n      }\n      \n      try {\n        if (this.chart) {\n          this.chart.destroy()\n          this.chart = null\n        }\n\n        const config = this.getChartConfig()\n        \n        // 确保Canvas有正确的尺寸\n        const canvas = this.$refs.chartCanvas\n        if (canvas.width === 0 || canvas.height === 0) {\n          canvas.width = canvas.offsetWidth || 400\n          canvas.height = canvas.offsetHeight || 300\n        }\n        \n        this.chart = new Chart(canvas, config)\n      } catch (error) {\n        console.error('RevenueChart: Error creating chart:', error)\n        // 如果创建失败，清理chart引用\n        this.chart = null\n      }\n    },\n    \n    updateChart() {\n      if (!this.chart) {\n        this.createChart()\n        return\n      }\n      \n      // 检查chart是否仍然有效\n      if (!this.chart.canvas || !this.chart.canvas.parentNode) {\n        console.warn('RevenueChart: Chart canvas is no longer valid, recreating...')\n        this.createChart()\n        return\n      }\n      \n      try {\n        const config = this.getChartConfig()\n        this.chart.data.labels = config.data.labels\n        this.chart.data.datasets = config.data.datasets\n        this.chart.update('none')\n      } catch (error) {\n        console.error('RevenueChart: Error updating chart:', error)\n        // 如果更新失败，尝试重新创建图表\n        this.createChart()\n      }\n    },\n\n    onDateChange() {\n      // 清除之前的小时数据\n      this.hourlyData = []\n      \n      // 如果选择了日期，则加载小时数据\n      if (this.selectedDate) {\n        this.loadHourlyData()\n      }\n      // 注意：不在这里调用updateChart()，让watch监听器处理\n    },\n\n    async loadHourlyData() {\n      if (!this.selectedDate) return\n\n      this.loadingHourlyData = true\n      try {\n        // 计算小时数据\n        const hourlyData = calculateHourlyRevenue(this.data, this.selectedDate)\n        this.hourlyData = hourlyData\n        \n        // 注意：不在这里调用updateChart()，让watch监听器处理hourlyData的变化\n        \n      } catch (error) {\n        console.error('Failed to load hourly data:', error)\n        this.$emit('error', 'Failed to load hourly revenue data')\n        this.hourlyData = []\n      } finally {\n        this.loadingHourlyData = false\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.revenue-chart {\n  width: 100%;\n}\n\n.chart-container {\n  position: relative;\n  height: 400px;\n  width: 100%;\n}\n\ncanvas {\n  max-height: 400px;\n}\n</style>\n\n\n\n\n\n","import { render } from \"./RevenueChart.vue?vue&type=template&id=b9114bc4&scoped=true\"\nimport script from \"./RevenueChart.vue?vue&type=script&lang=js\"\nexport * from \"./RevenueChart.vue?vue&type=script&lang=js\"\n\nimport \"./RevenueChart.vue?vue&type=style&index=0&id=b9114bc4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b9114bc4\"]])\n\nexport default __exports__","import { render } from \"./SalesRecordList.vue?vue&type=template&id=afa57116&scoped=true\"\nimport script from \"./SalesRecordList.vue?vue&type=script&lang=js\"\nexport * from \"./SalesRecordList.vue?vue&type=script&lang=js\"\n\nimport \"./SalesRecordList.vue?vue&type=style&index=0&id=afa57116&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-afa57116\"]])\n\nexport default __exports__","<template>\n  <v-card>\n    <v-card-title class=\"d-flex align-center\">\n      <v-icon left color=\"primary\">mdi-trophy</v-icon>\n      Sales Ranking\n      <v-spacer></v-spacer>\n      <v-chip color=\"primary\" variant=\"outlined\">\n        {{ totalProducts }} Products\n      </v-chip>\n    </v-card-title>\n    \n    <v-card-text>\n      <!-- Filters -->\n      <v-card variant=\"outlined\" class=\"mb-4\">\n        <v-card-title class=\"text-subtitle-1\">\n          <v-icon left>mdi-filter</v-icon>\n          Ranking Filters\n        </v-card-title>\n        <v-card-text>\n          <v-row>\n            <v-col cols=\"12\" md=\"3\">\n              <v-select\n                v-model=\"rankingFilters.sortBy\"\n                :items=\"sortOptions\"\n                label=\"Sort By\"\n                outlined\n                dense\n                @update:model-value=\"onFiltersChange\"\n              ></v-select>\n            </v-col>\n            <v-col cols=\"12\" md=\"3\">\n              <v-text-field\n                v-model=\"rankingFilters.startDate\"\n                label=\"Start Date\"\n                type=\"date\"\n                outlined\n                dense\n                :max=\"rankingFilters.endDate || new Date().toISOString().split('T')[0]\"\n                @update:model-value=\"onFiltersChange\"\n              ></v-text-field>\n            </v-col>\n            <v-col cols=\"12\" md=\"3\">\n              <v-text-field\n                v-model=\"rankingFilters.endDate\"\n                label=\"End Date\"\n                type=\"date\"\n                outlined\n                dense\n                :min=\"rankingFilters.startDate\"\n                :max=\"new Date().toISOString().split('T')[0]\"\n                @update:model-value=\"onFiltersChange\"\n              ></v-text-field>\n            </v-col>\n            <v-col cols=\"12\" md=\"3\">\n              <v-text-field\n                v-model=\"rankingFilters.limit\"\n                label=\"Display Count\"\n                type=\"number\"\n                outlined\n                dense\n                min=\"1\"\n                max=\"100\"\n                @update:model-value=\"onFiltersChange\"\n              ></v-text-field>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col cols=\"12\" md=\"6\">\n              <v-combobox\n                v-model=\"rankingFilters.products\"\n                :items=\"availableProducts\"\n                label=\"Product Filter\"\n                placeholder=\"Select specific products\"\n                outlined\n                dense\n                multiple\n                chips\n                clearable\n                @update:model-value=\"onFiltersChange\"\n              ></v-combobox>\n            </v-col>\n            <v-col cols=\"12\" md=\"6\">\n              <v-combobox\n                v-model=\"rankingFilters.stores\"\n                :items=\"availableStores\"\n                label=\"Store Filter\"\n                placeholder=\"Select specific stores\"\n                outlined\n                dense\n                multiple\n                chips\n                clearable\n                @update:model-value=\"onFiltersChange\"\n              ></v-combobox>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col cols=\"12\" class=\"text-right\">\n              <v-btn\n                color=\"secondary\"\n                @click=\"resetFilters\"\n                class=\"mr-2\"\n              >\n                <v-icon left>mdi-refresh</v-icon>\n                Reset\n              </v-btn>\n              <v-btn\n                color=\"primary\"\n                @click=\"loadRankingData\"\n                :loading=\"loading\"\n              >\n                <v-icon left>mdi-magnify</v-icon>\n                Update Ranking\n              </v-btn>\n            </v-col>\n          </v-row>\n        </v-card-text>\n      </v-card>\n\n      <!-- Loading State -->\n      <div v-if=\"loading\" class=\"text-center py-8\">\n        <v-progress-circular indeterminate color=\"primary\" size=\"64\"></v-progress-circular>\n        <div class=\"mt-2\">Loading ranking data...</div>\n      </div>\n\n      <!-- Error State -->\n      <v-alert v-else-if=\"error\" type=\"error\" class=\"mb-4\">\n        {{ error }}\n      </v-alert>\n\n      <!-- No Data State -->\n      <div v-else-if=\"rankingData.length === 0\" class=\"text-center py-8\">\n        <v-icon size=\"64\" color=\"grey\">mdi-trophy-outline</v-icon>\n        <div class=\"text-h6 mt-2\">No ranking data</div>\n        <div class=\"text-body-2 text-grey\">Please adjust filters or check data</div>\n      </div>\n\n      <!-- Ranking List -->\n      <div v-else>\n        <v-list>\n          <v-list-item\n            v-for=\"(item, index) in rankingData\"\n            :key=\"item.product\"\n            class=\"mb-2\"\n            :class=\"getRankingItemClass(index)\"\n          >\n            <template v-slot:prepend>\n              <v-avatar\n                :color=\"getRankingColor(index)\"\n                size=\"40\"\n                class=\"font-weight-bold\"\n              >\n                {{ index + 1 }}\n              </v-avatar>\n            </template>\n            \n            <v-list-item-title class=\"text-h6\">\n              {{ item.product }}\n            </v-list-item-title>\n            \n            <v-list-item-subtitle>\n              <v-row no-gutters>\n                <v-col cols=\"12\" md=\"3\">\n                  <v-icon small class=\"mr-1\">mdi-cash</v-icon>\n                  <span class=\"font-weight-bold text-success\">\n                    ${{ item.totalRevenue.toLocaleString() }}\n                  </span>\n                  <div class=\"text-caption\">Total Revenue</div>\n                </v-col>\n                <v-col cols=\"12\" md=\"3\">\n                  <v-icon small class=\"mr-1\">mdi-package-variant</v-icon>\n                  <span class=\"font-weight-bold text-primary\">\n                    {{ item.totalQuantity }}\n                  </span>\n                  <div class=\"text-caption\">Total Quantity</div>\n                </v-col>\n                <v-col cols=\"12\" md=\"3\">\n                  <v-icon small class=\"mr-1\">mdi-store</v-icon>\n                  <span class=\"font-weight-bold text-info\">\n                    {{ item.storeCount }}\n                  </span>\n                  <div class=\"text-caption\">Store Count</div>\n                </v-col>\n                <v-col cols=\"12\" md=\"3\">\n                  <v-icon small class=\"mr-1\">mdi-chart-line</v-icon>\n                  <span class=\"font-weight-bold text-warning\">\n                    ${{ item.averagePrice.toFixed(2) }}\n                  </span>\n                  <div class=\"text-caption\">Average Price</div>\n                </v-col>\n              </v-row>\n            </v-list-item-subtitle>\n            \n            <template v-slot:append>\n              <v-chip\n                :color=\"getRankingColor(index)\"\n                variant=\"outlined\"\n                size=\"small\"\n              >\n                <v-icon start>mdi-trophy</v-icon>\n                {{ getRankingText(index) }}\n              </v-chip>\n            </template>\n          </v-list-item>\n        </v-list>\n\n        <!-- Statistics -->\n        <v-card variant=\"outlined\" class=\"mt-4\">\n          <v-card-title class=\"text-subtitle-1\">\n            <v-icon left>mdi-chart-box</v-icon>\n            Ranking Statistics\n          </v-card-title>\n          <v-card-text>\n            <v-row>\n              <v-col cols=\"12\" md=\"3\">\n                <v-card color=\"primary\" variant=\"tonal\">\n                  <v-card-text class=\"text-center\">\n                    <div class=\"text-h6\">{{ rankingData.length }}</div>\n                    <div class=\"text-caption\">Ranked Products</div>\n                  </v-card-text>\n                </v-card>\n              </v-col>\n              <v-col cols=\"12\" md=\"3\">\n                <v-card color=\"success\" variant=\"tonal\">\n                  <v-card-text class=\"text-center\">\n                    <div class=\"text-h6\">${{ totalRevenue.toLocaleString() }}</div>\n                    <div class=\"text-caption\">Total Revenue</div>\n                  </v-card-text>\n                </v-card>\n              </v-col>\n              <v-col cols=\"12\" md=\"3\">\n                <v-card color=\"info\" variant=\"tonal\">\n                  <v-card-text class=\"text-center\">\n                    <div class=\"text-h6\">{{ totalQuantity }}</div>\n                    <div class=\"text-caption\">Total Quantity</div>\n                  </v-card-text>\n                </v-card>\n              </v-col>\n              <v-col cols=\"12\" md=\"3\">\n                <v-card color=\"warning\" variant=\"tonal\">\n                  <v-card-text class=\"text-center\">\n                    <div class=\"text-h6\">${{ averagePrice.toFixed(2) }}</div>\n                    <div class=\"text-caption\">Average Price</div>\n                  </v-card-text>\n                </v-card>\n              </v-col>\n            </v-row>\n          </v-card-text>\n        </v-card>\n      </div>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport { \n  fetchDistinctProducts, \n  fetchDistinctStoreNames,\n  fetchSalesRanking\n} from '../api/sales'\n\nexport default {\n  name: 'SalesRanking',\n  data() {\n    return {\n      rankingData: [],\n      loading: false,\n      error: '',\n      totalProducts: 0,\n      availableProducts: [],\n      availableStores: [],\n      rankingFilters: {\n        sortBy: 'revenue',\n        startDate: '',\n        endDate: '',\n        limit: 10,\n        products: [],\n        stores: []\n      },\n      sortOptions: [\n        { title: 'Sort by Revenue', value: 'revenue' },\n        { title: 'Sort by Quantity', value: 'quantity' },\n        { title: 'Sort by Store Count', value: 'stores' },\n        { title: 'Sort by Average Price', value: 'price' }\n      ]\n    }\n  },\n  computed: {\n    totalRevenue() {\n      return this.rankingData.reduce((sum, item) => sum + item.totalRevenue, 0)\n    },\n    totalQuantity() {\n      return this.rankingData.reduce((sum, item) => sum + item.totalQuantity, 0)\n    },\n    averagePrice() {\n      if (this.rankingData.length === 0) return 0\n      return this.totalRevenue / this.totalQuantity\n    }\n  },\n  async mounted() {\n    await this.loadFilterOptions()\n    await this.loadRankingData()\n  },\n  methods: {\n    async loadFilterOptions() {\n      try {\n        const [products, stores] = await Promise.all([\n          fetchDistinctProducts(),\n          fetchDistinctStoreNames()\n        ])\n        \n        this.availableProducts = products\n        this.availableStores = stores\n      } catch (error) {\n        console.error('Failed to load filter options:', error)\n        this.error = 'Failed to load filter options'\n      }\n    },\n    \n    async loadRankingData() {\n      this.loading = true\n      this.error = ''\n      \n      try {\n        const filters = this.buildFilters()\n        const data = await fetchSalesRanking(filters)\n        \n        this.rankingData = data.ranking || []\n        this.totalProducts = data.total || 0\n        \n        if (this.rankingData.length === 0) {\n          this.error = 'No products found matching the criteria'\n        }\n        \n      } catch (error) {\n        console.error('Failed to load ranking data:', error)\n        this.error = 'Failed to load ranking data: ' + error.message\n        this.rankingData = []\n        this.totalProducts = 0\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    buildFilters() {\n      const filters = {\n        sortBy: this.rankingFilters.sortBy,\n        limit: parseInt(this.rankingFilters.limit) || 10\n      }\n      \n      if (this.rankingFilters.startDate && this.rankingFilters.endDate) {\n        filters.dateRange = [this.rankingFilters.startDate, this.rankingFilters.endDate]\n      }\n      \n      if (this.rankingFilters.products.length > 0) {\n        filters.products = this.rankingFilters.products\n      }\n      \n      if (this.rankingFilters.stores.length > 0) {\n        filters.stores = this.rankingFilters.stores\n      }\n      \n      return filters\n    },\n    \n    onFiltersChange() {\n      // 实时更新排行榜\n      this.loadRankingData()\n    },\n    \n    resetFilters() {\n      this.rankingFilters = {\n        sortBy: 'revenue',\n        startDate: '',\n        endDate: '',\n        limit: 10,\n        products: [],\n        stores: []\n      }\n      this.loadRankingData()\n    },\n    \n    getRankingColor(index) {\n      if (index === 0) return 'amber'\n      if (index === 1) return 'grey'\n      if (index === 2) return 'orange'\n      return 'primary'\n    },\n    \n    getRankingText(index) {\n      if (index === 0) return 'Champion'\n      if (index === 1) return 'Runner-up'\n      if (index === 2) return 'Third Place'\n      return `#${index + 1}`\n    },\n    \n    getRankingItemClass(index) {\n      if (index < 3) return 'ranking-top'\n      return ''\n    }\n  }\n}\n</script>\n\n<style scoped>\n.ranking-top {\n  border-left: 4px solid #ff9800;\n  background-color: rgba(255, 152, 0, 0.05);\n}\n\n.v-list-item {\n  border-radius: 8px;\n  margin-bottom: 8px;\n}\n\n.v-avatar {\n  font-size: 1.1rem;\n}\n</style>\n","import { render } from \"./SalesRanking.vue?vue&type=template&id=9d773ab0&scoped=true\"\nimport script from \"./SalesRanking.vue?vue&type=script&lang=js\"\nexport * from \"./SalesRanking.vue?vue&type=script&lang=js\"\n\nimport \"./SalesRanking.vue?vue&type=style&index=0&id=9d773ab0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9d773ab0\"]])\n\nexport default __exports__","import { render } from \"./SalesRecord.vue?vue&type=template&id=011e5758&scoped=true\"\nimport script from \"./SalesRecord.vue?vue&type=script&lang=js\"\nexport * from \"./SalesRecord.vue?vue&type=script&lang=js\"\n\nimport \"./SalesRecord.vue?vue&type=style&index=0&id=011e5758&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-011e5758\"]])\n\nexport default __exports__","<template>\r\n  <v-container fluid>\r\n    <v-row>\r\n      <v-col cols=\"12\">\r\n        <v-card>\r\n          <v-card-title>\r\n            <h1 class=\"text-h4\">Inventory</h1>\r\n          </v-card-title>\r\n          <v-card-text>\r\n            <v-row class=\"mb-4\" dense>\r\n              <v-col cols=\"12\" sm=\"6\" md=\"3\">\r\n                <v-text-field\r\n                  v-model=\"idFilter\"\r\n                  label=\"ID\"\r\n                  clearable\r\n                  density=\"comfortable\"\r\n                />\r\n              </v-col>\r\n              <v-col cols=\"12\" sm=\"6\" md=\"3\">\r\n                <v-text-field\r\n                  v-model=\"productFilter\"\r\n                  label=\"Product\"\r\n                  clearable\r\n                  density=\"comfortable\"\r\n                />\r\n              </v-col>\r\n              <v-col cols=\"12\" sm=\"6\" md=\"3\">\r\n                <v-text-field\r\n                  v-model=\"nameFilter\"\r\n                  label=\"Store Name\"\r\n                  clearable\r\n                  density=\"comfortable\"\r\n                />\r\n              </v-col>\r\n              <v-col cols=\"12\" sm=\"6\" md=\"3\">\r\n                <v-text-field\r\n                  v-model=\"locationFilter\"\r\n                  label=\"Store Location\"\r\n                  clearable\r\n                  density=\"comfortable\"\r\n                />\r\n              </v-col>\r\n            </v-row>\r\n            <v-data-table\r\n              :headers='headers'\r\n              :items='filteredProducts'\r\n              v-model:sort-by=\"sortBy\"\r\n            >\r\n              <template #[`item.price`]=\"{ item }\">\r\n                <span v-if=\"item.price !== null && item.price !== undefined\">\r\n                  ${{ item.price }}\r\n                </span>\r\n                <span v-else>-</span>\r\n              </template>\r\n            </v-data-table>\r\n          </v-card-text>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport supabase from '../lib/supabase'\r\n\r\nconst TABLE_NAME = 'inventory'\r\n\r\nexport default {\r\n  name: 'InventoryPage',\r\n  data(){\r\n    return {\r\n      headers:[\r\n        {title: 'ID', value: 'id'},\r\n        {title: 'Product', value: 'product'},\r\n        {title: 'Color', value: 'color'},\r\n        {title: 'Storage', value: 'storage'},\r\n        {title: 'Stock Quantity', value: 'quantity'},\r\n        {title: 'Price', value: 'price'},\r\n        {title: 'Store Name', value: 'name'},\r\n        {title: 'Store Location', value: 'location'},\r\n        {title: 'Update Time', value: 'UpdateTime'},\r\n      ],\r\n      products: [],\r\n      // filters\r\n      idFilter: '',\r\n      productFilter: '',\r\n      nameFilter: '',\r\n      locationFilter: '',\r\n      // initial sort by store name ascending\r\n      sortBy: [{ key: 'name', order: 'asc' }]\r\n    };\r\n  },\r\n  computed: {\r\n    filteredProducts(){\r\n      const idQ = String(this.idFilter || '').trim().toLowerCase()\r\n      const productQ = String(this.productFilter || '').trim().toLowerCase()\r\n      const nameQ = String(this.nameFilter || '').trim().toLowerCase()\r\n      const locationQ = String(this.locationFilter || '').trim().toLowerCase()\r\n\r\n      if (!idQ && !productQ && !nameQ && !locationQ) return this.products\r\n\r\n      return (this.products || []).filter((row) => {\r\n        const idStr = row && row.id !== undefined && row.id !== null ? String(row.id).toLowerCase() : ''\r\n        const productStr = row && row.product ? String(row.product).toLowerCase() : ''\r\n        const nameStr = row && row.name ? String(row.name).toLowerCase() : ''\r\n        const locationStr = row && row.location ? String(row.location).toLowerCase() : ''\r\n\r\n        const idOk = !idQ || idStr.includes(idQ)\r\n        const productOk = !productQ || productStr.includes(productQ)\r\n        const nameOk = !nameQ || nameStr.includes(nameQ)\r\n        const locationOk = !locationQ || locationStr.includes(locationQ)\r\n\r\n        return idOk && productOk && nameOk && locationOk\r\n      })\r\n    }\r\n  },\r\n  async mounted(){\r\n    try{\r\n      const {data, error} = await supabase\r\n      .from (TABLE_NAME)\r\n      .select('*');\r\n      if (error) throw error\r\n      this.products = data\r\n    }catch (error){\r\n      console.error('Error fetching data:', error)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import { render } from \"./Inventory.vue?vue&type=template&id=50eaf771\"\nimport script from \"./Inventory.vue?vue&type=script&lang=js\"\nexport * from \"./Inventory.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <v-container fluid>\r\n    <v-row>\r\n      <v-col cols=\"12\">\r\n        <v-card>\r\n          <v-card-title>\r\n            <h1 class=\"text-h4\">Selling</h1>\r\n          </v-card-title>\r\n          <v-card-text>\r\n            <InventorySearchPanel @change=\"onSelectionChange\" />\r\n            \r\n\r\n            <!-- Quantity Selection - Always show when selectedItem exists -->\r\n            <v-card v-if=\"selectedItem\" class=\"mt-4\" elevation=\"2\">\r\n              <v-card-title>Select Sale Quantity</v-card-title>\r\n              <v-card-text>\r\n                <v-row>\r\n                  <v-col cols=\"12\">\r\n                    <v-radio-group v-model=\"selectedQuantity\" row>\r\n                      <v-radio label=\"1\" :value=\"1\"></v-radio>\r\n                      <v-radio label=\"2\" :value=\"2\"></v-radio>\r\n                      <v-radio label=\"3\" :value=\"3\"></v-radio>\r\n                      <v-radio label=\"4\" :value=\"4\"></v-radio>\r\n                      <v-radio label=\"Custom\" :value=\"customQuantity\"></v-radio>\r\n                    </v-radio-group>\r\n                  </v-col>\r\n                  <v-col cols=\"6\" v-if=\"selectedQuantity === customQuantity\">\r\n                    <v-text-field\r\n                      v-model=\"customQuantityValue\"\r\n                      label=\"Custom Quantity\"\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      :max=\"selectedItem.quantity\"\r\n                      outlined\r\n                    ></v-text-field>\r\n                  </v-col>\r\n                  <v-col cols=\"6\">\r\n                    <div class=\"text-h6\">\r\n                      <strong>Total Price: {{ totalPriceDisplay }}</strong>\r\n                    </div>\r\n                  </v-col>\r\n                </v-row>\r\n              </v-card-text>\r\n            </v-card>\r\n\r\n            <!-- Sell Button - Always show when selectedItem exists -->\r\n            <v-card v-if=\"selectedItem\" class=\"mt-4\" elevation=\"2\">\r\n              <v-card-text>\r\n                <v-btn\r\n                  color=\"primary\"\r\n                  size=\"large\"\r\n                  :disabled=\"!canSell\"\r\n                  :loading=\"isSelling\"\r\n                  @click=\"handleSell\"\r\n                >\r\n                  Checkout\r\n                </v-btn>\r\n                <v-btn\r\n                  class=\"ml-2\"\r\n                  color=\"secondary\"\r\n                  size=\"large\"\r\n                  :disabled=\"!canSell\"\r\n                  :loading=\"isAddingToCart\"\r\n                  @click=\"handleAddToCart\"\r\n                >\r\n                  Add to Cart\r\n                </v-btn>\r\n                <v-alert\r\n                  v-if=\"sellMessage\"\r\n                  :type=\"sellMessageType\"\r\n                  class=\"mt-2\"\r\n                >\r\n                  {{ sellMessage }}\r\n                </v-alert>\r\n              </v-card-text>\r\n            </v-card>\r\n\r\n            <!-- Cart Panel at bottom -->\r\n            <CartPanel\r\n              :items=\"cart.items\"\r\n              :loading=\"isCartProcessing\"\r\n              :estimates=\"priceEstimates\"\r\n              :total-estimate=\"totalEstimate\"\r\n              :message=\"cartMessage\"\r\n              :message-type=\"cartMessageType\"\r\n              @update-qty=\"onCartUpdateQty\"\r\n              @remove-item=\"onCartRemoveItem\"\r\n              @clear=\"onCartClear\"\r\n              @checkout=\"onCartCheckout\"\r\n              @refresh-prices=\"onRefreshEstimates\"\r\n            />\r\n          </v-card-text>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport InventorySearchPanel from '../components/InventorySearchPanel.vue'\r\nimport { fetchPrice, fetchQuantitySum } from '../api/inventory'\r\nimport { createSale } from '../api/sales'\r\nimport CartPanel from '../components/CartPanel.vue'\r\nimport { loadCart, addItem as cartAddItem, updateQuantity as cartUpdateQuantity, removeItem as cartRemoveItem, clearCart as cartClear } from '../lib/cart'\r\nimport { sanitizeStorageValue, getInventoryRecordId, deductInventory } from '../lib/inventoryOps'\r\n\r\nexport default {\r\n  name: 'SellingPage',\r\n  components: { InventorySearchPanel, CartPanel },\r\n  data() {\r\n    return {\r\n      selectedItem: null,\r\n      selectedQuantity: 1,\r\n      customQuantity: 'custom',\r\n      customQuantityValue: 1,\r\n      isSelling: false,\r\n      isAddingToCart: false,\r\n      sellMessage: '',\r\n      sellMessageType: 'success',\r\n      cart: { store: null, items: [] },\r\n      isCartProcessing: false,\r\n      cartMessage: '',\r\n      cartMessageType: 'success',\r\n      priceEstimates: null,\r\n      totalEstimate: null\r\n    }\r\n  },\r\n  created() {\r\n    this.cart = loadCart()\r\n  },\r\n  computed: {\r\n    actualQuantity() {\r\n      if (this.selectedQuantity === this.customQuantity) {\r\n        return parseInt(this.customQuantityValue) || 1\r\n      }\r\n      return this.selectedQuantity\r\n    },\r\n    totalPrice() {\r\n      if (!this.selectedItem || !this.selectedItem.price) return 0\r\n      return this.selectedItem.price * this.actualQuantity\r\n    },\r\n    totalPriceDisplay() {\r\n      if (!this.selectedItem || !this.selectedItem.price) return '$0'\r\n      const price = this.selectedItem.price * this.actualQuantity\r\n      return `$${price.toFixed(2)}`\r\n    },\r\n    canSell() {\r\n      return this.selectedItem && \r\n             this.selectedItem.price && \r\n             this.actualQuantity > 0 && \r\n             this.actualQuantity <= (this.selectedItem.quantity || 0)\r\n    }\r\n  },\r\n  methods: {\r\n    // 生成唯一的订单ID（纯时间戳格式：YYYYMMDDHHMMSSMMM）\r\n    generateOrderId() {\r\n      const now = new Date()\r\n      const year = now.getFullYear()\r\n      const month = String(now.getMonth() + 1).padStart(2, '0')\r\n      const day = String(now.getDate()).padStart(2, '0')\r\n      const hours = String(now.getHours()).padStart(2, '0')\r\n      const minutes = String(now.getMinutes()).padStart(2, '0')\r\n      const seconds = String(now.getSeconds()).padStart(2, '0')\r\n      const milliseconds = String(now.getMilliseconds()).padStart(3, '0')\r\n      \r\n      return `${year}${month}${day}${hours}${minutes}${seconds}${milliseconds}`\r\n    },\r\n    \r\n    async onSelectionChange(payload) {\r\n      console.log('Selection changed', payload)\r\n      \r\n      // Check if we have all required fields (store, product, color)\r\n      if (payload.store && payload.product && payload.color) {\r\n        try {\r\n          // Handle storage field properly - use null instead of empty string for bigint\r\n          const storageValue = sanitizeStorageValue(payload.storage)\r\n          \r\n          // Fetch price and inventory information\r\n          const [price, quantity] = await Promise.all([\r\n            fetchPrice(payload.store, payload.product, payload.color, storageValue),\r\n            fetchQuantitySum(payload.store, payload.product, payload.color, storageValue)\r\n          ])\r\n          \r\n          this.selectedItem = {\r\n            store: payload.store,\r\n            product: payload.product,\r\n            color: payload.color,\r\n            storage: storageValue,\r\n            price: price,\r\n            quantity: quantity\r\n          }\r\n          \r\n          // Reset quantity selection\r\n          this.selectedQuantity = 1\r\n          this.customQuantityValue = 1\r\n          this.sellMessage = ''\r\n        } catch (error) {\r\n          console.error('Error fetching item details:', error)\r\n          this.sellMessage = 'Error fetching product information'\r\n          this.sellMessageType = 'error'\r\n        }\r\n      } else {\r\n        this.selectedItem = null\r\n        this.sellMessage = ''\r\n      }\r\n    },\r\n    handleAddToCart() {\r\n      if (!this.canSell) return\r\n      this.isAddingToCart = true\r\n      this.cartMessage = ''\r\n      try {\r\n        const line = {\r\n          product: this.selectedItem.product,\r\n          color: this.selectedItem.color,\r\n          storage: this.selectedItem.storage,\r\n          quantity: this.actualQuantity\r\n        }\r\n        const { cart: next, error } = cartAddItem(this.cart, this.selectedItem.store, line)\r\n        if (error) {\r\n          this.cartMessage = error\r\n          this.cartMessageType = 'error'\r\n        } else {\r\n          this.cart = next\r\n          this.cartMessage = 'Added to cart'\r\n          this.cartMessageType = 'success'\r\n        }\r\n      } catch (e) {\r\n        this.cartMessage = 'Failed to add to cart'\r\n        this.cartMessageType = 'error'\r\n      } finally {\r\n        this.isAddingToCart = false\r\n      }\r\n    },\r\n    \r\n    async handleSell() {\r\n      if (!this.canSell) return\r\n      \r\n      this.isSelling = true\r\n      this.sellMessage = ''\r\n      \r\n      try {\r\n        // Latest unit price at checkout time\r\n        const latestUnitPrice = await fetchPrice(\r\n          this.selectedItem.store,\r\n          this.selectedItem.product,\r\n          this.selectedItem.color,\r\n          this.selectedItem.storage\r\n        )\r\n        // Get the inventory record ID before deducting\r\n        const inventoryRecordId = await getInventoryRecordId({\r\n          store: this.selectedItem.store,\r\n          product: this.selectedItem.product,\r\n          color: this.selectedItem.color,\r\n          storage: this.selectedItem.storage\r\n        })\r\n        \r\n        // Generate unique order ID for this sale\r\n        const orderId = this.generateOrderId()\r\n        \r\n        // Create sale record with inventory ID\r\n        const saleData = {\r\n          time: new Date().toISOString(),\r\n          id: inventoryRecordId, // Use the same ID as inventory record\r\n          order_id: orderId, // Add unique order ID\r\n          name: this.selectedItem.store.name,\r\n          product: this.selectedItem.product,\r\n          price: (latestUnitPrice || 0) * this.actualQuantity,\r\n          quantity: this.actualQuantity,\r\n          store_location: this.selectedItem.store.location,\r\n          color: this.selectedItem.color,\r\n          storage: sanitizeStorageValue(this.selectedItem.storage),\r\n          unit_price: latestUnitPrice\r\n        }\r\n        \r\n        await createSale(saleData)\r\n        \r\n        // Deduct inventory from the inventory table\r\n        await deductInventory({\r\n          store: this.selectedItem.store,\r\n          product: this.selectedItem.product,\r\n          color: this.selectedItem.color,\r\n          storage: this.selectedItem.storage\r\n        }, this.actualQuantity)\r\n        \r\n        this.sellMessage = `Successfully sold ${this.actualQuantity} items for $${(latestUnitPrice || 0) * this.actualQuantity}`\r\n        this.sellMessageType = 'success'\r\n        \r\n        // Refresh inventory information\r\n        const quantity = await fetchQuantitySum(\r\n          this.selectedItem.store, \r\n          this.selectedItem.product, \r\n          this.selectedItem.color, \r\n          this.selectedItem.storage\r\n        )\r\n        this.selectedItem.quantity = quantity\r\n        \r\n        // Reset quantity selection\r\n        this.selectedQuantity = 1\r\n        this.customQuantityValue = 1\r\n        \r\n      } catch (error) {\r\n        console.error('Error creating sale:', error)\r\n        this.sellMessage = 'Sale failed: ' + error.message\r\n        this.sellMessageType = 'error'\r\n      } finally {\r\n        this.isSelling = false\r\n      }\r\n    },\r\n    onCartUpdateQty({ key, quantity }) {\r\n      this.cart = cartUpdateQuantity(this.cart, key, quantity)\r\n      this.cartMessage = ''\r\n    },\r\n    onCartRemoveItem(key) {\r\n      this.cart = cartRemoveItem(this.cart, key)\r\n      this.cartMessage = ''\r\n    },\r\n    onCartClear() {\r\n      this.cart = cartClear()\r\n      this.cartMessage = ''\r\n      this.priceEstimates = null\r\n      this.totalEstimate = null\r\n    },\r\n    async onCartCheckout() {\r\n      if (!this.cart || this.cart.items.length === 0) return\r\n      this.isCartProcessing = true\r\n      this.cartMessage = ''\r\n      try {\r\n        // 先逐筆驗最新單價與可售數量\r\n        for (const item of this.cart.items) {\r\n          const [qtyAvailable] = await Promise.all([\r\n            fetchQuantitySum(this.cart.store, item.product, item.color, item.storage)\r\n          ])\r\n          if (qtyAvailable < item.quantity) {\r\n            this.cartMessage = `Insufficient inventory for ${item.product} ${item.color} ${item.storage || ''}. Available: ${qtyAvailable}, Required: ${item.quantity}`\r\n            this.cartMessageType = 'error'\r\n            return\r\n          }\r\n        }\r\n\r\n        // Generate unique order ID for the entire cart\r\n        const cartOrderId = this.generateOrderId()\r\n        \r\n        // 逐筆結帳與扣庫存（依你的決策逐筆處理）\r\n        for (const item of this.cart.items) {\r\n          const latestUnitPrice = await fetchPrice(this.cart.store, item.product, item.color, item.storage)\r\n          const inventoryRecordId = await getInventoryRecordId({\r\n            store: this.cart.store,\r\n            product: item.product,\r\n            color: item.color,\r\n            storage: item.storage\r\n          })\r\n          const saleData = {\r\n            time: new Date().toISOString(),\r\n            id: inventoryRecordId,\r\n            order_id: cartOrderId, // Use the same order ID for all items in cart\r\n            name: this.cart.store.name,\r\n            product: item.product,\r\n            price: (latestUnitPrice || 0) * item.quantity,\r\n            quantity: item.quantity,\r\n            store_location: this.cart.store.location,\r\n            color: item.color,\r\n            storage: sanitizeStorageValue(item.storage),\r\n            unit_price: latestUnitPrice\r\n          }\r\n          await createSale(saleData)\r\n          await deductInventory({\r\n            store: this.cart.store,\r\n            product: item.product,\r\n            color: item.color,\r\n            storage: item.storage\r\n          }, item.quantity)\r\n        }\r\n\r\n        this.cart = cartClear()\r\n        this.cartMessage = 'Checkout completed.'\r\n        this.cartMessageType = 'success'\r\n      } catch (e) {\r\n        console.error(e)\r\n        this.cartMessage = `Checkout failed: ${e.message}`\r\n        this.cartMessageType = 'error'\r\n      } finally {\r\n        this.isCartProcessing = false\r\n      }\r\n    },\r\n    async onRefreshEstimates() {\r\n      if (!this.cart || this.cart.items.length === 0 || !this.cart.store) {\r\n        this.priceEstimates = null\r\n        this.totalEstimate = null\r\n        return\r\n      }\r\n      this.isCartProcessing = true\r\n      try {\r\n        const estimates = {}\r\n        let total = 0\r\n        for (const item of this.cart.items) {\r\n          const unit = await fetchPrice(this.cart.store, item.product, item.color, item.storage)\r\n          estimates[item.key] = unit\r\n          total += (Number(unit) || 0) * (Number(item.quantity) || 0)\r\n        }\r\n        this.priceEstimates = estimates\r\n        this.totalEstimate = total\r\n      } catch (e) {\r\n        console.error(e)\r\n        this.cartMessage = 'Failed to refresh prices'\r\n        this.cartMessageType = 'error'\r\n      } finally {\r\n        this.isCartProcessing = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","<template>\r\n  <v-card>\r\n    <v-card-text>\r\n      <v-expansion-panels v-model=\"activePanel\" variant=\"accordion\" class=\"mb-4\">\r\n        <v-expansion-panel>\r\n          <v-expansion-panel-title>Product</v-expansion-panel-title>\r\n          <v-expansion-panel-text>\r\n            <ProductSelector v-model=\"selectedProduct\" />\r\n          </v-expansion-panel-text>\r\n        </v-expansion-panel>\r\n\r\n        <v-expansion-panel v-if=\"!!selectedProduct\">\r\n          <v-expansion-panel-title>Color</v-expansion-panel-title>\r\n          <v-expansion-panel-text>\r\n            <ColorSelector :product=\"selectedProduct\" v-model=\"selectedColor\" />\r\n          </v-expansion-panel-text>\r\n        </v-expansion-panel>\r\n\r\n        <v-expansion-panel v-if=\"!!selectedColor\">\r\n          <v-expansion-panel-title>Storage</v-expansion-panel-title>\r\n          <v-expansion-panel-text>\r\n            <StorageSelector\r\n              :product=\"selectedProduct\"\r\n              :color=\"selectedColor\"\r\n              v-model=\"selectedStorage\"\r\n              @options=\"onStorageOptions\"\r\n            />\r\n          </v-expansion-panel-text>\r\n        </v-expansion-panel>\r\n\r\n        <v-expansion-panel v-if=\"!!selectedColor\">\r\n          <v-expansion-panel-title>Store</v-expansion-panel-title>\r\n          <v-expansion-panel-text>\r\n            <StoreSelector\r\n              v-model=\"selectedStore\"\r\n              :product=\"selectedProduct\"\r\n              :color=\"selectedColor\"\r\n              :storage=\"selectedStorage\"\r\n            />\r\n          </v-expansion-panel-text>\r\n        </v-expansion-panel>\r\n      </v-expansion-panels>\r\n\r\n      <v-row class=\"mt-2\">\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-alert v-if=\"error\" type=\"error\" density=\"comfortable\">{{ error }}</v-alert>\r\n          <v-skeleton-loader v-else-if=\"loading\" type=\"text\" />\r\n          <div v-else class=\"text-subtitle-1\">\r\n            <span v-if=\"selectedStore\">Quantity:</span>\r\n            <span v-if=\"selectedStore\" class=\"font-weight-bold ml-1\">{{ quantityDisplay }}</span>\r\n            <span v-if=\"selectedStore && selectedStorage\" class=\"ml-4\">Storage:</span>\r\n            <span v-if=\"selectedStore && selectedStorage\" class=\"font-weight-bold ml-1\">{{ selectedStorage }}GB</span>\r\n            <span v-if=\"selectedStore && price !== null && price !== undefined\" class=\"ml-4\">Price:</span>\r\n            <span v-if=\"selectedStore && price !== null && price !== undefined\" class=\"font-weight-bold ml-1\">${{ price }}</span>\r\n          </div>\r\n        </v-col>\r\n      </v-row>\r\n    </v-card-text>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport StoreSelector from './StoreSelector.vue'\r\nimport ProductSelector from './ProductSelector.vue'\r\nimport ColorSelector from './ColorSelector.vue'\r\nimport StorageSelector from './StorageSelector.vue'\r\nimport { fetchQuantitySum, fetchPrice } from '../api/inventory'\r\n\r\nexport default {\r\n  name: 'InventorySearchPanel',\r\n  components: { StoreSelector, ProductSelector, ColorSelector, StorageSelector },\r\n  emits: ['change'],\r\n  data() {\r\n    return {\r\n      selectedStore: null,\r\n      selectedProduct: '',\r\n      selectedColor: '',\r\n      selectedStorage: '',\r\n      loading: false,\r\n      error: '',\r\n      quantity: null,\r\n      price: null,\r\n      storageOptionsCount: 0,\r\n      activePanel: 0\r\n    }\r\n  },\r\n  computed: {\r\n    quantityDisplay() {\r\n      return this.quantity === null ? '-' : this.quantity\r\n    },\r\n    hasStoreProductColor() {\r\n      return !!this.selectedStore && !!this.selectedProduct && !!this.selectedColor\r\n    }\r\n  },\r\n  watch: {\r\n    selectedProduct() { this.resetAfterProduct(); this.emitSelection(); this.activePanel = 1 },\r\n    selectedColor() { this.resetAfterColor(); this.emitSelection(); this.activePanel = 2 },\r\n    selectedStorage() { this.emitSelection(); this.activePanel = 3 },\r\n    selectedStore() { this.triggerQuery(); this.activePanel = 3 }\r\n  },\r\n  methods: {\r\n    onStorageOptions(count) {\r\n      this.storageOptionsCount = count\r\n    },\r\n    resetAfterProduct() {\r\n      this.selectedColor = ''\r\n      this.selectedStorage = ''\r\n      this.selectedStore = null\r\n      this.storageOptionsCount = 0\r\n      this.quantity = null\r\n      this.price = null\r\n    },\r\n    resetAfterColor() {\r\n      this.selectedStorage = ''\r\n      this.selectedStore = null\r\n      this.storageOptionsCount = 0\r\n      this.quantity = null\r\n      this.price = null\r\n    },\r\n    emitSelection() {\r\n      this.$emit('change', {\r\n        store: this.selectedStore,\r\n        product: this.selectedProduct,\r\n        color: this.selectedColor,\r\n        storage: this.selectedStorage\r\n      })\r\n    },\r\n    async triggerQuery() {\r\n      this.emitSelection()\r\n\r\n      if (!this.selectedStore || !this.selectedProduct || !this.selectedColor) {\r\n        this.quantity = null\r\n        this.price = null\r\n        return\r\n      }\r\n\r\n      this.loading = true\r\n      this.error = ''\r\n      try {\r\n        const [qty, price] = await Promise.all([\r\n          fetchQuantitySum(this.selectedStore, this.selectedProduct, this.selectedColor, this.selectedStorage),\r\n          fetchPrice(this.selectedStore, this.selectedProduct, this.selectedColor, this.selectedStorage)\r\n        ])\r\n        this.quantity = qty\r\n        this.price = price\r\n      } catch (err) {\r\n        this.error = 'Failed to load data'\r\n        // eslint-disable-next-line no-console\r\n        console.error(err)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n\r\n","<template>\r\n  <v-autocomplete\r\n    :items=\"storeItems\"\r\n    :loading=\"loading\"\r\n    :model-value=\"modelValue\"\r\n    item-title=\"label\"\r\n    item-value=\"value\"\r\n    label=\"Store\"\r\n    placeholder=\"Select a store\"\r\n    clearable\r\n    @update:model-value=\"onUpdate\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { fetchDistinctStores, fetchStoresByProductColorStorage } from '../api/inventory'\r\n\r\nexport default {\r\n  name: 'StoreSelector',\r\n  props: {\r\n    modelValue: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    product: { type: String, default: '' },\r\n    color: { type: String, default: '' },\r\n    storage: { type: [String, Number], default: '' }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      storeItems: []\r\n    }\r\n  },\r\n  methods: {\r\n    onUpdate(val) {\r\n      this.$emit('update:modelValue', val)\r\n    },\r\n    async loadStores() {\r\n      this.loading = true\r\n      try {\r\n        const allStores = await fetchDistinctStores()\r\n\r\n        // Build a quick lookup for selection-supported stores (present rows) and availability by quantity\r\n        let presenceMap = new Map()\r\n        if (this.product && this.color) {\r\n          const storesForSelection = await fetchStoresByProductColorStorage(this.product, this.color, this.storage)\r\n          for (const s of storesForSelection) {\r\n            const key = `${String(s.name).trim().replace(/\\s+/g, ' ').toLowerCase()}__${String(s.location).trim().replace(/\\s+/g, ' ').toLowerCase()}`\r\n            presenceMap.set(key, { hasProduct: true, available: s.available })\r\n          }\r\n        }\r\n\r\n        const normalizeKey = (n, l) => `${String(n).trim().replace(/\\s+/g, ' ').toLowerCase()}__${String(l).trim().replace(/\\s+/g, ' ').toLowerCase()}`\r\n        const storeMap = new Map()\r\n        \r\n        // Process each store and ensure no duplicates\r\n        for (const s of allStores) {\r\n          const key = normalizeKey(s.name, s.location)\r\n          \r\n          // Skip if we already processed this store\r\n          if (storeMap.has(key)) {\r\n            continue\r\n          }\r\n          \r\n          const presence = presenceMap.get(key)\r\n          const hasProduct = presence?.hasProduct === true\r\n          const hasInventory = presence?.available === true\r\n          const cleanName = String(s.name).trim().replace(/\\s+/g, ' ')\r\n          const cleanLocation = String(s.location).trim().replace(/\\s+/g, ' ')\r\n          \r\n          let label = `${cleanName} — ${cleanLocation}`\r\n          if (this.product && this.color) {\r\n            if (!hasProduct) {\r\n              label = `(not available) ${label}`\r\n            } else if (!hasInventory) {\r\n              label = `(no available) ${label}`\r\n            }\r\n          }\r\n          \r\n          const value = { name: cleanName, location: cleanLocation }\r\n          const item = {\r\n            label,\r\n            value,\r\n            disabled: this.product && this.color ? !hasProduct : false\r\n          }\r\n          \r\n          storeMap.set(key, item)\r\n        }\r\n        \r\n        this.storeItems = Array.from(storeMap.values())\r\n      } catch (err) {\r\n        // eslint-disable-next-line no-console\r\n        console.error('Failed to load stores', err)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadStores()\r\n  },\r\n  watch: {\r\n    product() { this.loadStores() },\r\n    color() { this.loadStores() },\r\n    storage() { this.loadStores() }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n\r\n","import supabase from '../lib/supabase'\r\n\r\nconst TABLE_NAME = 'inventory'\r\n\r\nexport async function fetchDistinctStores() {\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('name, location')\r\n    .not('name', 'is', null)\r\n    .not('location', 'is', null)\r\n\r\n  if (error) throw error\r\n\r\n  const seen = new Set()\r\n  const stores = []\r\n  const collapse = s => String(s).trim().replace(/\\s+/g, ' ')\r\n  for (const row of data) {\r\n    const name = collapse(row.name)\r\n    const location = collapse(row.location)\r\n    const key = `${name.toLowerCase()}__${location.toLowerCase()}`\r\n    if (!seen.has(key)) {\r\n      seen.add(key)\r\n      stores.push({\r\n        name,\r\n        location,\r\n        label: `${name} — ${location}`\r\n      })\r\n    }\r\n  }\r\n  return stores.sort((a, b) => a.label.localeCompare(b.label))\r\n}\r\n\r\n// New: fetch distinct products across all stores\r\nexport async function fetchDistinctProducts() {\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('product')\r\n    .not('product', 'is', null)\r\n\r\n  if (error) throw error\r\n\r\n  const set = new Set((data || []).map(r => String(r.product).trim().toLowerCase()))\r\n  return Array.from(set).sort()\r\n}\r\n\r\n// New: fetch distinct colors across all stores for a given product\r\nexport async function fetchColorsByProduct(product) {\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('color')\r\n    .ilike('product', product)\r\n    .not('color', 'is', null)\r\n\r\n  if (error) throw error\r\n\r\n  const set = new Set((data || []).map(r => String(r.color).trim().toLowerCase()))\r\n  return Array.from(set).sort()\r\n}\r\n\r\n// New: fetch distinct storages across all stores for a given product+color\r\nexport async function fetchStoragesByProductColor(product, color) {\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('storage')\r\n    .ilike('product', product)\r\n    .ilike('color', color)\r\n    .not('storage', 'is', null)\r\n\r\n  if (error) throw error\r\n\r\n  const set = new Set((data || []).map(r => String(r.storage).trim()))\r\n  return Array.from(set).sort((a, b) => Number(a) - Number(b))\r\n}\r\n\r\n// New: fetch stores for a given product/color/storage with availability flag\r\nexport async function fetchStoresByProductColorStorage(product, color, storage) {\r\n  let query = supabase\r\n    .from(TABLE_NAME)\r\n    .select('name, location, quantity')\r\n    .ilike('product', product)\r\n    .ilike('color', color)\r\n\r\n  if (storage !== undefined && storage !== null && storage !== '') {\r\n    const storageNumber = Number(storage)\r\n    query = Number.isNaN(storageNumber)\r\n      ? query.eq('storage', String(storage))\r\n      : query.eq('storage', storageNumber)\r\n  } else {\r\n    query = query.or('storage.is.null,storage.eq.0')\r\n  }\r\n\r\n  const { data, error } = await query\r\n\r\n  if (error) throw error\r\n\r\n  const collapse = s => String(s).trim().replace(/\\s+/g, ' ')\r\n  const aggregate = new Map()\r\n  for (const row of data || []) {\r\n    const name = collapse(row.name)\r\n    const location = collapse(row.location)\r\n    const key = `${name.toLowerCase()}__${location.toLowerCase()}`\r\n    const prev = aggregate.get(key) || 0\r\n    const n = Number(row.quantity)\r\n    aggregate.set(key, prev + (Number.isNaN(n) ? 0 : n))\r\n  }\r\n\r\n  const results = []\r\n  for (const [key, total] of aggregate.entries()) {\r\n    const [nameLower, locationLower] = key.split('__')\r\n    // We need to restore the original case by finding it from the original data\r\n    const originalRow = data.find(row => \r\n      collapse(row.name).toLowerCase() === nameLower && \r\n      collapse(row.location).toLowerCase() === locationLower\r\n    )\r\n    const name = originalRow ? collapse(originalRow.name) : nameLower\r\n    const location = originalRow ? collapse(originalRow.location) : locationLower\r\n    const available = total > 0\r\n    const baseLabel = `${name} — ${location}`\r\n    const label = available ? baseLabel : `(no available) ${baseLabel}`\r\n    results.push({ name, location, label, available })\r\n  }\r\n  return results.sort((a, b) => a.label.localeCompare(b.label))\r\n}\r\n\r\nexport async function fetchProductsByStore(store) {\r\n  const { name, location } = store\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('product')\r\n    .eq('name', name)\r\n    .eq('location', location)\r\n    .not('product', 'is', null)\r\n\r\n  if (error) throw error\r\n\r\n  const set = new Set(data.map(r => String(r.product).trim().toLowerCase()))\r\n  return Array.from(set).sort()\r\n}\r\n\r\nexport async function fetchColorsByStoreAndProduct(store, product) {\r\n  const { name, location } = store\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('color')\r\n    .eq('name', name)\r\n    .eq('location', location)\r\n    .ilike('product', product)\r\n    .not('color', 'is', null)\r\n\r\n  if (error) throw error\r\n\r\n  const set = new Set(data.map(r => String(r.color).trim().toLowerCase()))\r\n  return Array.from(set).sort()\r\n}\r\n\r\nexport async function fetchStoragesByStoreProductColor(store, product, color) {\r\n  const { name, location } = store\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('storage')\r\n    .eq('name', name)\r\n    .eq('location', location)\r\n    .ilike('product', product)\r\n    .ilike('color', color)\r\n    .not('storage', 'is', null)\r\n\r\n  if (error) throw error\r\n\r\n  const set = new Set(\r\n    (data || []).map(r => String(r.storage).trim())\r\n  )\r\n  // sort numeric ascending when possible\r\n  return Array.from(set).sort((a, b) => Number(a) - Number(b))\r\n}\r\n\r\nexport async function fetchQuantitySum(store, product, color, storage) {\r\n  const { name, location } = store\r\n  let query = supabase\r\n    .from(TABLE_NAME)\r\n    .select('quantity')\r\n    .eq('name', name)\r\n    .eq('location', location)\r\n    .ilike('product', product)\r\n    .ilike('color', color)\r\n\r\n  if (storage !== undefined && storage !== null && storage !== '') {\r\n    const storageNumber = Number(storage)\r\n    query = Number.isNaN(storageNumber)\r\n      ? query.eq('storage', String(storage))\r\n      : query.eq('storage', storageNumber)\r\n  } else {\r\n    // If no storage specified, match records where storage is null or 0\r\n    query = query.or('storage.is.null,storage.eq.0')\r\n  }\r\n\r\n  const { data, error } = await query\r\n\r\n  if (error) throw error\r\n\r\n  let total = 0\r\n  for (const row of data || []) {\r\n    const n = Number(row.quantity)\r\n    if (!Number.isNaN(n)) total += n\r\n  }\r\n  return total\r\n}\r\n\r\nexport async function fetchPrice(store, product, color, storage) {\r\n  const { name, location } = store\r\n  let query = supabase\r\n    .from(TABLE_NAME)\r\n    .select('price')\r\n    .eq('name', name)\r\n    .eq('location', location)\r\n    .ilike('product', product)\r\n    .ilike('color', color)\r\n\r\n  if (storage !== undefined && storage !== null && storage !== '') {\r\n    const storageNumber = Number(storage)\r\n    query = Number.isNaN(storageNumber)\r\n      ? query.eq('storage', String(storage))\r\n      : query.eq('storage', storageNumber)\r\n  } else {\r\n    // If no storage specified, match records where storage is null or 0\r\n    query = query.or('storage.is.null,storage.eq.0')\r\n  }\r\n\r\n  const { data, error } = await query\r\n\r\n  if (error) throw error\r\n\r\n  // 返回第一個找到的價格，如果沒有則返回 null\r\n  if (data && data.length > 0) {\r\n    return data[0].price\r\n  }\r\n  return null\r\n}\r\n\r\nexport default {\r\n  fetchDistinctStores,\r\n  fetchDistinctProducts,\r\n  fetchColorsByProduct,\r\n  fetchStoragesByProductColor,\r\n  fetchStoresByProductColorStorage,\r\n  fetchProductsByStore,\r\n  fetchColorsByStoreAndProduct,\r\n  fetchStoragesByStoreProductColor,\r\n  fetchQuantitySum,\r\n  fetchPrice\r\n}\r\n\r\n\r\n","import { render } from \"./StoreSelector.vue?vue&type=template&id=1407a53e\"\nimport script from \"./StoreSelector.vue?vue&type=script&lang=js\"\nexport * from \"./StoreSelector.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <v-autocomplete\r\n    :disabled=\"false\"\r\n    :items=\"items\"\r\n    :loading=\"loading\"\r\n    :model-value=\"modelValue\"\r\n    label=\"Product\"\r\n    placeholder=\"Select a product\"\r\n    clearable\r\n    @update:model-value=\"$emit('update:modelValue', $event)\"\r\n  />\r\n  \r\n</template>\r\n\r\n<script>\r\nimport { fetchDistinctProducts } from '../api/inventory'\r\n\r\nexport default {\r\n  name: 'ProductSelector',\r\n  props: {\r\n    modelValue: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    store: { // kept for compatibility, unused in new flow\r\n      type: Object,\r\n      default: null\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      items: []\r\n    }\r\n  },\r\n  watch: {\r\n    modelValue() {},\r\n  },\r\n  mounted() {\r\n    this.load()\r\n  },\r\n  methods: {\r\n    async load() {\r\n      this.loading = true\r\n      try {\r\n        const products = await fetchDistinctProducts()\r\n        this.items = products.length > 0 ? products : ['(not available)']\r\n      } catch (err) {\r\n        // eslint-disable-next-line no-console\r\n        console.error('Failed to load products', err)\r\n        this.items = ['(not available)']\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n\r\n","import { render } from \"./ProductSelector.vue?vue&type=template&id=b76fc30a\"\nimport script from \"./ProductSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ProductSelector.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <v-autocomplete\r\n    :disabled=\"!product\"\r\n    :items=\"items\"\r\n    :loading=\"loading\"\r\n    :model-value=\"modelValue\"\r\n    label=\"Color\"\r\n    placeholder=\"Select a color\"\r\n    clearable\r\n    @update:model-value=\"$emit('update:modelValue', $event)\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { fetchColorsByProduct } from '../api/inventory'\r\n\r\nexport default {\r\n  name: 'ColorSelector',\r\n  props: {\r\n    modelValue: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    store: { // kept for compatibility, unused in new flow\r\n      type: Object,\r\n      default: null\r\n    },\r\n    product: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      items: []\r\n    }\r\n  },\r\n  watch: {\r\n    product: {\r\n      handler() { this.load() },\r\n      immediate: true\r\n    }\r\n  },\r\n  methods: {\r\n    async load() {\r\n      if (!this.product) {\r\n        this.items = []\r\n        return\r\n      }\r\n      this.loading = true\r\n      try {\r\n        const colors = await fetchColorsByProduct(this.product)\r\n        this.items = (colors && colors.length) ? colors : ['(not available)']\r\n      } catch (err) {\r\n        // eslint-disable-next-line no-console\r\n        console.error('Failed to load colors', err)\r\n        this.items = ['(not available)']\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n\r\n","import { render } from \"./ColorSelector.vue?vue&type=template&id=0ecbbb45\"\nimport script from \"./ColorSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ColorSelector.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <v-autocomplete\r\n    :disabled=\"!product || !color\"\r\n    :items=\"displayItems\"\r\n    :loading=\"loading\"\r\n    :model-value=\"modelValue\"\r\n    item-title=\"label\"\r\n    item-value=\"value\"\r\n    label=\"Storage\"\r\n    placeholder=\"Select storage\"\r\n    clearable\r\n    @update:model-value=\"$emit('update:modelValue', $event)\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { fetchStoragesByProductColor } from '../api/inventory'\r\n\r\nexport default {\r\n  name: 'StorageSelector',\r\n  props: {\r\n    modelValue: {\r\n      type: [String, Number],\r\n      default: ''\r\n    },\r\n    store: { type: Object, default: null }, // kept for compatibility, unused in new flow\r\n    product: { type: String, default: '' },\r\n    color: { type: String, default: '' }\r\n  },\r\n  emits: ['update:modelValue', 'options'],\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      items: []\r\n    }\r\n  },\r\n  computed: {\r\n    displayItems() {\r\n      return this.items.map(v => (\r\n        v === '(not available)'\r\n          ? { label: '(not available)', value: '' }\r\n          : { label: `${v}GB`, value: v }\r\n      ))\r\n    }\r\n  },\r\n  watch: {\r\n    product: { handler() { this.load() }, immediate: true },\r\n    color() { this.load() }\r\n  },\r\n  methods: {\r\n    async load() {\r\n      if (!this.product || !this.color) {\r\n        this.items = []\r\n        this.$emit('options', 0)\r\n        return\r\n      }\r\n      this.loading = true\r\n      try {\r\n        const storages = await fetchStoragesByProductColor(this.product, this.color)\r\n        this.items = (storages && storages.length) ? storages : ['(not available)']\r\n        this.$emit('options', this.items.length)\r\n        if (this.items.length === 0) {\r\n          // 清空已选存储，避免卡住查询\r\n          this.$emit('update:modelValue', '')\r\n        }\r\n      } catch (err) {\r\n        // eslint-disable-next-line no-console\r\n        console.error('Failed to load storages', err)\r\n        this.items = ['(not available)']\r\n        this.$emit('options', 1)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n\r\n","import { render } from \"./StorageSelector.vue?vue&type=template&id=1fcb3a55\"\nimport script from \"./StorageSelector.vue?vue&type=script&lang=js\"\nexport * from \"./StorageSelector.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./InventorySearchPanel.vue?vue&type=template&id=113d676d\"\nimport script from \"./InventorySearchPanel.vue?vue&type=script&lang=js\"\nexport * from \"./InventorySearchPanel.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <v-card class=\"mt-4\" elevation=\"2\">\r\n    <v-card-title>\r\n      Cart\r\n      <v-spacer />\r\n      <v-btn class=\"mr-2\" color=\"primary\" variant=\"text\" :disabled=\"items.length === 0 || loading\" @click=\"$emit('refresh-prices')\">Refresh Prices</v-btn>\r\n      <v-btn color=\"error\" variant=\"text\" :disabled=\"items.length === 0\" @click=\"$emit('clear')\">Clear</v-btn>\r\n    </v-card-title>\r\n    <v-card-text>\r\n      <div v-if=\"items.length === 0\" class=\"text-body-2\">Cart is empty</div>\r\n      <v-table v-else density=\"comfortable\">\r\n        <thead>\r\n          <tr>\r\n            <th class=\"text-left\">Product</th>\r\n            <th class=\"text-left\">Color</th>\r\n            <th class=\"text-left\">Storage</th>\r\n            <th class=\"text-left\" v-if=\"hasEstimates\">Unit Price</th>\r\n            <th class=\"text-left\" v-if=\"hasEstimates\">Subtotal</th>\r\n            <th class=\"text-left\" style=\"width: 140px;\">Qty</th>\r\n            <th class=\"text-left\" style=\"width: 80px;\"></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"item in items\" :key=\"item.key\">\r\n            <td>{{ item.product }}</td>\r\n            <td>{{ item.color }}</td>\r\n            <td>{{ item.storage || '-' }}</td>\r\n            <td v-if=\"hasEstimates\">{{ displayUnitPrice(item.key) }}</td>\r\n            <td v-if=\"hasEstimates\">{{ displaySubtotal(item.key, item.quantity) }}</td>\r\n            <td>\r\n              <v-text-field\r\n                type=\"number\"\r\n                min=\"1\"\r\n                density=\"compact\"\r\n                variant=\"outlined\"\r\n                hide-details\r\n                :model-value=\"item.quantity\"\r\n                @update:model-value=\"v => onUpdateQty(item.key, v)\"\r\n              />\r\n            </td>\r\n            <td>\r\n              <v-btn color=\"error\" variant=\"text\" icon=\"mdi-delete\" @click=\"$emit('remove-item', item.key)\" />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </v-table>\r\n      <div class=\"mt-4 d-flex align-center\">\r\n        <div class=\"text-body-2 mr-2\">\r\n          Prices are estimated and finalized at checkout\r\n          <span v-if=\"hasEstimates && totalEstimate !== null\"> — Estimated Total: {{ displayCurrency(totalEstimate) }}</span>\r\n        </div>\r\n        <v-spacer />\r\n        <v-btn color=\"primary\" :disabled=\"items.length === 0 || loading\" :loading=\"loading\" @click=\"$emit('checkout')\">Checkout Cart</v-btn>\r\n      </div>\r\n      <v-alert v-if=\"message\" :type=\"messageType\" class=\"mt-3\">{{ message }}</v-alert>\r\n    </v-card-text>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'CartPanel',\r\n  props: {\r\n    items: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    estimates: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    totalEstimate: {\r\n      type: Number,\r\n      default: null\r\n    },\r\n    message: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    messageType: {\r\n      type: String,\r\n      default: 'success'\r\n    }\r\n  },\r\n  emits: ['update-qty', 'remove-item', 'clear', 'checkout', 'refresh-prices'],\r\n  computed: {\r\n    hasEstimates() {\r\n      return !!this.estimates\r\n    }\r\n  },\r\n  methods: {\r\n    onUpdateQty(key, value) {\r\n      const n = parseInt(value, 10)\r\n      this.$emit('update-qty', { key, quantity: Number.isNaN(n) ? 1 : n })\r\n    },\r\n    displayCurrency(n) {\r\n      const num = Number(n) || 0\r\n      return `$${num.toFixed(2)}`\r\n    },\r\n    displayUnitPrice(key) {\r\n      if (!this.estimates || this.estimates[key] === undefined || this.estimates[key] === null) return '-'\r\n      return this.displayCurrency(this.estimates[key])\r\n    },\r\n    displaySubtotal(key, qty) {\r\n      if (!this.estimates || this.estimates[key] === undefined || this.estimates[key] === null) return '-'\r\n      const unit = Number(this.estimates[key]) || 0\r\n      const q = Number(qty) || 0\r\n      return this.displayCurrency(unit * q)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n\r\n","import { render } from \"./CartPanel.vue?vue&type=template&id=2bbf603c\"\nimport script from \"./CartPanel.vue?vue&type=script&lang=js\"\nexport * from \"./CartPanel.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// 購物車持久化與操作工具\r\n\r\nconst CART_STORAGE_KEY = 'app_cart'\r\n\r\nfunction normalizeStorageKey(storage) {\r\n  if (storage === undefined || storage === null || storage === '') return 'NULL'\r\n  return String(storage)\r\n}\r\n\r\nexport function loadCart() {\r\n  try {\r\n    const raw = localStorage.getItem(CART_STORAGE_KEY)\r\n    if (!raw) return { store: null, items: [] }\r\n    const parsed = JSON.parse(raw)\r\n    if (!parsed || typeof parsed !== 'object') return { store: null, items: [] }\r\n    return { store: parsed.store || null, items: Array.isArray(parsed.items) ? parsed.items : [] }\r\n  } catch (e) {\r\n    return { store: null, items: [] }\r\n  }\r\n}\r\n\r\nexport function saveCart(cart) {\r\n  localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart))\r\n}\r\n\r\nexport function clearCart() {\r\n  const empty = { store: null, items: [] }\r\n  saveCart(empty)\r\n  return empty\r\n}\r\n\r\nexport function getCartStore(cart) {\r\n  return cart && cart.store ? cart.store : null\r\n}\r\n\r\nexport function addItem(cart, store, line) {\r\n  // 同店限制\r\n  if (cart.items.length > 0) {\r\n    const { name, location } = cart.store || {}\r\n    if (!store || store.name !== name || store.location !== location) {\r\n      return { cart, error: 'Cart only allows items from the same store.' }\r\n    }\r\n  }\r\n\r\n  const storageKey = normalizeStorageKey(line.storage)\r\n  const key = `${String(line.product).toLowerCase()}|${String(line.color).toLowerCase()}|${storageKey}`\r\n\r\n  const next = { store: cart.items.length === 0 ? store : cart.store, items: [...cart.items] }\r\n\r\n  const idx = next.items.findIndex(i => i.key === key)\r\n  if (idx >= 0) {\r\n    const existing = next.items[idx]\r\n    next.items.splice(idx, 1, { ...existing, quantity: Number(existing.quantity) + Number(line.quantity) })\r\n  } else {\r\n    next.items.push({\r\n      key,\r\n      product: line.product,\r\n      color: line.color,\r\n      storage: line.storage,\r\n      quantity: Number(line.quantity)\r\n    })\r\n  }\r\n\r\n  saveCart(next)\r\n  return { cart: next }\r\n}\r\n\r\nexport function updateQuantity(cart, lineKey, quantity) {\r\n  const qty = Math.max(0, Number(quantity) || 0)\r\n  const next = { store: cart.store, items: cart.items.map(i => (i.key === lineKey ? { ...i, quantity: qty } : i)) }\r\n  // 移除 0 量\r\n  const filtered = { store: next.store, items: next.items.filter(i => i.quantity > 0) }\r\n  if (filtered.items.length === 0) filtered.store = null\r\n  saveCart(filtered)\r\n  return filtered\r\n}\r\n\r\nexport function removeItem(cart, lineKey) {\r\n  const next = { store: cart.store, items: cart.items.filter(i => i.key !== lineKey) }\r\n  if (next.items.length === 0) next.store = null\r\n  saveCart(next)\r\n  return next\r\n}\r\n\r\nexport default {\r\n  loadCart,\r\n  saveCart,\r\n  clearCart,\r\n  getCartStore,\r\n  addItem,\r\n  updateQuantity,\r\n  removeItem\r\n}\r\n\r\n\r\n","import supabase from './supabase'\n\nexport function sanitizeStorageValue(storage) {\n  if (storage === '' || storage === null || storage === undefined) {\n    return null\n  }\n  return storage\n}\n\nexport async function getInventoryRecordId({ store, product, color, storage }) {\n  const { name, location } = store\n  let query = supabase\n    .from('inventory')\n    .select('id')\n    .eq('name', name)\n    .eq('location', location)\n    .ilike('product', product)\n    .ilike('color', color)\n\n  const sanitizedStorage = sanitizeStorageValue(storage)\n  if (sanitizedStorage !== null) {\n    const storageNumber = Number(sanitizedStorage)\n    query = Number.isNaN(storageNumber)\n      ? query.eq('storage', String(sanitizedStorage))\n      : query.eq('storage', storageNumber)\n  } else {\n    query = query.or('storage.is.null,storage.eq.0')\n  }\n\n  const { data, error } = await query\n  if (error) throw error\n  if (!data || data.length === 0) {\n    throw new Error(`No inventory record found for ${product} ${color} ${storage ? storage + 'GB' : 'no storage'}`)\n  }\n  return data[0].id\n}\n\nexport async function deductInventory({ store, product, color, storage }, quantity) {\n  const { name, location } = store\n  let query = supabase\n    .from('inventory')\n    .select('*')\n    .eq('name', name)\n    .eq('location', location)\n    .ilike('product', product)\n    .ilike('color', color)\n\n  const sanitizedStorage = sanitizeStorageValue(storage)\n  if (sanitizedStorage !== null) {\n    const storageNumber = Number(sanitizedStorage)\n    query = Number.isNaN(storageNumber)\n      ? query.eq('storage', String(sanitizedStorage))\n      : query.eq('storage', storageNumber)\n  } else {\n    query = query.or('storage.is.null,storage.eq.0')\n  }\n\n  const { data: records, error: fetchError } = await query\n  if (fetchError) throw fetchError\n  if (!records || records.length === 0) {\n    throw new Error(`No inventory records found for ${product} ${color} ${storage ? storage + 'GB' : 'no storage'}`)\n  }\n\n  let totalAvailable = 0\n  for (const record of records) {\n    totalAvailable += Number(record.quantity) || 0\n  }\n  if (totalAvailable < quantity) {\n    throw new Error(`Insufficient inventory. Available: ${totalAvailable}, Required: ${quantity}`)\n  }\n\n  let remaining = quantity\n  for (const record of records) {\n    if (remaining <= 0) break\n    const currentQuantity = Number(record.quantity) || 0\n    const deduct = Math.min(remaining, currentQuantity)\n    if (deduct > 0) {\n      const newQuantity = currentQuantity - deduct\n      const { error: updateError } = await supabase\n        .from('inventory')\n        .update({ quantity: newQuantity })\n        .eq('id', record.id)\n        .eq('name', record.name)\n        .eq('location', record.location)\n      if (updateError) throw updateError\n      remaining -= deduct\n    }\n  }\n\n  if (remaining > 0) {\n    throw new Error('Insufficient inventory to complete the sale')\n  }\n}\n\nexport default {\n  sanitizeStorageValue,\n  getInventoryRecordId,\n  deductInventory\n}\n\n\n","import { render } from \"./Selling.vue?vue&type=template&id=ce640784\"\nimport script from \"./Selling.vue?vue&type=script&lang=js\"\nexport * from \"./Selling.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createRouter, createWebHistory } from 'vue-router'\r\nimport SalesRecord from '../views/SalesRecord.vue'\r\nimport Inventory from '../views/Inventory.vue'\r\nimport Selling from '../views/Selling.vue'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    redirect: '/selling'\r\n  },\r\n  {\r\n    path: '/sales-record',\r\n    name: 'SalesRecord',\r\n    component: SalesRecord\r\n  },\r\n  {\r\n    path: '/inventory',\r\n    name: 'Inventory',\r\n    component: Inventory\r\n  },\r\n  {\r\n    path: '/selling',\r\n    name: 'Selling',\r\n    component: Selling\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(),\r\n  routes\r\n})\r\n\r\nexport default router\r\n","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport { createVuetify } from 'vuetify'\r\nimport 'vuetify/styles'\r\nimport '@mdi/font/css/materialdesignicons.css'\r\nimport * as components from 'vuetify/components'\r\nimport * as directives from 'vuetify/directives'\r\nimport router from './router'\r\n\r\nconst vuetify = createVuetify({\r\n  components,\r\n  directives,\r\n})\r\n\r\nconst app = createApp(App)\r\n\r\napp.use(vuetify)\r\napp.use(router)\r\n\r\napp.mount('#app')\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkinventory_management_system\"] = self[\"webpackChunkinventory_management_system\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(5756); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createBlock","_component_v_app","_createVNode","_component_v_app_bar","color","dark","prominent","_component_v_toolbar_title","_cache","_component_v_spacer","_component_v_btn","to","name","variant","class","_component_v_icon","left","icon","_component_v_main","_component_router_view","__exports__","render","_component_v_container","fluid","_component_v_row","_component_v_col","cols","_component_v_card","_component_v_card_title","size","_createElementVNode","onClick","$options","refreshData","loading","$data","isRefreshing","_component_v_card_text","_component_SalesRecordFilters","onFiltersChange","onError","onFilterError","_component_SalesRanking","_component_SalesRecordList","salesRecords","stats","salesStats","error","_component_v_dialog","showErrorDialog","$event","errorDialogMessage","_component_v_card_actions","md","_component_v_select","dateFilterType","items","dateFilterOptions","label","outlined","dense","onChange","onDateFilterTypeChange","_component_v_text_field","firstDate","onTwoDaysChange","type","max","Date","toISOString","split","secondDate","_component_v_combobox","selectedProducts","availableProducts","loadingProducts","placeholder","multiple","chips","clearable","selectedStoreNames","availableStoreNames","loadingStoreNames","resetFilters","applyFilters","SUPABASE_URL","process","SUPABASE_ANON_KEY","console","supabase","createClient","TIMEZONE_OFFSET_HOURS","applyTimezoneOffset","date","getTime","calculateDailyRevenue","salesData","Array","isArray","length","dailyMap","Map","forEach","record","index","time","warn","isNaN","adjustedDate","dateKey","price","parseFloat","currentRevenue","get","set","from","entries","map","revenue","Math","round","sort","a","b","calculateMonthlyRevenue","monthlyMap","monthKey","getFullYear","String","getMonth","padStart","month","localeCompare","calculateHourlyRevenue","selectedDate","selectedDateObj","startOfDay","setHours","endOfDay","dayData","filter","item","itemDate","adjustedItemDate","hourlyMap","hour","getHours","getChartLabels","data","dateStr","toLocaleDateString","day","getChartData","TABLE_NAME","async","createSale","saleData","insert","select","fetchSalesWithFilters","filters","query","dateRange","startDate","endDate","gte","lte","products","in","storeNames","order","ascending","limit","offset","range","fetchDistinctProducts","uniqueProducts","Set","product","fetchDistinctStoreNames","uniqueStoreNames","fetchSalesStats","totalRecords","totalRevenue","reduce","sum","totalQuantity","quantity","dailyRevenue","monthlyRevenue","fetchSalesRanking","stores","productStats","parseInt","store","has","prices","add","push","ranking","values","storeCount","averagePrice","sortBy","slice","total","emits","title","value","mounted","this","loadFilterOptions","methods","Promise","all","$emit","resetDateFilters","formatDate","dateObj","emitFilters","getDateRangeFilter","dates","setTimeout","_component_v_chip","_toDisplayString","$props","_hoisted_1","_hoisted_2","toLocaleString","_hoisted_3","showRevenueChart","disabled","_createElementBlock","_hoisted_4","_component_v_progress_circular","indeterminate","_component_v_alert","_hoisted_5","_hoisted_6","_component_v_expansion_panels","expandedPanels","_Fragment","_renderList","paginatedRecords","_component_v_expansion_panel","key","id","_component_v_expansion_panel_title","default","_withCtx","expanded","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","unit_price","_hoisted_11","_hoisted_12","_component_v_expansion_panel_text","_component_v_divider","_component_v_list","density","_component_v_list_item","prepend","_component_v_list_item_title","_component_v_list_item_subtitle","store_location","storage","start","formatDateTime","order_id","totalPages","_component_v_pagination","currentPage","onPageChange","showChartDialog","revenueDateRange","onRevenueDateRangeChange","min","applyRevenueDateRange","clearRevenueDateRange","_component_v_tabs","activeTab","_component_v_tab","_component_v_tabs_window","_component_v_tabs_window_item","filteredDailyRevenue","_hoisted_13","_component_RevenueChart","_hoisted_14","filteredMonthlyRevenue","_hoisted_15","_hoisted_16","ref","align","onDateChange","onBlur","loadHourlyData","loadingHourlyData","props","required","validator","includes","chart","hourlyData","updateTimeout","computed","$nextTick","createChart","beforeUnmount","clearTimeout","destroy","watch","handler","newData","oldData","JSON","stringify","debouncedUpdateChart","deep","updateChart","getChartConfig","chartType","hasHourlyData","isDailyWithHourly","labels","datasets","_","i","revenues","hourData","find","h","borderColor","backgroundColor","borderWidth","fill","tension","pointRadius","pointHoverRadius","options","responsive","maintainAspectRatio","animation","duration","easing","plugins","legend","display","position","tooltip","enabled","callbacks","context","dataset","parsed","y","scales","x","text","grid","ticks","callback","interaction","intersect","mode","$refs","chartCanvas","parentNode","config","canvas","width","height","offsetWidth","offsetHeight","Chart","update","components","RevenueChart","Object","Boolean","itemsPerPage","ceil","end","filteredSalesRecords","recordDate","year","dateString","localDate","minute","second","hour12","page","element","$el","querySelector","scrollIntoView","behavior","expandAll","collapseAll","$forceUpdate","totalProducts","rankingFilters","sortOptions","availableStores","loadRankingData","rankingData","_normalizeClass","getRankingItemClass","_component_v_avatar","getRankingColor","append","getRankingText","small","toFixed","buildFilters","message","SalesRecordFilters","SalesRecordList","SalesRanking","currentFilters","loadSalesData","records","keys","sm","idFilter","productFilter","nameFilter","locationFilter","_component_v_data_table","headers","filteredProducts","undefined","idQ","trim","toLowerCase","productQ","nameQ","locationQ","row","idStr","productStr","nameStr","locationStr","location","idOk","productOk","nameOk","locationOk","_component_InventorySearchPanel","onSelectionChange","selectedItem","elevation","_component_v_radio_group","selectedQuantity","_component_v_radio","customQuantity","customQuantityValue","totalPriceDisplay","canSell","isSelling","handleSell","isAddingToCart","handleAddToCart","sellMessage","sellMessageType","_component_CartPanel","cart","isCartProcessing","estimates","priceEstimates","totalEstimate","cartMessage","cartMessageType","onUpdateQty","onCartUpdateQty","onRemoveItem","onCartRemoveItem","onClear","onCartClear","onCheckout","onCartCheckout","onRefreshPrices","onRefreshEstimates","activePanel","_component_ProductSelector","selectedProduct","_component_ColorSelector","selectedColor","_component_StorageSelector","selectedStorage","onOptions","onStorageOptions","_component_StoreSelector","selectedStore","_component_v_skeleton_loader","quantityDisplay","_component_v_autocomplete","storeItems","modelValue","onUpdate","fetchDistinctStores","not","seen","collapse","s","replace","r","fetchColorsByProduct","ilike","fetchStoragesByProductColor","Number","fetchStoresByProductColorStorage","storageNumber","eq","or","aggregate","prev","n","results","nameLower","locationLower","originalRow","available","baseLabel","fetchQuantitySum","fetchPrice","val","loadStores","allStores","presenceMap","storesForSelection","hasProduct","normalizeKey","l","storeMap","presence","hasInventory","cleanName","cleanLocation","err","_ctx","load","immediate","colors","displayItems","v","storages","StoreSelector","ProductSelector","ColorSelector","StorageSelector","storageOptionsCount","hasStoreProductColor","resetAfterProduct","emitSelection","resetAfterColor","triggerQuery","count","qty","_component_v_table","hasEstimates","style","displayUnitPrice","displaySubtotal","displayCurrency","messageType","num","unit","q","CART_STORAGE_KEY","normalizeStorageKey","loadCart","raw","localStorage","getItem","parse","e","saveCart","setItem","clearCart","empty","addItem","line","storageKey","next","idx","findIndex","existing","splice","updateQuantity","lineKey","filtered","removeItem","sanitizeStorageValue","getInventoryRecordId","sanitizedStorage","Error","deductInventory","fetchError","totalAvailable","remaining","currentQuantity","deduct","newQuantity","updateError","InventorySearchPanel","CartPanel","created","actualQuantity","totalPrice","generateOrderId","now","getDate","hours","minutes","getMinutes","seconds","getSeconds","milliseconds","getMilliseconds","payload","log","storageValue","cartAddItem","latestUnitPrice","inventoryRecordId","orderId","cartUpdateQuantity","cartRemoveItem","cartClear","qtyAvailable","cartOrderId","routes","path","redirect","component","SalesRecord","Inventory","Selling","router","createRouter","history","createWebHistory","vuetify","createVuetify","directives","app","createApp","App","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","Function","window","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}