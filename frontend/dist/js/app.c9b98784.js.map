{"version":3,"file":"js/app.c9b98784.js","mappings":"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","sources":["webpack://inventory-management-system/./src/App.vue","webpack://inventory-management-system/./src/App.vue?7ccd","webpack://inventory-management-system/./src/views/SalesRecord.vue","webpack://inventory-management-system/./src/components/SalesRecordFilters.vue","webpack://inventory-management-system/./src/lib/supabase.js","webpack://inventory-management-system/./src/api/sales.js","webpack://inventory-management-system/./src/components/SalesRecordFilters.vue?2c89","webpack://inventory-management-system/./src/components/SalesRecordList.vue","webpack://inventory-management-system/./src/components/RevenueChart.vue","webpack://inventory-management-system/./src/components/RevenueChart.vue?f0fb","webpack://inventory-management-system/./src/components/SalesRecordList.vue?75ec","webpack://inventory-management-system/./src/views/SalesRecord.vue?84fd","webpack://inventory-management-system/./src/views/Inventory.vue","webpack://inventory-management-system/./src/views/Inventory.vue?abe9","webpack://inventory-management-system/./src/views/Selling.vue","webpack://inventory-management-system/./src/components/InventorySearchPanel.vue","webpack://inventory-management-system/./src/components/StoreSelector.vue","webpack://inventory-management-system/./src/api/inventory.js","webpack://inventory-management-system/./src/components/StoreSelector.vue?a4bf","webpack://inventory-management-system/./src/components/ProductSelector.vue","webpack://inventory-management-system/./src/components/ProductSelector.vue?98cc","webpack://inventory-management-system/./src/components/ColorSelector.vue","webpack://inventory-management-system/./src/components/ColorSelector.vue?0d92","webpack://inventory-management-system/./src/components/StorageSelector.vue","webpack://inventory-management-system/./src/components/StorageSelector.vue?bbc1","webpack://inventory-management-system/./src/components/InventorySearchPanel.vue?01b1","webpack://inventory-management-system/./src/components/CartPanel.vue","webpack://inventory-management-system/./src/components/CartPanel.vue?9ff6","webpack://inventory-management-system/./src/lib/cart.js","webpack://inventory-management-system/./src/lib/inventoryOps.js","webpack://inventory-management-system/./src/views/Selling.vue?f5a1","webpack://inventory-management-system/./src/router/index.js","webpack://inventory-management-system/./src/main.js","webpack://inventory-management-system/webpack/bootstrap","webpack://inventory-management-system/webpack/runtime/chunk loaded","webpack://inventory-management-system/webpack/runtime/compat get default export","webpack://inventory-management-system/webpack/runtime/define property getters","webpack://inventory-management-system/webpack/runtime/global","webpack://inventory-management-system/webpack/runtime/hasOwnProperty shorthand","webpack://inventory-management-system/webpack/runtime/make namespace object","webpack://inventory-management-system/webpack/runtime/jsonp chunk loading","webpack://inventory-management-system/webpack/startup"],"sourcesContent":["<template>\r\n  <v-app>\r\n    <v-app-bar\r\n      color=\"primary\"\r\n      dark\r\n      prominent\r\n    >\r\n      <v-toolbar-title>Distributed Inventory and Sales Management System</v-toolbar-title>\r\n      <v-spacer></v-spacer>\r\n      \r\n      <!-- header -->\r\n      <v-btn\r\n        :to=\"{ name: 'Selling' }\"\r\n        color=\"white\"\r\n        variant=\"text\"\r\n        class=\"mr-2\"\r\n      >\r\n        <v-icon left>mdi-cash-register</v-icon>\r\n        selling\r\n      </v-btn>\r\n      \r\n      <v-btn\r\n        :to=\"{ name: 'Inventory' }\"\r\n        color=\"white\"\r\n        variant=\"text\"\r\n        class=\"mr-2\"\r\n      >\r\n        <v-icon left>mdi-warehouse</v-icon>\r\n        Inventory \r\n      </v-btn>\r\n      \r\n      <v-btn\r\n        :to=\"{ name: 'SalesRecord' }\"\r\n        color=\"white\"\r\n        variant=\"text\"\r\n        class=\"mr-2\"\r\n      >\r\n        <v-icon left>mdi-chart-line</v-icon>\r\n        sales record\r\n      </v-btn>\r\n      \r\n      <v-btn icon>\r\n        <v-icon>mdi-account</v-icon>\r\n      </v-btn>\r\n    </v-app-bar>\r\n\r\n    <v-main>\r\n      <router-view />\r\n    </v-main>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'App'\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","import { render } from \"./App.vue?vue&type=template&id=6a8f2ebe\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <v-container fluid>\r\n    <v-row>\r\n      <v-col cols=\"12\">\r\n        <!-- Page Title -->\r\n        <v-card class=\"mb-4\">\r\n          <v-card-title class=\"d-flex align-center\">\r\n            <v-icon left size=\"large\" color=\"primary\">mdi-chart-line</v-icon>\r\n            <h1 class=\"text-h4\">Sales Records Query</h1>\r\n            <v-spacer></v-spacer>\r\n            <v-btn\r\n              color=\"primary\"\r\n              variant=\"outlined\"\r\n              @click=\"refreshData\"\r\n              :loading=\"isRefreshing\"\r\n            >\r\n              <v-icon left>mdi-refresh</v-icon>\r\n              Refresh Data\r\n            </v-btn>\r\n          </v-card-title>\r\n          <v-card-text>\r\n            <p class=\"text-body-1 text-grey-darken-1\">\r\n              View and manage all sales records with filtering by date, product, and store\r\n            </p>\r\n          </v-card-text>\r\n        </v-card>\r\n\r\n        <!-- Filter Panel -->\r\n        <SalesRecordFilters\r\n          @filters-change=\"onFiltersChange\"\r\n          @error=\"onFilterError\"\r\n          class=\"mb-4\"\r\n        />\r\n\r\n        <!-- Sales Records List -->\r\n        <SalesRecordList\r\n          :sales-records=\"salesRecords\"\r\n          :stats=\"salesStats\"\r\n          :loading=\"loading\"\r\n          :error=\"error\"\r\n        />\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <!-- Error Dialog -->\r\n    <v-dialog v-model=\"showErrorDialog\" max-width=\"500px\">\r\n      <v-card>\r\n        <v-card-title class=\"text-h5 text-error\">\r\n          <v-icon left color=\"error\">mdi-alert-circle</v-icon>\r\n          Error\r\n        </v-card-title>\r\n        <v-card-text>\r\n          {{ errorDialogMessage }}\r\n        </v-card-text>\r\n        <v-card-actions>\r\n          <v-spacer></v-spacer>\r\n          <v-btn color=\"primary\" @click=\"showErrorDialog = false\">OK</v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport SalesRecordFilters from '../components/SalesRecordFilters.vue'\r\nimport SalesRecordList from '../components/SalesRecordList.vue'\r\nimport { \r\n  fetchSalesWithFilters, \r\n  fetchSalesStats \r\n} from '../api/sales'\r\n\r\nexport default {\r\n  name: 'SalesRecord',\r\n  components: {\r\n    SalesRecordFilters,\r\n    SalesRecordList\r\n  },\r\n  data() {\r\n    return {\r\n      salesRecords: [],\r\n      salesStats: null,\r\n      loading: false,\r\n      isRefreshing: false,\r\n      error: '',\r\n      showErrorDialog: false,\r\n      errorDialogMessage: '',\r\n      currentFilters: {}\r\n    }\r\n  },\r\n  async mounted() {\r\n    // Initial load of all sales records\r\n    await this.loadSalesData()\r\n  },\r\n  methods: {\r\n    async onFiltersChange(filters) {\r\n      this.currentFilters = filters\r\n      await this.loadSalesData(filters)\r\n    },\r\n    \r\n    async loadSalesData(filters = {}) {\r\n      this.loading = true\r\n      this.error = ''\r\n      \r\n      try {\r\n        // Fetch sales records and statistics in parallel\r\n        const [records, stats] = await Promise.all([\r\n          fetchSalesWithFilters(filters),\r\n          fetchSalesStats(filters)\r\n        ])\r\n        \r\n        this.salesRecords = records\r\n        this.salesStats = stats\r\n        \r\n        // If no records found, show message\r\n        if (records.length === 0 && Object.keys(filters).length > 0) {\r\n          this.error = 'No sales records found matching the criteria. Please try adjusting the filter conditions'\r\n        }\r\n        \r\n      } catch (error) {\r\n        console.error('Failed to load sales data:', error)\r\n        this.error = 'Failed to load sales records: ' + error.message\r\n        this.salesRecords = []\r\n        this.salesStats = null\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    \r\n    async refreshData() {\r\n      this.isRefreshing = true\r\n      try {\r\n        await this.loadSalesData(this.currentFilters)\r\n      } finally {\r\n        this.isRefreshing = false\r\n      }\r\n    },\r\n    \r\n    onFilterError(message) {\r\n      this.errorDialogMessage = message\r\n      this.showErrorDialog = true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.v-card {\r\n  border-radius: 12px;\r\n}\r\n\r\n.text-grey-darken-1 {\r\n  color: rgba(0, 0, 0, 0.6) !important;\r\n}\r\n</style>","<template>\r\n  <v-card>\r\n    <v-card-title>\r\n      <v-icon left>mdi-filter</v-icon>\r\n      Filter Conditions\r\n    </v-card-title>\r\n    <v-card-text>\r\n      <v-row>\r\n        <!-- Date Filter -->\r\n        <v-col cols=\"12\" md=\"4\">\r\n          <v-select\r\n            v-model=\"dateFilterType\"\r\n            :items=\"dateFilterOptions\"\r\n            label=\"Date Filter Type\"\r\n            outlined\r\n            dense\r\n            @change=\"onDateFilterTypeChange\"\r\n          ></v-select>\r\n        </v-col>\r\n        \r\n        <!-- Two Days Selection -->\r\n        <v-col cols=\"12\" md=\"8\" v-if=\"dateFilterType === 'two-days'\">\r\n          <v-row>\r\n            <v-col cols=\"6\">\r\n              <v-text-field\r\n                v-model=\"firstDate\"\r\n                label=\"Start Date\"\r\n                type=\"date\"\r\n                outlined\r\n                dense\r\n                :max=\"new Date().toISOString().split('T')[0]\"\r\n                @update:model-value=\"onTwoDaysChange\"\r\n              ></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"6\">\r\n              <v-text-field\r\n                v-model=\"secondDate\"\r\n                label=\"End Date\"\r\n                type=\"date\"\r\n                outlined\r\n                dense\r\n                :max=\"new Date().toISOString().split('T')[0]\"\r\n                @update:model-value=\"onTwoDaysChange\"\r\n              ></v-text-field>\r\n            </v-col>\r\n          </v-row>\r\n        </v-col>\r\n        \r\n        <!-- Product Filter -->\r\n        <v-col cols=\"12\" md=\"4\">\r\n          <v-combobox\r\n            v-model=\"selectedProducts\"\r\n            :items=\"availableProducts\"\r\n            :loading=\"loadingProducts\"\r\n            label=\"Product Filter\"\r\n            placeholder=\"Select products\"\r\n            outlined\r\n            dense\r\n            multiple\r\n            chips\r\n            clearable\r\n            @update:model-value=\"onFiltersChange\"\r\n          ></v-combobox>\r\n        </v-col>\r\n        \r\n        <!-- Store Name Filter -->\r\n        <v-col cols=\"12\" md=\"4\">\r\n          <v-combobox\r\n            v-model=\"selectedStoreNames\"\r\n            :items=\"availableStoreNames\"\r\n            :loading=\"loadingStoreNames\"\r\n            label=\"Store Filter\"\r\n            placeholder=\"Select stores\"\r\n            outlined\r\n            dense\r\n            multiple\r\n            chips\r\n            clearable\r\n            @update:model-value=\"onFiltersChange\"\r\n          ></v-combobox>\r\n        </v-col>\r\n      </v-row>\r\n      \r\n      <!-- Action Buttons -->\r\n      <v-row class=\"mt-2\">\r\n        <v-col cols=\"12\" class=\"text-right\">\r\n          <v-btn\r\n            color=\"secondary\"\r\n            @click=\"resetFilters\"\r\n            class=\"mr-2\"\r\n          >\r\n            <v-icon left>mdi-refresh</v-icon>\r\n            Reset\r\n          </v-btn>\r\n          <v-btn\r\n            color=\"primary\"\r\n            @click=\"applyFilters\"\r\n            :loading=\"loading\"\r\n          >\r\n            <v-icon left>mdi-magnify</v-icon>\r\n            Search\r\n          </v-btn>\r\n        </v-col>\r\n      </v-row>\r\n    </v-card-text>\r\n    \r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport { \r\n  fetchDistinctProducts, \r\n  fetchDistinctStoreNames \r\n} from '../api/sales'\r\n\r\nexport default {\r\n  name: 'SalesRecordFilters',\r\n  emits: ['filters-change'],\r\n  data() {\r\n    return {\r\n      dateFilterType: 'none',\r\n      dateFilterOptions: [\r\n        { title: 'No Date Filter', value: 'none' },\r\n        { title: 'Select Day Range', value: 'two-days' }\r\n      ],\r\n      firstDate: null,\r\n      secondDate: null,\r\n      selectedProducts: [],\r\n      selectedStoreNames: [],\r\n      availableProducts: [],\r\n      availableStoreNames: [],\r\n      loadingProducts: false,\r\n      loadingStoreNames: false,\r\n      loading: false\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadFilterOptions()\r\n  },\r\n  methods: {\r\n    async loadFilterOptions() {\r\n      // Load product and store options in parallel\r\n      this.loadingProducts = true\r\n      this.loadingStoreNames = true\r\n      \r\n      try {\r\n        const [products, storeNames] = await Promise.all([\r\n          fetchDistinctProducts(),\r\n          fetchDistinctStoreNames()\r\n        ])\r\n        \r\n        this.availableProducts = products\r\n        this.availableStoreNames = storeNames\r\n      } catch (error) {\r\n        console.error('Failed to load filter options:', error)\r\n        this.$emit('error', 'Failed to load filter options')\r\n      } finally {\r\n        this.loadingProducts = false\r\n        this.loadingStoreNames = false\r\n      }\r\n    },\r\n    \r\n    onDateFilterTypeChange() {\r\n      this.resetDateFilters()\r\n      this.onFiltersChange()\r\n    },\r\n    \r\n    onTwoDaysChange() {\r\n      this.onFiltersChange()\r\n    },\r\n    \r\n    formatDate(date) {\r\n      if (!date) return ''\r\n      const dateObj = new Date(date)\r\n      // 添加8小时时区偏移，确保显示本地时间\r\n      const localDate = new Date(dateObj.getTime() + 8 * 60 * 60 * 1000)\r\n      return localDate.toLocaleDateString('en-US')\r\n    },\r\n    \r\n    onFiltersChange() {\r\n      // Real-time filter change notification\r\n      this.emitFilters()\r\n    },\r\n    \r\n    emitFilters() {\r\n      const filters = {\r\n        dateRange: this.getDateRangeFilter(),\r\n        products: this.selectedProducts,\r\n        storeNames: this.selectedStoreNames\r\n      }\r\n      \r\n      this.$emit('filters-change', filters)\r\n    },\r\n    \r\n    getDateRangeFilter() {\r\n      if (this.dateFilterType === 'two-days' && this.firstDate && this.secondDate) {\r\n        // Return the two dates in chronological order\r\n        const dates = [this.firstDate, this.secondDate].sort()\r\n        return dates\r\n      }\r\n      return null\r\n    },\r\n    \r\n    applyFilters() {\r\n      this.loading = true\r\n      this.emitFilters()\r\n      \r\n      // Simulate loading state\r\n      setTimeout(() => {\r\n        this.loading = false\r\n      }, 500)\r\n    },\r\n    \r\n    resetFilters() {\r\n      this.dateFilterType = 'none'\r\n      this.firstDate = null\r\n      this.secondDate = null\r\n      this.selectedProducts = []\r\n      this.selectedStoreNames = []\r\n      this.emitFilters()\r\n    },\r\n    \r\n    resetDateFilters() {\r\n      this.firstDate = null\r\n      this.secondDate = null\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.v-date-picker {\r\n  margin: 0 auto;\r\n}\r\n</style>\r\n","import { createClient } from '@supabase/supabase-js'\r\n\r\n// Read from environment variables injected at build time via Vite/CLI env\r\n// For Vue CLI, we expect variables to be provided using process.env at build time\r\nconst SUPABASE_URL = process.env.VUE_APP_SUPABASE_URL || process.env.SUPABASE_URL\r\nconst SUPABASE_ANON_KEY = process.env.VUE_APP_SUPABASE_ANON_KEY || process.env.SUPABASE_ANON_KEY\r\n\r\nif (!SUPABASE_URL || !SUPABASE_ANON_KEY) {\r\n  // Fallback to avoid runtime crashes; developer will see console error in browser\r\n  // You can set VUE_APP_SUPABASE_URL and VUE_APP_SUPABASE_ANON_KEY in .env.* at frontend root\r\n  // Since backend/.env exists, copy values into frontend/.env.local when building locally\r\n  // eslint-disable-next-line no-console\r\n  console.error('[Supabase] Missing SUPABASE_URL or SUPABASE_ANON_KEY environment variables')\r\n}\r\n\r\nexport const supabase = createClient(\r\n  SUPABASE_URL || '',\r\n  SUPABASE_ANON_KEY || ''\r\n)\r\n\r\nexport default supabase\r\n\r\n\r\n","import supabase from '../lib/supabase'\r\n\r\nconst TABLE_NAME = 'sales'\r\n\r\nexport async function createSale(saleData) {\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .insert([saleData])\r\n    .select()\r\n\r\n  if (error) throw error\r\n  return data\r\n}\r\n\r\nexport async function fetchSales() {\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('*')\r\n    .order('time', { ascending: false })\r\n\r\n  if (error) throw error\r\n  return data\r\n}\r\n\r\nexport async function fetchSalesWithFilters(filters) {\r\n  let query = supabase\r\n    .from(TABLE_NAME)\r\n    .select('*')\r\n\r\n  // Date filtering\r\n  if (filters.dateRange) {\r\n    if (filters.dateRange.length === 1) {\r\n      // Single day selection\r\n      const startDate = new Date(filters.dateRange[0])\r\n      startDate.setHours(0, 0, 0, 0)\r\n      const endDate = new Date(filters.dateRange[0])\r\n      endDate.setHours(23, 59, 59, 999)\r\n      \r\n      query = query\r\n        .gte('time', startDate.toISOString())\r\n        .lte('time', endDate.toISOString())\r\n    } else if (filters.dateRange.length === 2) {\r\n      // Date range\r\n      const startDate = new Date(filters.dateRange[0])\r\n      startDate.setHours(0, 0, 0, 0)\r\n      const endDate = new Date(filters.dateRange[1])\r\n      endDate.setHours(23, 59, 59, 999)\r\n      \r\n      query = query\r\n        .gte('time', startDate.toISOString())\r\n        .lte('time', endDate.toISOString())\r\n    }\r\n  }\r\n\r\n  // Product filtering (multiple selection)\r\n  if (filters.products && filters.products.length > 0) {\r\n    query = query.in('product', filters.products)\r\n  }\r\n\r\n  // Store name filtering\r\n  if (filters.storeNames && filters.storeNames.length > 0) {\r\n    query = query.in('name', filters.storeNames)\r\n  }\r\n\r\n  // Sorting and pagination\r\n  query = query.order('time', { ascending: false })\r\n  \r\n  if (filters.limit) {\r\n    query = query.limit(filters.limit)\r\n  }\r\n  \r\n  if (filters.offset) {\r\n    query = query.range(filters.offset, filters.offset + (filters.limit || 20) - 1)\r\n  }\r\n\r\n  const { data, error } = await query\r\n\r\n  if (error) throw error\r\n  return data\r\n}\r\n\r\nexport async function fetchDistinctProducts() {\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('product')\r\n    .order('product')\r\n\r\n  if (error) throw error\r\n  \r\n  // Remove duplicates and return product list\r\n  const uniqueProducts = [...new Set(data.map(item => item.product))]\r\n  return uniqueProducts\r\n}\r\n\r\nexport async function fetchDistinctStoreNames() {\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('name')\r\n    .order('name')\r\n\r\n  if (error) throw error\r\n  \r\n  // Remove duplicates and return store names list\r\n  const uniqueStoreNames = [...new Set(data.map(item => item.name))]\r\n  return uniqueStoreNames\r\n}\r\n\r\nexport async function fetchSalesStats(filters = {}) {\r\n  let query = supabase\r\n    .from(TABLE_NAME)\r\n    .select('price, quantity, time')\r\n\r\n  // Apply the same filter conditions\r\n  if (filters.dateRange) {\r\n    if (filters.dateRange.length === 1) {\r\n      const startDate = new Date(filters.dateRange[0])\r\n      startDate.setHours(0, 0, 0, 0)\r\n      const endDate = new Date(filters.dateRange[0])\r\n      endDate.setHours(23, 59, 59, 999)\r\n      \r\n      query = query\r\n        .gte('time', startDate.toISOString())\r\n        .lte('time', endDate.toISOString())\r\n    } else if (filters.dateRange.length === 2) {\r\n      const startDate = new Date(filters.dateRange[0])\r\n      startDate.setHours(0, 0, 0, 0)\r\n      const endDate = new Date(filters.dateRange[1])\r\n      endDate.setHours(23, 59, 59, 999)\r\n      \r\n      query = query\r\n        .gte('time', startDate.toISOString())\r\n        .lte('time', endDate.toISOString())\r\n    }\r\n  }\r\n\r\n  if (filters.products && filters.products.length > 0) {\r\n    query = query.in('product', filters.products)\r\n  }\r\n\r\n  if (filters.storeNames && filters.storeNames.length > 0) {\r\n    query = query.in('name', filters.storeNames)\r\n  }\r\n\r\n  const { data, error } = await query\r\n\r\n  if (error) throw error\r\n\r\n  // Calculate statistics\r\n  const totalRecords = data.length\r\n  const totalRevenue = data.reduce((sum, record) => sum + (record.price || 0), 0)\r\n  const totalQuantity = data.reduce((sum, record) => sum + (record.quantity || 0), 0)\r\n\r\n  // Calculate daily and monthly revenue\r\n  const dailyRevenue = calculateDailyRevenue(data)\r\n  const monthlyRevenue = calculateMonthlyRevenue(data)\r\n\r\n  return {\r\n    totalRecords,\r\n    totalRevenue,\r\n    totalQuantity,\r\n    dailyRevenue,\r\n    monthlyRevenue\r\n  }\r\n}\r\n\r\n// Helper function to calculate daily revenue\r\nfunction calculateDailyRevenue(data) {\r\n  // 输入验证\r\n  if (!Array.isArray(data)) {\r\n    console.warn('calculateDailyRevenue: 输入数据不是数组')\r\n    return []\r\n  }\r\n  \r\n  if (data.length === 0) {\r\n    return []\r\n  }\r\n  \r\n  const dailyMap = new Map()\r\n  \r\n  try {\r\n    data.forEach((record, index) => {\r\n      // 验证记录格式\r\n      if (!record || typeof record !== 'object') {\r\n        console.warn(`calculateDailyRevenue: 跳过无效记录 at index ${index}`)\r\n        return\r\n      }\r\n      \r\n      // 验证时间字段\r\n      if (!record.time) {\r\n        console.warn(`calculateDailyRevenue: 记录缺少时间字段 at index ${index}`)\r\n        return\r\n      }\r\n      \r\n      // 解析日期并验证\r\n      const date = new Date(record.time)\r\n      if (isNaN(date.getTime())) {\r\n        console.warn(`calculateDailyRevenue: 无效的时间格式 at index ${index}: ${record.time}`)\r\n        return\r\n      }\r\n      \r\n      // 获取日期键 (YYYY-MM-DD 格式)\r\n      const dateKey = date.toISOString().split('T')[0]\r\n      \r\n      // 验证价格字段\r\n      const price = parseFloat(record.price) || 0\r\n      if (price < 0) {\r\n        console.warn(`calculateDailyRevenue: 负价格值 at index ${index}: ${record.price}`)\r\n      }\r\n      \r\n      // 累加收入\r\n      const currentRevenue = dailyMap.get(dateKey) || 0\r\n      dailyMap.set(dateKey, currentRevenue + price)\r\n    })\r\n    \r\n    // 转换为数组并排序\r\n    const result = Array.from(dailyMap.entries())\r\n      .map(([date, revenue]) => ({ \r\n        date, \r\n        revenue: Math.round(revenue * 100) / 100 // 保留两位小数\r\n      }))\r\n      .sort((a, b) => new Date(a.date) - new Date(b.date))\r\n    \r\n    return result\r\n    \r\n  } catch (error) {\r\n    console.error('calculateDailyRevenue: 处理数据时发生错误:', error)\r\n    return []\r\n  }\r\n}\r\n\r\n// Helper function to calculate monthly revenue\r\nfunction calculateMonthlyRevenue(data) {\r\n  const monthlyMap = new Map()\r\n  \r\n  data.forEach(record => {\r\n    const date = new Date(record.time)\r\n    const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`\r\n    \r\n    if (monthlyMap.has(monthKey)) {\r\n      monthlyMap.set(monthKey, monthlyMap.get(monthKey) + (record.price || 0))\r\n    } else {\r\n      monthlyMap.set(monthKey, record.price || 0)\r\n    }\r\n  })\r\n  \r\n  // Convert to array and sort by month\r\n  return Array.from(monthlyMap.entries())\r\n    .map(([month, revenue]) => ({ month, revenue }))\r\n    .sort((a, b) => a.month.localeCompare(b.month))\r\n}\r\n\r\nexport default {\r\n  createSale,\r\n  fetchSales,\r\n  fetchSalesWithFilters,\r\n  fetchDistinctProducts,\r\n  fetchDistinctStoreNames,\r\n  fetchSalesStats\r\n}\r\n","import { render } from \"./SalesRecordFilters.vue?vue&type=template&id=2018a850&scoped=true\"\nimport script from \"./SalesRecordFilters.vue?vue&type=script&lang=js\"\nexport * from \"./SalesRecordFilters.vue?vue&type=script&lang=js\"\n\nimport \"./SalesRecordFilters.vue?vue&type=style&index=0&id=2018a850&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2018a850\"]])\n\nexport default __exports__","<template>\r\n  <v-card>\r\n    <v-card-title>\r\n      <v-icon left>mdi-format-list-bulleted</v-icon>\r\n      Sales Records\r\n      <v-spacer></v-spacer>\r\n      <v-chip color=\"primary\" variant=\"outlined\">\r\n        Total {{ totalRecords }} Records\r\n      </v-chip>\r\n    </v-card-title>\r\n    \r\n    <v-card-text>\r\n      <!-- Statistics -->\r\n      <v-row class=\"mb-4\" v-if=\"stats\">\r\n        <v-col cols=\"12\" md=\"3\">\r\n          <v-card color=\"primary\" variant=\"tonal\">\r\n            <v-card-text class=\"text-center\">\r\n              <div class=\"text-h6\">{{ stats.totalRecords }}</div>\r\n              <div class=\"text-caption\">Total Records</div>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"3\">\r\n          <v-card color=\"success\" variant=\"tonal\">\r\n            <v-card-text class=\"text-center\">\r\n              <div class=\"text-h6\">${{ stats.totalRevenue.toLocaleString() }}</div>\r\n              <div class=\"text-caption\">Total Revenue</div>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"3\">\r\n          <v-card color=\"info\" variant=\"tonal\">\r\n            <v-card-text class=\"text-center\">\r\n              <div class=\"text-h6\">{{ stats.totalQuantity }}</div>\r\n              <div class=\"text-caption\">Total Quantity</div>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-col>\r\n        <v-col cols=\"12\" md=\"3\">\r\n          <v-card color=\"warning\" variant=\"tonal\">\r\n            <v-card-text class=\"text-center\">\r\n              <v-btn\r\n                color=\"warning\"\r\n                variant=\"elevated\"\r\n                @click=\"showRevenueChart\"\r\n                :disabled=\"!stats.dailyRevenue || stats.dailyRevenue.length === 0\"\r\n              >\r\n                <v-icon left>mdi-chart-line</v-icon>\r\n                Show Revenue\r\n              </v-btn>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-col>\r\n      </v-row>\r\n\r\n      <!-- Loading State -->\r\n      <div v-if=\"loading\" class=\"text-center py-8\">\r\n        <v-progress-circular indeterminate color=\"primary\" size=\"64\"></v-progress-circular>\r\n        <div class=\"mt-2\">Loading...</div>\r\n      </div>\r\n\r\n      <!-- Error State -->\r\n      <v-alert v-else-if=\"error\" type=\"error\" class=\"mb-4\">\r\n        {{ error }}\r\n      </v-alert>\r\n\r\n      <!-- No Data State -->\r\n      <div v-else-if=\"salesRecords.length === 0\" class=\"text-center py-8\">\r\n        <v-icon size=\"64\" color=\"grey\">mdi-inbox-outline</v-icon>\r\n        <div class=\"text-h6 mt-2\">No Sales Records Found</div>\r\n        <div class=\"text-body-2 text-grey\">Please adjust filter conditions or check data</div>\r\n      </div>\r\n\r\n      <!-- Sales Records List -->\r\n      <div v-else>\r\n        <v-expansion-panels v-model=\"expandedPanels\" multiple>\r\n          <v-expansion-panel\r\n            v-for=\"(record, index) in paginatedRecords\"\r\n            :key=\"record.id || index\"\r\n            :value=\"index\"\r\n          >\r\n            <v-expansion-panel-title>\r\n              <template v-slot:default=\"{ expanded }\">\r\n                <v-row no-gutters>\r\n                  <v-col cols=\"12\" md=\"3\">\r\n                    <v-icon :icon=\"expanded ? 'mdi-chevron-up' : 'mdi-chevron-down'\"></v-icon>\r\n                    <span class=\"ml-2\">{{ record.product }}</span>\r\n                  </v-col>\r\n                  <v-col cols=\"12\" md=\"2\">\r\n                    <span class=\"text-caption text-grey\">Store:</span>\r\n                    <div class=\"font-weight-medium\">{{ record.name }}</div>\r\n                  </v-col>\r\n                  <v-col cols=\"12\" md=\"2\">\r\n                    <span class=\"text-caption text-grey\">Qty:</span>\r\n                    <div class=\"font-weight-medium\">{{ record.quantity }}</div>\r\n                  </v-col>\r\n                  <v-col cols=\"12\" md=\"2\">\r\n                    <span class=\"text-caption text-grey\">Unit:</span>\r\n                    <div class=\"font-weight-medium\">${{ record.unit_price }}</div>\r\n                  </v-col>\r\n                  <v-col cols=\"12\" md=\"2\">\r\n                    <span class=\"text-caption text-grey\">Total:</span>\r\n                    <div class=\"font-weight-bold text-primary\">${{ record.price }}</div>\r\n                  </v-col>\r\n                  <v-col cols=\"12\" md=\"1\">\r\n                    <span class=\"text-caption text-grey\">Time:</span>\r\n                    <div class=\"text-caption\">{{ formatDate(record.time) }}</div>\r\n                  </v-col>\r\n                </v-row>\r\n              </template>\r\n            </v-expansion-panel-title>\r\n            \r\n            <v-expansion-panel-text>\r\n              <v-divider class=\"mb-3\"></v-divider>\r\n              \r\n              <v-row>\r\n                <v-col cols=\"12\" md=\"6\">\r\n                  <v-list density=\"compact\">\r\n                    <v-list-item>\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-store</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Store Name</v-list-item-title>\r\n                      <v-list-item-subtitle>{{ record.name }}</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                    \r\n                    <v-list-item>\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-map-marker</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Store Location</v-list-item-title>\r\n                      <v-list-item-subtitle>{{ record.store_location }}</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                    \r\n                    <v-list-item>\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-package-variant</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Product</v-list-item-title>\r\n                      <v-list-item-subtitle>{{ record.product }}</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                    \r\n                    <v-list-item>\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-palette</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Color</v-list-item-title>\r\n                      <v-list-item-subtitle>{{ record.color }}</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                  </v-list>\r\n                </v-col>\r\n                \r\n                <v-col cols=\"12\" md=\"6\">\r\n                  <v-list density=\"compact\">\r\n                    <v-list-item v-if=\"record.storage\">\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-memory</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Storage</v-list-item-title>\r\n                      <v-list-item-subtitle>{{ record.storage }}GB</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                    \r\n                    <v-list-item>\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-numeric</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Quantity</v-list-item-title>\r\n                      <v-list-item-subtitle>{{ record.quantity }}</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                    \r\n                    <v-list-item>\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-currency-usd</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Unit Price</v-list-item-title>\r\n                      <v-list-item-subtitle>${{ record.unit_price }}</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                    \r\n                    <v-list-item>\r\n                      <template v-slot:prepend>\r\n                        <v-icon>mdi-calculator</v-icon>\r\n                      </template>\r\n                      <v-list-item-title>Total Price</v-list-item-title>\r\n                      <v-list-item-subtitle class=\"text-h6 text-primary\">${{ record.price }}</v-list-item-subtitle>\r\n                    </v-list-item>\r\n                  </v-list>\r\n                </v-col>\r\n              </v-row>\r\n              \r\n              <v-divider class=\"mt-3\"></v-divider>\r\n              \r\n              <v-row class=\"mt-2\">\r\n                <v-col cols=\"12\" class=\"text-right\">\r\n                  <v-chip color=\"grey\" variant=\"outlined\" size=\"small\">\r\n                    <v-icon start>mdi-clock</v-icon>\r\n                    Sale Time: {{ formatDateTime(record.time) }}\r\n                  </v-chip>\r\n                  <v-chip color=\"grey\" variant=\"outlined\" size=\"small\" class=\"ml-2\">\r\n                    <v-icon start>mdi-identifier</v-icon>\r\n                    ID: {{ record.id }}\r\n                  </v-chip>\r\n                </v-col>\r\n              </v-row>\r\n            </v-expansion-panel-text>\r\n          </v-expansion-panel>\r\n        </v-expansion-panels>\r\n        \r\n        <!-- Pagination -->\r\n        <v-pagination\r\n          v-if=\"totalPages > 1\"\r\n          v-model=\"currentPage\"\r\n          :length=\"totalPages\"\r\n          :total-visible=\"7\"\r\n          class=\"mt-4\"\r\n          @update:model-value=\"onPageChange\"\r\n        >        </v-pagination>\r\n      </div>\r\n    </v-card-text>\r\n\r\n    <!-- Revenue Chart Dialog -->\r\n    <v-dialog v-model=\"showChartDialog\" max-width=\"1200px\">\r\n      <v-card>\r\n        <v-card-title class=\"d-flex align-center\">\r\n          <v-icon left color=\"primary\">mdi-chart-line</v-icon>\r\n          Revenue Analysis\r\n          <v-spacer></v-spacer>\r\n          <v-btn\r\n            icon=\"mdi-close\"\r\n            variant=\"text\"\r\n            @click=\"showChartDialog = false\"\r\n          ></v-btn>\r\n        </v-card-title>\r\n        <v-card-text>\r\n          <!-- Date Range Selector for Revenue Analysis -->\r\n          <v-card class=\"mb-4\" variant=\"outlined\">\r\n            <v-card-title class=\"text-subtitle-1\">\r\n              <v-icon left>mdi-calendar-range</v-icon>\r\n              Date Range Filter\r\n            </v-card-title>\r\n            <v-card-text>\r\n              <v-row>\r\n                <v-col cols=\"12\" md=\"4\">\r\n                  <v-text-field\r\n                    v-model=\"revenueDateRange.startDate\"\r\n                    label=\"Start Date\"\r\n                    type=\"date\"\r\n                    prepend-icon=\"mdi-calendar-start\"\r\n                    variant=\"outlined\"\r\n                    density=\"compact\"\r\n                    :max=\"revenueDateRange.endDate || new Date().toISOString().split('T')[0]\"\r\n                    @update:model-value=\"onRevenueDateRangeChange\"\r\n                  ></v-text-field>\r\n                </v-col>\r\n                <v-col cols=\"12\" md=\"4\">\r\n                  <v-text-field\r\n                    v-model=\"revenueDateRange.endDate\"\r\n                    label=\"End Date\"\r\n                    type=\"date\"\r\n                    prepend-icon=\"mdi-calendar-end\"\r\n                    variant=\"outlined\"\r\n                    density=\"compact\"\r\n                    :min=\"revenueDateRange.startDate\"\r\n                    :max=\"new Date().toISOString().split('T')[0]\"\r\n                    @update:model-value=\"onRevenueDateRangeChange\"\r\n                  ></v-text-field>\r\n                </v-col>\r\n                <v-col cols=\"12\" md=\"4\" class=\"d-flex align-center\">\r\n                  <v-btn\r\n                    color=\"primary\"\r\n                    variant=\"outlined\"\r\n                    @click=\"applyRevenueDateRange\"\r\n                    :disabled=\"!revenueDateRange.startDate || !revenueDateRange.endDate\"\r\n                    class=\"mr-2\"\r\n                  >\r\n                    <v-icon left>mdi-filter</v-icon>\r\n                    Apply Filter\r\n                  </v-btn>\r\n                  <v-btn\r\n                    color=\"secondary\"\r\n                    variant=\"text\"\r\n                    @click=\"clearRevenueDateRange\"\r\n                  >\r\n                    <v-icon left>mdi-refresh</v-icon>\r\n                    Clear\r\n                  </v-btn>\r\n                </v-col>\r\n              </v-row>\r\n            </v-card-text>\r\n          </v-card>\r\n          \r\n          <v-tabs v-model=\"activeTab\" class=\"mb-4\">\r\n            <v-tab value=\"daily\">Daily Revenue</v-tab>\r\n            <v-tab value=\"monthly\">Monthly Revenue</v-tab>\r\n          </v-tabs>\r\n          \r\n          <v-tabs-window v-model=\"activeTab\">\r\n            <v-tabs-window-item value=\"daily\">\r\n              <div v-if=\"filteredDailyRevenue && filteredDailyRevenue.length > 0\">\r\n                <RevenueChart\r\n                  :data=\"filteredDailyRevenue\"\r\n                  :type=\"'daily'\"\r\n                  :title=\"'Daily Revenue Trend'\"\r\n                />\r\n              </div>\r\n              <div v-else class=\"text-center py-8\">\r\n                <v-icon size=\"64\" color=\"grey\">mdi-chart-line</v-icon>\r\n                <div class=\"text-h6 mt-2\">No Daily Revenue Data</div>\r\n                <div class=\"text-body-2 text-grey\">No sales data available for daily analysis</div>\r\n              </div>\r\n            </v-tabs-window-item>\r\n            \r\n            <v-tabs-window-item value=\"monthly\">\r\n              <div v-if=\"filteredMonthlyRevenue && filteredMonthlyRevenue.length > 0\">\r\n                <RevenueChart\r\n                  :data=\"filteredMonthlyRevenue\"\r\n                  :type=\"'monthly'\"\r\n                  :title=\"'Monthly Revenue Trend'\"\r\n                />\r\n              </div>\r\n              <div v-else class=\"text-center py-8\">\r\n                <v-icon size=\"64\" color=\"grey\">mdi-chart-line</v-icon>\r\n                <div class=\"text-h6 mt-2\">No Monthly Revenue Data</div>\r\n                <div class=\"text-body-2 text-grey\">No sales data available for monthly analysis</div>\r\n              </div>\r\n            </v-tabs-window-item>\r\n          </v-tabs-window>\r\n        </v-card-text>\r\n      </v-card>\r\n    </v-dialog>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport RevenueChart from './RevenueChart.vue'\r\n\r\nexport default {\r\n  name: 'SalesRecordList',\r\n  components: {\r\n    RevenueChart\r\n  },\r\n  props: {\r\n    salesRecords: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    stats: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    error: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currentPage: 1,\r\n      itemsPerPage: 20,\r\n      expandedPanels: [],\r\n      showChartDialog: false,\r\n      activeTab: 'daily',\r\n      revenueDateRange: {\r\n        startDate: '',\r\n        endDate: ''\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    totalRecords() {\r\n      return this.salesRecords.length\r\n    },\r\n    totalPages() {\r\n      return Math.ceil(this.totalRecords / this.itemsPerPage)\r\n    },\r\n    paginatedRecords() {\r\n      const start = (this.currentPage - 1) * this.itemsPerPage\r\n      const end = start + this.itemsPerPage\r\n      return this.salesRecords.slice(start, end)\r\n    },\r\n    filteredSalesRecords() {\r\n      if (!this.revenueDateRange.startDate || !this.revenueDateRange.endDate) {\r\n        return this.salesRecords\r\n      }\r\n      \r\n      const startDate = new Date(this.revenueDateRange.startDate)\r\n      startDate.setHours(0, 0, 0, 0)\r\n      const endDate = new Date(this.revenueDateRange.endDate)\r\n      endDate.setHours(23, 59, 59, 999)\r\n      \r\n      return this.salesRecords.filter(record => {\r\n        if (!record.time) return false\r\n        const recordDate = new Date(record.time)\r\n        return recordDate >= startDate && recordDate <= endDate\r\n      })\r\n    },\r\n    filteredDailyRevenue() {\r\n      if (!this.stats || !this.stats.dailyRevenue) {\r\n        return []\r\n      }\r\n      \r\n      if (!this.revenueDateRange.startDate || !this.revenueDateRange.endDate) {\r\n        return this.stats.dailyRevenue\r\n      }\r\n      \r\n      const startDate = new Date(this.revenueDateRange.startDate)\r\n      const endDate = new Date(this.revenueDateRange.endDate)\r\n      \r\n      return this.stats.dailyRevenue.filter(item => {\r\n        const itemDate = new Date(item.date)\r\n        return itemDate >= startDate && itemDate <= endDate\r\n      })\r\n    },\r\n    filteredMonthlyRevenue() {\r\n      if (!this.stats || !this.stats.monthlyRevenue) {\r\n        return []\r\n      }\r\n      \r\n      if (!this.revenueDateRange.startDate || !this.revenueDateRange.endDate) {\r\n        return this.stats.monthlyRevenue\r\n      }\r\n      \r\n      const startDate = new Date(this.revenueDateRange.startDate)\r\n      const endDate = new Date(this.revenueDateRange.endDate)\r\n      \r\n      return this.stats.monthlyRevenue.filter(item => {\r\n        const [year, month] = item.month.split('-')\r\n        const itemDate = new Date(year, month - 1, 1)\r\n        return itemDate >= startDate && itemDate <= endDate\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    salesRecords() {\r\n      // Reset to first page when records change\r\n      this.currentPage = 1\r\n      this.expandedPanels = []\r\n    }\r\n  },\r\n  methods: {\r\n    formatDate(dateString) {\r\n      if (!dateString) return ''\r\n      const date = new Date(dateString)\r\n      // 添加8小时时区偏移，确保显示本地时间\r\n      const localDate = new Date(date.getTime() + 8 * 60 * 60 * 1000)\r\n      return localDate.toLocaleDateString('en-US')\r\n    },\r\n    \r\n    formatDateTime(dateString) {\r\n      if (!dateString) return ''\r\n      const date = new Date(dateString)\r\n      // 添加8小时时区偏移，确保显示本地时间\r\n      const localDate = new Date(date.getTime() + 8 * 60 * 60 * 1000)\r\n      return localDate.toLocaleString('en-US', {\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        second: '2-digit',\r\n        hour12: false\r\n      })\r\n    },\r\n    \r\n    onPageChange(page) {\r\n      this.currentPage = page\r\n      // Scroll to top\r\n      this.$nextTick(() => {\r\n        const element = this.$el.querySelector('.v-card')\r\n        if (element) {\r\n          element.scrollIntoView({ behavior: 'smooth' })\r\n        }\r\n      })\r\n    },\r\n    \r\n    expandAll() {\r\n      this.expandedPanels = Array.from({ length: this.paginatedRecords.length }, (_, i) => i)\r\n    },\r\n    \r\n    collapseAll() {\r\n      this.expandedPanels = []\r\n    },\r\n    \r\n    showRevenueChart() {\r\n      this.showChartDialog = true\r\n      this.activeTab = 'daily'\r\n    },\r\n    \r\n    onRevenueDateRangeChange() {\r\n      // Auto-apply filter when both dates are selected\r\n      if (this.revenueDateRange.startDate && this.revenueDateRange.endDate) {\r\n        this.applyRevenueDateRange()\r\n      }\r\n    },\r\n    \r\n    applyRevenueDateRange() {\r\n      // Force reactivity update\r\n      this.$forceUpdate()\r\n    },\r\n    \r\n    clearRevenueDateRange() {\r\n      this.revenueDateRange.startDate = ''\r\n      this.revenueDateRange.endDate = ''\r\n      this.applyRevenueDateRange()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.v-expansion-panel-title {\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.v-list-item {\r\n  min-height: 36px;\r\n}\r\n\r\n.v-chip {\r\n  font-size: 0.75rem;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"revenue-chart\">\r\n    <v-card>\r\n      <v-card-title class=\"d-flex align-center\">\r\n        <v-icon left color=\"primary\">mdi-chart-line</v-icon>\r\n        {{ title }}\r\n        <v-spacer></v-spacer>\r\n        <v-chip color=\"success\" variant=\"outlined\">\r\n          Total: ${{ totalRevenue.toLocaleString() }}\r\n        </v-chip>\r\n      </v-card-title>\r\n      <v-card-text>\r\n        <!-- Day Selector for Daily Revenue Trend -->\r\n        <div v-if=\"type === 'daily'\" class=\"mb-4\">\r\n          <v-row align=\"center\">\r\n            <v-col cols=\"12\" md=\"6\">\r\n              <v-text-field\r\n                v-model=\"selectedDate\"\r\n                label=\"Select Day\"\r\n                type=\"date\"\r\n                prepend-icon=\"mdi-calendar\"\r\n                variant=\"outlined\"\r\n                density=\"compact\"\r\n                @update:model-value=\"onDateChange\"\r\n              ></v-text-field>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"6\">\r\n              <v-btn\r\n                color=\"primary\"\r\n                variant=\"outlined\"\r\n                @click=\"loadHourlyData\"\r\n                :loading=\"loadingHourlyData\"\r\n                :disabled=\"!selectedDate\"\r\n              >\r\n                <v-icon left>mdi-refresh</v-icon>\r\n                Load Hourly Data\r\n              </v-btn>\r\n            </v-col>\r\n          </v-row>\r\n        </div>\r\n        \r\n        <div class=\"chart-container\">\r\n          <canvas ref=\"chartCanvas\"></canvas>\r\n        </div>\r\n      </v-card-text>\r\n    </v-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Chart from 'chart.js/auto'\r\nimport { toRaw } from 'vue'\r\n\r\nexport default {\r\n  name: 'RevenueChart',\r\n  props: {\r\n    data: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    type: {\r\n      type: String,\r\n      required: true,\r\n      validator: value => ['daily', 'monthly'].includes(value)\r\n    },\r\n    title: {\r\n      type: String,\r\n      required: true\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      chart: null,\r\n      selectedDate: '',\r\n      loadingHourlyData: false,\r\n      hourlyData: [],\r\n      isUpdating: false,\r\n      chartDataSnapshot: null,\r\n      hourlyDataSnapshot: null,\r\n      updateTimeout: null\r\n    }\r\n  },\r\n  computed: {\r\n    totalRevenue() {\r\n      if (!this.data || !Array.isArray(this.data)) {\r\n        return 0\r\n      }\r\n      return this.data.reduce((sum, item) => {\r\n        const revenue = parseFloat(item.revenue)\r\n        return sum + (isNaN(revenue) ? 0 : revenue)\r\n      }, 0)\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.createChart()\r\n    })\r\n  },\r\n  beforeUnmount() {\r\n    // 清理定时器\r\n    if (this.updateTimeout) {\r\n      clearTimeout(this.updateTimeout)\r\n      this.updateTimeout = null\r\n    }\r\n    \r\n    // 销毁图表\r\n    if (this.chart) {\r\n      this.chart.destroy()\r\n      this.chart = null\r\n    }\r\n    // 清理所有快照数据\r\n    this.chartDataSnapshot = null\r\n    this.hourlyDataSnapshot = null\r\n  },\r\n  watch: {\r\n    data: {\r\n      handler(newData) {\r\n        if (!this.isUpdating) {\r\n          this.createDataSnapshot(newData)\r\n          this.$nextTick(() => {\r\n            this.updateChart()\r\n          })\r\n        }\r\n      },\r\n      deep: false\r\n    }\r\n  },\r\n  methods: {\r\n    createDataSnapshot(data) {\r\n      try {\r\n        // 使用toRaw完全去除响应式，然后深拷贝\r\n        const rawData = toRaw(data)\r\n        this.chartDataSnapshot = JSON.parse(JSON.stringify(rawData || []))\r\n      } catch (error) {\r\n        console.error('Error creating data snapshot:', error)\r\n        this.chartDataSnapshot = []\r\n      }\r\n    },\r\n\r\n    createHourlyDataSnapshot(hourlyData) {\r\n      try {\r\n        // 使用toRaw完全去除响应式，然后深拷贝\r\n        const rawHourlyData = toRaw(hourlyData)\r\n        this.hourlyDataSnapshot = JSON.parse(JSON.stringify(rawHourlyData || []))\r\n      } catch (error) {\r\n        console.error('Error creating hourly data snapshot:', error)\r\n        this.hourlyDataSnapshot = []\r\n      }\r\n    },\r\n\r\n    getChartData() {\r\n      // 使用快照数据，完全隔离响应式系统\r\n      const data = this.chartDataSnapshot || []\r\n      const hourlyData = this.hourlyDataSnapshot || []\r\n      const chartType = this.type || 'daily'\r\n\r\n      if (chartType === 'daily' && hourlyData.length > 0) {\r\n        // For daily chart with hourly data\r\n        const labels = Array.from({ length: 24 }, (_, i) => `${i}:00`)\r\n        const revenues = Array.from({ length: 24 }, (_, i) => {\r\n          const hourData = hourlyData.find(h => h.hour === i)\r\n          return hourData ? parseFloat(hourData.revenue) || 0 : 0\r\n        })\r\n\r\n        return {\r\n          labels: [...labels],\r\n          datasets: [{\r\n            label: 'Hourly Revenue',\r\n            data: [...revenues],\r\n            borderColor: '#1976d2',\r\n            backgroundColor: 'rgba(25, 118, 210, 0.1)',\r\n            borderWidth: 2,\r\n            fill: false,\r\n            tension: 0.4,\r\n            pointRadius: 4,\r\n            pointHoverRadius: 6\r\n          }]\r\n        }\r\n      }\r\n\r\n      // Original logic for monthly or daily without hourly data\r\n      if (!data || data.length === 0) {\r\n        return {\r\n          labels: [],\r\n          datasets: []\r\n        }\r\n      }\r\n\r\n      const labels = data.map(item => {\r\n        if (chartType === 'daily') {\r\n          // Handle both aggregated daily revenue data (with 'date' field) and raw sales data (with 'time' field)\r\n          let dateStr = item.date || item.time\r\n          if (!dateStr) {\r\n            return 'Invalid Date'\r\n          }\r\n          const date = new Date(dateStr)\r\n          if (isNaN(date.getTime())) {\r\n            return 'Invalid Date'\r\n          }\r\n          // 使用本地时间显示\r\n          return date.toLocaleDateString('zh-CN', {\r\n            month: 'short',\r\n            day: 'numeric'\r\n          })\r\n        } else {\r\n          return item.month || 'Unknown Month'\r\n        }\r\n      })\r\n\r\n      const revenues = data.map(item => {\r\n        // Handle both aggregated revenue data (with 'revenue' field) and raw sales data (with 'price' field)\r\n        const revenue = parseFloat(item.revenue || item.price || 0)\r\n        return isNaN(revenue) ? 0 : revenue\r\n      })\r\n\r\n      return {\r\n        labels: [...labels],\r\n        datasets: [{\r\n          label: chartType === 'daily' ? 'Daily Revenue' : 'Monthly Revenue',\r\n          data: [...revenues],\r\n          borderColor: '#1976d2',\r\n          backgroundColor: 'rgba(25, 118, 210, 0.1)',\r\n          borderWidth: 2,\r\n          fill: false,\r\n          tension: 0.4,\r\n          pointRadius: 4,\r\n          pointHoverRadius: 6\r\n        }]\r\n      }\r\n    },\r\n\r\n    getChartOptions() {\r\n      // 完全避免任何响应式引用，使用硬编码值\r\n      const chartType = this.type || 'daily'\r\n      const hasHourlyData = this.hourlyDataSnapshot && this.hourlyDataSnapshot.length > 0\r\n      const isDailyWithHourly = chartType === 'daily' && hasHourlyData\r\n      \r\n      // 创建完全隔离的配置对象\r\n      const options = {\r\n        responsive: true,\r\n        maintainAspectRatio: false,\r\n        animation: {\r\n          duration: 750,\r\n          easing: 'easeInOutQuart'\r\n        },\r\n        plugins: {\r\n          legend: {\r\n            display: true,\r\n            position: 'top'\r\n          },\r\n          tooltip: {\r\n            enabled: true,\r\n            callbacks: {\r\n              label: function(context) {\r\n                return `${context.dataset.label}: $${context.parsed.y.toLocaleString()}`\r\n              }\r\n            }\r\n          }\r\n        },\r\n        scales: {\r\n          x: {\r\n            display: true,\r\n            title: {\r\n              display: true,\r\n              text: isDailyWithHourly ? 'Time (Hours)' : (chartType === 'daily' ? 'Date' : 'Month')\r\n            },\r\n            grid: {\r\n              display: true,\r\n              color: 'rgba(0, 0, 0, 0.1)'\r\n            }\r\n          },\r\n          y: {\r\n            display: true,\r\n            title: {\r\n              display: true,\r\n              text: 'Revenue ($)'\r\n            },\r\n            grid: {\r\n              display: true,\r\n              color: 'rgba(0, 0, 0, 0.1)'\r\n            },\r\n            ticks: {\r\n              callback: function(value) {\r\n                return '$' + value.toLocaleString()\r\n              }\r\n            }\r\n          }\r\n        },\r\n        interaction: {\r\n          intersect: false,\r\n          mode: 'index'\r\n        }\r\n      }\r\n      \r\n      // 深拷贝配置对象，确保完全隔离\r\n      return JSON.parse(JSON.stringify(options))\r\n    },\r\n\r\n    createChart() {\r\n      if (!this.$refs.chartCanvas) {\r\n        console.warn('RevenueChart: Canvas element not found')\r\n        return\r\n      }\r\n      \r\n      try {\r\n        // Destroy existing chart if it exists\r\n        if (this.chart) {\r\n          this.chart.destroy()\r\n          this.chart = null\r\n        }\r\n\r\n        // 创建初始数据快照\r\n        this.createDataSnapshot(this.data)\r\n        this.createHourlyDataSnapshot(this.hourlyData)\r\n\r\n        const chartData = this.getChartData()\r\n        const chartOptions = this.getChartOptions()\r\n\r\n        if (!chartData || !chartData.labels || !chartData.datasets) {\r\n          console.warn('RevenueChart: Invalid chart data', chartData)\r\n          return\r\n        }\r\n\r\n        // 创建完全隔离的配置对象\r\n        const isolatedConfig = {\r\n          type: 'line',\r\n          data: {\r\n            labels: [...chartData.labels],\r\n            datasets: chartData.datasets.map(dataset => ({\r\n              ...dataset,\r\n              data: [...dataset.data]\r\n            }))\r\n          },\r\n          options: JSON.parse(JSON.stringify(chartOptions))\r\n        }\r\n\r\n        this.chart = new Chart(this.$refs.chartCanvas, isolatedConfig)\r\n      } catch (error) {\r\n        console.error('RevenueChart: Error creating chart:', error)\r\n      }\r\n    },\r\n    \r\n    updateChart() {\r\n      if (this.isUpdating) return\r\n      \r\n      // 清除之前的更新定时器，防止重复更新\r\n      if (this.updateTimeout) {\r\n        clearTimeout(this.updateTimeout)\r\n      }\r\n      \r\n      this.isUpdating = true\r\n      \r\n      // 使用setTimeout延迟更新，避免在响应式更新过程中立即更新图表\r\n      this.updateTimeout = setTimeout(() => {\r\n        try {\r\n          if (this.chart) {\r\n            // 更新数据快照\r\n            this.createDataSnapshot(this.data)\r\n            this.createHourlyDataSnapshot(this.hourlyData)\r\n            \r\n            const chartData = this.getChartData()\r\n            \r\n            if (!chartData || !chartData.labels || !chartData.datasets) {\r\n              console.warn('RevenueChart: Invalid update data', chartData)\r\n              this.isUpdating = false\r\n              return\r\n            }\r\n            \r\n            // 创建完全隔离的新数据对象\r\n            const isolatedLabels = [...chartData.labels]\r\n            const isolatedDatasets = chartData.datasets.map(dataset => ({\r\n              label: dataset.label,\r\n              data: [...dataset.data],\r\n              borderColor: dataset.borderColor,\r\n              backgroundColor: dataset.backgroundColor,\r\n              borderWidth: dataset.borderWidth,\r\n              fill: dataset.fill,\r\n              tension: dataset.tension,\r\n              pointRadius: dataset.pointRadius,\r\n              pointHoverRadius: dataset.pointHoverRadius\r\n            }))\r\n            \r\n            // 安全地更新图表数据，完全避免响应式引用\r\n            this.chart.data.labels = isolatedLabels\r\n            this.chart.data.datasets = isolatedDatasets\r\n            \r\n            this.chart.update('none')\r\n          } else {\r\n            // 只有在图表不存在时才创建新图表，避免递归调用\r\n            this.createChart()\r\n          }\r\n        } catch (error) {\r\n          console.error('RevenueChart: Error updating chart:', error)\r\n          // 发生错误时，销毁现有图表并重新创建\r\n          if (this.chart) {\r\n            this.chart.destroy()\r\n            this.chart = null\r\n          }\r\n          this.createChart()\r\n        } finally {\r\n          this.isUpdating = false\r\n          this.updateTimeout = null\r\n        }\r\n      }, 0)\r\n    },\r\n\r\n    onDateChange() {\r\n      // 防止在更新过程中触发新的更新\r\n      if (this.isUpdating) return\r\n      \r\n      this.hourlyData = []\r\n      if (this.selectedDate) {\r\n        this.loadHourlyData()\r\n      } else {\r\n        this.updateChart()\r\n      }\r\n    },\r\n\r\n    async loadHourlyData() {\r\n      if (!this.selectedDate || this.isUpdating) return\r\n\r\n      this.loadingHourlyData = true\r\n      try {\r\n        const hourlyData = await this.fetchHourlyRevenueData(this.selectedDate)\r\n        this.hourlyData = hourlyData\r\n        // 创建小时数据快照\r\n        this.createHourlyDataSnapshot(hourlyData)\r\n        // 使用nextTick确保数据更新完成后再更新图表\r\n        this.$nextTick(() => {\r\n          this.updateChart()\r\n        })\r\n      } catch (error) {\r\n        console.error('Failed to load hourly data:', error)\r\n        this.$emit('error', 'Failed to load hourly revenue data')\r\n      } finally {\r\n        this.loadingHourlyData = false\r\n      }\r\n    },\r\n\r\n    async fetchHourlyRevenueData(selectedDate) {\r\n      console.log('Fetching hourly data for:', selectedDate)\r\n      \r\n      try {\r\n        if (!this.data || this.data.length === 0) {\r\n          console.warn('No data available for hourly calculation')\r\n          return []\r\n        }\r\n        \r\n        // Check if this is aggregated daily revenue data (has 'date' field) or raw sales data (has 'time' field)\r\n        const isAggregatedData = this.data.some(item => item.date && !item.time)\r\n        \r\n        if (isAggregatedData) {\r\n          // For aggregated daily revenue data, we can't calculate hourly breakdown\r\n          // Return empty array or show a message that hourly data is not available\r\n          console.warn('Hourly data calculation not available for aggregated daily revenue data')\r\n          return []\r\n        }\r\n        \r\n        const selectedDateObj = new Date(selectedDate)\r\n        const startOfDay = new Date(selectedDateObj)\r\n        startOfDay.setHours(0, 0, 0, 0)\r\n        const endOfDay = new Date(selectedDateObj)\r\n        endOfDay.setHours(23, 59, 59, 999)\r\n        \r\n        const dayData = this.data.filter(item => {\r\n          if (!item.time) return false\r\n          const itemDate = new Date(item.time)\r\n          // 使用本地时间进行比较，不需要手动添加时区偏移\r\n          return itemDate >= startOfDay && itemDate <= endOfDay\r\n        })\r\n        \r\n        const hourlyMap = new Map()\r\n        for (let hour = 0; hour < 24; hour++) {\r\n          hourlyMap.set(hour, 0)\r\n        }\r\n        \r\n        dayData.forEach(item => {\r\n          if (item.time) {\r\n            const itemDate = new Date(item.time)\r\n            // 使用本地时间获取小时，不需要手动添加时区偏移\r\n            const hour = itemDate.getHours()\r\n            const revenue = parseFloat(item.price) || 0\r\n            hourlyMap.set(hour, (hourlyMap.get(hour) || 0) + revenue)\r\n          }\r\n        })\r\n        \r\n        const hourlyData = Array.from(hourlyMap.entries())\r\n          .map(([hour, revenue]) => ({\r\n            hour: hour,\r\n            revenue: Math.round(revenue * 100) / 100\r\n          }))\r\n          .sort((a, b) => a.hour - b.hour)\r\n        \r\n        return hourlyData\r\n        \r\n      } catch (error) {\r\n        console.error('Error calculating hourly data:', error)\r\n        return []\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.revenue-chart {\r\n  width: 100%;\r\n}\r\n\r\n.chart-container {\r\n  position: relative;\r\n  height: 400px;\r\n  width: 100%;\r\n}\r\n\r\ncanvas {\r\n  max-height: 400px;\r\n}\r\n</style>\r\n","import { render } from \"./RevenueChart.vue?vue&type=template&id=16daeb3a&scoped=true\"\nimport script from \"./RevenueChart.vue?vue&type=script&lang=js\"\nexport * from \"./RevenueChart.vue?vue&type=script&lang=js\"\n\nimport \"./RevenueChart.vue?vue&type=style&index=0&id=16daeb3a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-16daeb3a\"]])\n\nexport default __exports__","import { render } from \"./SalesRecordList.vue?vue&type=template&id=213be1ec&scoped=true\"\nimport script from \"./SalesRecordList.vue?vue&type=script&lang=js\"\nexport * from \"./SalesRecordList.vue?vue&type=script&lang=js\"\n\nimport \"./SalesRecordList.vue?vue&type=style&index=0&id=213be1ec&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-213be1ec\"]])\n\nexport default __exports__","import { render } from \"./SalesRecord.vue?vue&type=template&id=5fb0bc80&scoped=true\"\nimport script from \"./SalesRecord.vue?vue&type=script&lang=js\"\nexport * from \"./SalesRecord.vue?vue&type=script&lang=js\"\n\nimport \"./SalesRecord.vue?vue&type=style&index=0&id=5fb0bc80&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5fb0bc80\"]])\n\nexport default __exports__","<template>\r\n  <v-container fluid>\r\n    <v-row>\r\n      <v-col cols=\"12\">\r\n        <v-card>\r\n          <v-card-title>\r\n            <h1 class=\"text-h4\">Inventory</h1>\r\n          </v-card-title>\r\n          <v-card-text>\r\n            <v-row class=\"mb-4\" dense>\r\n              <v-col cols=\"12\" sm=\"6\" md=\"3\">\r\n                <v-text-field\r\n                  v-model=\"idFilter\"\r\n                  label=\"ID\"\r\n                  clearable\r\n                  density=\"comfortable\"\r\n                />\r\n              </v-col>\r\n              <v-col cols=\"12\" sm=\"6\" md=\"3\">\r\n                <v-text-field\r\n                  v-model=\"productFilter\"\r\n                  label=\"Product\"\r\n                  clearable\r\n                  density=\"comfortable\"\r\n                />\r\n              </v-col>\r\n              <v-col cols=\"12\" sm=\"6\" md=\"3\">\r\n                <v-text-field\r\n                  v-model=\"nameFilter\"\r\n                  label=\"Store Name\"\r\n                  clearable\r\n                  density=\"comfortable\"\r\n                />\r\n              </v-col>\r\n              <v-col cols=\"12\" sm=\"6\" md=\"3\">\r\n                <v-text-field\r\n                  v-model=\"locationFilter\"\r\n                  label=\"Store Location\"\r\n                  clearable\r\n                  density=\"comfortable\"\r\n                />\r\n              </v-col>\r\n            </v-row>\r\n            <v-data-table\r\n              :headers='headers'\r\n              :items='filteredProducts'\r\n              v-model:sort-by=\"sortBy\"\r\n            >\r\n              <template #[`item.price`]=\"{ item }\">\r\n                <span v-if=\"item.price !== null && item.price !== undefined\">\r\n                  ${{ item.price }}\r\n                </span>\r\n                <span v-else>-</span>\r\n              </template>\r\n            </v-data-table>\r\n          </v-card-text>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport supabase from '../lib/supabase'\r\n\r\nconst TABLE_NAME = 'inventory'\r\n\r\nexport default {\r\n  name: 'InventoryPage',\r\n  data(){\r\n    return {\r\n      headers:[\r\n        {title: 'ID', value: 'id'},\r\n        {title: 'Product', value: 'product'},\r\n        {title: 'Color', value: 'color'},\r\n        {title: 'Storage', value: 'storage'},\r\n        {title: 'Stock Quantity', value: 'quantity'},\r\n        {title: 'Price', value: 'price'},\r\n        {title: 'Store Name', value: 'name'},\r\n        {title: 'Store Location', value: 'location'},\r\n        {title: 'Update Time', value: 'UpdateTime'},\r\n      ],\r\n      products: [],\r\n      // filters\r\n      idFilter: '',\r\n      productFilter: '',\r\n      nameFilter: '',\r\n      locationFilter: '',\r\n      // initial sort by store name ascending\r\n      sortBy: [{ key: 'name', order: 'asc' }]\r\n    };\r\n  },\r\n  computed: {\r\n    filteredProducts(){\r\n      const idQ = String(this.idFilter || '').trim().toLowerCase()\r\n      const productQ = String(this.productFilter || '').trim().toLowerCase()\r\n      const nameQ = String(this.nameFilter || '').trim().toLowerCase()\r\n      const locationQ = String(this.locationFilter || '').trim().toLowerCase()\r\n\r\n      if (!idQ && !productQ && !nameQ && !locationQ) return this.products\r\n\r\n      return (this.products || []).filter((row) => {\r\n        const idStr = row && row.id !== undefined && row.id !== null ? String(row.id).toLowerCase() : ''\r\n        const productStr = row && row.product ? String(row.product).toLowerCase() : ''\r\n        const nameStr = row && row.name ? String(row.name).toLowerCase() : ''\r\n        const locationStr = row && row.location ? String(row.location).toLowerCase() : ''\r\n\r\n        const idOk = !idQ || idStr.includes(idQ)\r\n        const productOk = !productQ || productStr.includes(productQ)\r\n        const nameOk = !nameQ || nameStr.includes(nameQ)\r\n        const locationOk = !locationQ || locationStr.includes(locationQ)\r\n\r\n        return idOk && productOk && nameOk && locationOk\r\n      })\r\n    }\r\n  },\r\n  async mounted(){\r\n    try{\r\n      const {data, error} = await supabase\r\n      .from (TABLE_NAME)\r\n      .select('*');\r\n      if (error) throw error\r\n      this.products = data\r\n    }catch (error){\r\n      console.error('Error fetching data:', error)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import { render } from \"./Inventory.vue?vue&type=template&id=50eaf771\"\nimport script from \"./Inventory.vue?vue&type=script&lang=js\"\nexport * from \"./Inventory.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <v-container fluid>\r\n    <v-row>\r\n      <v-col cols=\"12\">\r\n        <v-card>\r\n          <v-card-title>\r\n            <h1 class=\"text-h4\">Selling</h1>\r\n          </v-card-title>\r\n          <v-card-text>\r\n            <InventorySearchPanel @change=\"onSelectionChange\" />\r\n            \r\n\r\n            <!-- Quantity Selection - Always show when selectedItem exists -->\r\n            <v-card v-if=\"selectedItem\" class=\"mt-4\" elevation=\"2\">\r\n              <v-card-title>Select Sale Quantity</v-card-title>\r\n              <v-card-text>\r\n                <v-row>\r\n                  <v-col cols=\"12\">\r\n                    <v-radio-group v-model=\"selectedQuantity\" row>\r\n                      <v-radio label=\"1\" :value=\"1\"></v-radio>\r\n                      <v-radio label=\"2\" :value=\"2\"></v-radio>\r\n                      <v-radio label=\"3\" :value=\"3\"></v-radio>\r\n                      <v-radio label=\"4\" :value=\"4\"></v-radio>\r\n                      <v-radio label=\"Custom\" :value=\"customQuantity\"></v-radio>\r\n                    </v-radio-group>\r\n                  </v-col>\r\n                  <v-col cols=\"6\" v-if=\"selectedQuantity === customQuantity\">\r\n                    <v-text-field\r\n                      v-model=\"customQuantityValue\"\r\n                      label=\"Custom Quantity\"\r\n                      type=\"number\"\r\n                      min=\"1\"\r\n                      :max=\"selectedItem.quantity\"\r\n                      outlined\r\n                    ></v-text-field>\r\n                  </v-col>\r\n                  <v-col cols=\"6\">\r\n                    <div class=\"text-h6\">\r\n                      <strong>Total Price: {{ totalPriceDisplay }}</strong>\r\n                    </div>\r\n                  </v-col>\r\n                </v-row>\r\n              </v-card-text>\r\n            </v-card>\r\n\r\n            <!-- Sell Button - Always show when selectedItem exists -->\r\n            <v-card v-if=\"selectedItem\" class=\"mt-4\" elevation=\"2\">\r\n              <v-card-text>\r\n                <v-btn\r\n                  color=\"primary\"\r\n                  size=\"large\"\r\n                  :disabled=\"!canSell\"\r\n                  :loading=\"isSelling\"\r\n                  @click=\"handleSell\"\r\n                >\r\n                  Checkout\r\n                </v-btn>\r\n                <v-btn\r\n                  class=\"ml-2\"\r\n                  color=\"secondary\"\r\n                  size=\"large\"\r\n                  :disabled=\"!canSell\"\r\n                  :loading=\"isAddingToCart\"\r\n                  @click=\"handleAddToCart\"\r\n                >\r\n                  Add to Cart\r\n                </v-btn>\r\n                <v-alert\r\n                  v-if=\"sellMessage\"\r\n                  :type=\"sellMessageType\"\r\n                  class=\"mt-2\"\r\n                >\r\n                  {{ sellMessage }}\r\n                </v-alert>\r\n              </v-card-text>\r\n            </v-card>\r\n\r\n            <!-- Cart Panel at bottom -->\r\n            <CartPanel\r\n              :items=\"cart.items\"\r\n              :loading=\"isCartProcessing\"\r\n              :estimates=\"priceEstimates\"\r\n              :total-estimate=\"totalEstimate\"\r\n              :message=\"cartMessage\"\r\n              :message-type=\"cartMessageType\"\r\n              @update-qty=\"onCartUpdateQty\"\r\n              @remove-item=\"onCartRemoveItem\"\r\n              @clear=\"onCartClear\"\r\n              @checkout=\"onCartCheckout\"\r\n              @refresh-prices=\"onRefreshEstimates\"\r\n            />\r\n          </v-card-text>\r\n        </v-card>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport InventorySearchPanel from '../components/InventorySearchPanel.vue'\r\nimport { fetchPrice, fetchQuantitySum } from '../api/inventory'\r\nimport { createSale } from '../api/sales'\r\nimport CartPanel from '../components/CartPanel.vue'\r\nimport { loadCart, addItem as cartAddItem, updateQuantity as cartUpdateQuantity, removeItem as cartRemoveItem, clearCart as cartClear } from '../lib/cart'\r\nimport { sanitizeStorageValue, getInventoryRecordId, deductInventory } from '../lib/inventoryOps'\r\n\r\nexport default {\r\n  name: 'SellingPage',\r\n  components: { InventorySearchPanel, CartPanel },\r\n  data() {\r\n    return {\r\n      selectedItem: null,\r\n      selectedQuantity: 1,\r\n      customQuantity: 'custom',\r\n      customQuantityValue: 1,\r\n      isSelling: false,\r\n      isAddingToCart: false,\r\n      sellMessage: '',\r\n      sellMessageType: 'success',\r\n      cart: { store: null, items: [] },\r\n      isCartProcessing: false,\r\n      cartMessage: '',\r\n      cartMessageType: 'success',\r\n      priceEstimates: null,\r\n      totalEstimate: null\r\n    }\r\n  },\r\n  created() {\r\n    this.cart = loadCart()\r\n  },\r\n  computed: {\r\n    actualQuantity() {\r\n      if (this.selectedQuantity === this.customQuantity) {\r\n        return parseInt(this.customQuantityValue) || 1\r\n      }\r\n      return this.selectedQuantity\r\n    },\r\n    totalPrice() {\r\n      if (!this.selectedItem || !this.selectedItem.price) return 0\r\n      return this.selectedItem.price * this.actualQuantity\r\n    },\r\n    totalPriceDisplay() {\r\n      if (!this.selectedItem || !this.selectedItem.price) return '$0'\r\n      const price = this.selectedItem.price * this.actualQuantity\r\n      return `$${price.toFixed(2)}`\r\n    },\r\n    canSell() {\r\n      return this.selectedItem && \r\n             this.selectedItem.price && \r\n             this.actualQuantity > 0 && \r\n             this.actualQuantity <= (this.selectedItem.quantity || 0)\r\n    }\r\n  },\r\n  methods: {\r\n    async onSelectionChange(payload) {\r\n      console.log('Selection changed', payload)\r\n      \r\n      // Check if we have all required fields (store, product, color)\r\n      if (payload.store && payload.product && payload.color) {\r\n        try {\r\n          // Handle storage field properly - use null instead of empty string for bigint\r\n          const storageValue = sanitizeStorageValue(payload.storage)\r\n          \r\n          // Fetch price and inventory information\r\n          const [price, quantity] = await Promise.all([\r\n            fetchPrice(payload.store, payload.product, payload.color, storageValue),\r\n            fetchQuantitySum(payload.store, payload.product, payload.color, storageValue)\r\n          ])\r\n          \r\n          this.selectedItem = {\r\n            store: payload.store,\r\n            product: payload.product,\r\n            color: payload.color,\r\n            storage: storageValue,\r\n            price: price,\r\n            quantity: quantity\r\n          }\r\n          \r\n          // Reset quantity selection\r\n          this.selectedQuantity = 1\r\n          this.customQuantityValue = 1\r\n          this.sellMessage = ''\r\n        } catch (error) {\r\n          console.error('Error fetching item details:', error)\r\n          this.sellMessage = 'Error fetching product information'\r\n          this.sellMessageType = 'error'\r\n        }\r\n      } else {\r\n        this.selectedItem = null\r\n        this.sellMessage = ''\r\n      }\r\n    },\r\n    handleAddToCart() {\r\n      if (!this.canSell) return\r\n      this.isAddingToCart = true\r\n      this.cartMessage = ''\r\n      try {\r\n        const line = {\r\n          product: this.selectedItem.product,\r\n          color: this.selectedItem.color,\r\n          storage: this.selectedItem.storage,\r\n          quantity: this.actualQuantity\r\n        }\r\n        const { cart: next, error } = cartAddItem(this.cart, this.selectedItem.store, line)\r\n        if (error) {\r\n          this.cartMessage = error\r\n          this.cartMessageType = 'error'\r\n        } else {\r\n          this.cart = next\r\n          this.cartMessage = 'Added to cart'\r\n          this.cartMessageType = 'success'\r\n        }\r\n      } catch (e) {\r\n        this.cartMessage = 'Failed to add to cart'\r\n        this.cartMessageType = 'error'\r\n      } finally {\r\n        this.isAddingToCart = false\r\n      }\r\n    },\r\n    \r\n    async handleSell() {\r\n      if (!this.canSell) return\r\n      \r\n      this.isSelling = true\r\n      this.sellMessage = ''\r\n      \r\n      try {\r\n        // Latest unit price at checkout time\r\n        const latestUnitPrice = await fetchPrice(\r\n          this.selectedItem.store,\r\n          this.selectedItem.product,\r\n          this.selectedItem.color,\r\n          this.selectedItem.storage\r\n        )\r\n        // Get the inventory record ID before deducting\r\n        const inventoryRecordId = await getInventoryRecordId({\r\n          store: this.selectedItem.store,\r\n          product: this.selectedItem.product,\r\n          color: this.selectedItem.color,\r\n          storage: this.selectedItem.storage\r\n        })\r\n        \r\n        // Create sale record with inventory ID\r\n        const saleData = {\r\n          time: new Date().toISOString(),\r\n          id: inventoryRecordId, // Use the same ID as inventory record\r\n          name: this.selectedItem.store.name,\r\n          product: this.selectedItem.product,\r\n          price: (latestUnitPrice || 0) * this.actualQuantity,\r\n          quantity: this.actualQuantity,\r\n          store_location: this.selectedItem.store.location,\r\n          color: this.selectedItem.color,\r\n          storage: sanitizeStorageValue(this.selectedItem.storage),\r\n          unit_price: latestUnitPrice\r\n        }\r\n        \r\n        await createSale(saleData)\r\n        \r\n        // Deduct inventory from the inventory table\r\n        await deductInventory({\r\n          store: this.selectedItem.store,\r\n          product: this.selectedItem.product,\r\n          color: this.selectedItem.color,\r\n          storage: this.selectedItem.storage\r\n        }, this.actualQuantity)\r\n        \r\n        this.sellMessage = `Successfully sold ${this.actualQuantity} items for $${(latestUnitPrice || 0) * this.actualQuantity}`\r\n        this.sellMessageType = 'success'\r\n        \r\n        // Refresh inventory information\r\n        const quantity = await fetchQuantitySum(\r\n          this.selectedItem.store, \r\n          this.selectedItem.product, \r\n          this.selectedItem.color, \r\n          this.selectedItem.storage\r\n        )\r\n        this.selectedItem.quantity = quantity\r\n        \r\n        // Reset quantity selection\r\n        this.selectedQuantity = 1\r\n        this.customQuantityValue = 1\r\n        \r\n      } catch (error) {\r\n        console.error('Error creating sale:', error)\r\n        this.sellMessage = 'Sale failed: ' + error.message\r\n        this.sellMessageType = 'error'\r\n      } finally {\r\n        this.isSelling = false\r\n      }\r\n    },\r\n    onCartUpdateQty({ key, quantity }) {\r\n      this.cart = cartUpdateQuantity(this.cart, key, quantity)\r\n      this.cartMessage = ''\r\n    },\r\n    onCartRemoveItem(key) {\r\n      this.cart = cartRemoveItem(this.cart, key)\r\n      this.cartMessage = ''\r\n    },\r\n    onCartClear() {\r\n      this.cart = cartClear()\r\n      this.cartMessage = ''\r\n      this.priceEstimates = null\r\n      this.totalEstimate = null\r\n    },\r\n    async onCartCheckout() {\r\n      if (!this.cart || this.cart.items.length === 0) return\r\n      this.isCartProcessing = true\r\n      this.cartMessage = ''\r\n      try {\r\n        // 先逐筆驗最新單價與可售數量\r\n        for (const item of this.cart.items) {\r\n          const [qtyAvailable] = await Promise.all([\r\n            fetchQuantitySum(this.cart.store, item.product, item.color, item.storage)\r\n          ])\r\n          if (qtyAvailable < item.quantity) {\r\n            this.cartMessage = `Insufficient inventory for ${item.product} ${item.color} ${item.storage || ''}. Available: ${qtyAvailable}, Required: ${item.quantity}`\r\n            this.cartMessageType = 'error'\r\n            return\r\n          }\r\n        }\r\n\r\n        // 逐筆結帳與扣庫存（依你的決策逐筆處理）\r\n        for (const item of this.cart.items) {\r\n          const latestUnitPrice = await fetchPrice(this.cart.store, item.product, item.color, item.storage)\r\n          const inventoryRecordId = await getInventoryRecordId({\r\n            store: this.cart.store,\r\n            product: item.product,\r\n            color: item.color,\r\n            storage: item.storage\r\n          })\r\n          const saleData = {\r\n            time: new Date().toISOString(),\r\n            id: inventoryRecordId,\r\n            name: this.cart.store.name,\r\n            product: item.product,\r\n            price: (latestUnitPrice || 0) * item.quantity,\r\n            quantity: item.quantity,\r\n            store_location: this.cart.store.location,\r\n            color: item.color,\r\n            storage: sanitizeStorageValue(item.storage),\r\n            unit_price: latestUnitPrice\r\n          }\r\n          await createSale(saleData)\r\n          await deductInventory({\r\n            store: this.cart.store,\r\n            product: item.product,\r\n            color: item.color,\r\n            storage: item.storage\r\n          }, item.quantity)\r\n        }\r\n\r\n        this.cart = cartClear()\r\n        this.cartMessage = 'Checkout completed.'\r\n        this.cartMessageType = 'success'\r\n      } catch (e) {\r\n        console.error(e)\r\n        this.cartMessage = `Checkout failed: ${e.message}`\r\n        this.cartMessageType = 'error'\r\n      } finally {\r\n        this.isCartProcessing = false\r\n      }\r\n    },\r\n    async onRefreshEstimates() {\r\n      if (!this.cart || this.cart.items.length === 0 || !this.cart.store) {\r\n        this.priceEstimates = null\r\n        this.totalEstimate = null\r\n        return\r\n      }\r\n      this.isCartProcessing = true\r\n      try {\r\n        const estimates = {}\r\n        let total = 0\r\n        for (const item of this.cart.items) {\r\n          const unit = await fetchPrice(this.cart.store, item.product, item.color, item.storage)\r\n          estimates[item.key] = unit\r\n          total += (Number(unit) || 0) * (Number(item.quantity) || 0)\r\n        }\r\n        this.priceEstimates = estimates\r\n        this.totalEstimate = total\r\n      } catch (e) {\r\n        console.error(e)\r\n        this.cartMessage = 'Failed to refresh prices'\r\n        this.cartMessageType = 'error'\r\n      } finally {\r\n        this.isCartProcessing = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","<template>\r\n  <v-card>\r\n    <v-card-text>\r\n      <v-expansion-panels v-model=\"activePanel\" variant=\"accordion\" class=\"mb-4\">\r\n        <v-expansion-panel>\r\n          <v-expansion-panel-title>Product</v-expansion-panel-title>\r\n          <v-expansion-panel-text>\r\n            <ProductSelector v-model=\"selectedProduct\" />\r\n          </v-expansion-panel-text>\r\n        </v-expansion-panel>\r\n\r\n        <v-expansion-panel v-if=\"!!selectedProduct\">\r\n          <v-expansion-panel-title>Color</v-expansion-panel-title>\r\n          <v-expansion-panel-text>\r\n            <ColorSelector :product=\"selectedProduct\" v-model=\"selectedColor\" />\r\n          </v-expansion-panel-text>\r\n        </v-expansion-panel>\r\n\r\n        <v-expansion-panel v-if=\"!!selectedColor\">\r\n          <v-expansion-panel-title>Storage</v-expansion-panel-title>\r\n          <v-expansion-panel-text>\r\n            <StorageSelector\r\n              :product=\"selectedProduct\"\r\n              :color=\"selectedColor\"\r\n              v-model=\"selectedStorage\"\r\n              @options=\"onStorageOptions\"\r\n            />\r\n          </v-expansion-panel-text>\r\n        </v-expansion-panel>\r\n\r\n        <v-expansion-panel v-if=\"!!selectedColor\">\r\n          <v-expansion-panel-title>Store</v-expansion-panel-title>\r\n          <v-expansion-panel-text>\r\n            <StoreSelector\r\n              v-model=\"selectedStore\"\r\n              :product=\"selectedProduct\"\r\n              :color=\"selectedColor\"\r\n              :storage=\"selectedStorage\"\r\n            />\r\n          </v-expansion-panel-text>\r\n        </v-expansion-panel>\r\n      </v-expansion-panels>\r\n\r\n      <v-row class=\"mt-2\">\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <v-alert v-if=\"error\" type=\"error\" density=\"comfortable\">{{ error }}</v-alert>\r\n          <v-skeleton-loader v-else-if=\"loading\" type=\"text\" />\r\n          <div v-else class=\"text-subtitle-1\">\r\n            <span v-if=\"selectedStore\">Quantity:</span>\r\n            <span v-if=\"selectedStore\" class=\"font-weight-bold ml-1\">{{ quantityDisplay }}</span>\r\n            <span v-if=\"selectedStore && selectedStorage\" class=\"ml-4\">Storage:</span>\r\n            <span v-if=\"selectedStore && selectedStorage\" class=\"font-weight-bold ml-1\">{{ selectedStorage }}GB</span>\r\n            <span v-if=\"selectedStore && price !== null && price !== undefined\" class=\"ml-4\">Price:</span>\r\n            <span v-if=\"selectedStore && price !== null && price !== undefined\" class=\"font-weight-bold ml-1\">${{ price }}</span>\r\n          </div>\r\n        </v-col>\r\n      </v-row>\r\n    </v-card-text>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nimport StoreSelector from './StoreSelector.vue'\r\nimport ProductSelector from './ProductSelector.vue'\r\nimport ColorSelector from './ColorSelector.vue'\r\nimport StorageSelector from './StorageSelector.vue'\r\nimport { fetchQuantitySum, fetchPrice } from '../api/inventory'\r\n\r\nexport default {\r\n  name: 'InventorySearchPanel',\r\n  components: { StoreSelector, ProductSelector, ColorSelector, StorageSelector },\r\n  emits: ['change'],\r\n  data() {\r\n    return {\r\n      selectedStore: null,\r\n      selectedProduct: '',\r\n      selectedColor: '',\r\n      selectedStorage: '',\r\n      loading: false,\r\n      error: '',\r\n      quantity: null,\r\n      price: null,\r\n      storageOptionsCount: 0,\r\n      activePanel: 0\r\n    }\r\n  },\r\n  computed: {\r\n    quantityDisplay() {\r\n      return this.quantity === null ? '-' : this.quantity\r\n    },\r\n    hasStoreProductColor() {\r\n      return !!this.selectedStore && !!this.selectedProduct && !!this.selectedColor\r\n    }\r\n  },\r\n  watch: {\r\n    selectedProduct() { this.resetAfterProduct(); this.emitSelection(); this.activePanel = 1 },\r\n    selectedColor() { this.resetAfterColor(); this.emitSelection(); this.activePanel = 2 },\r\n    selectedStorage() { this.emitSelection(); this.activePanel = 3 },\r\n    selectedStore() { this.triggerQuery(); this.activePanel = 3 }\r\n  },\r\n  methods: {\r\n    onStorageOptions(count) {\r\n      this.storageOptionsCount = count\r\n    },\r\n    resetAfterProduct() {\r\n      this.selectedColor = ''\r\n      this.selectedStorage = ''\r\n      this.selectedStore = null\r\n      this.storageOptionsCount = 0\r\n      this.quantity = null\r\n      this.price = null\r\n    },\r\n    resetAfterColor() {\r\n      this.selectedStorage = ''\r\n      this.selectedStore = null\r\n      this.storageOptionsCount = 0\r\n      this.quantity = null\r\n      this.price = null\r\n    },\r\n    emitSelection() {\r\n      this.$emit('change', {\r\n        store: this.selectedStore,\r\n        product: this.selectedProduct,\r\n        color: this.selectedColor,\r\n        storage: this.selectedStorage\r\n      })\r\n    },\r\n    async triggerQuery() {\r\n      this.emitSelection()\r\n\r\n      if (!this.selectedStore || !this.selectedProduct || !this.selectedColor) {\r\n        this.quantity = null\r\n        this.price = null\r\n        return\r\n      }\r\n\r\n      this.loading = true\r\n      this.error = ''\r\n      try {\r\n        const [qty, price] = await Promise.all([\r\n          fetchQuantitySum(this.selectedStore, this.selectedProduct, this.selectedColor, this.selectedStorage),\r\n          fetchPrice(this.selectedStore, this.selectedProduct, this.selectedColor, this.selectedStorage)\r\n        ])\r\n        this.quantity = qty\r\n        this.price = price\r\n      } catch (err) {\r\n        this.error = 'Failed to load data'\r\n        // eslint-disable-next-line no-console\r\n        console.error(err)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n\r\n","<template>\r\n  <v-autocomplete\r\n    :items=\"storeItems\"\r\n    :loading=\"loading\"\r\n    :model-value=\"modelValue\"\r\n    item-title=\"label\"\r\n    item-value=\"value\"\r\n    label=\"Store\"\r\n    placeholder=\"Select a store\"\r\n    clearable\r\n    @update:model-value=\"onUpdate\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { fetchDistinctStores, fetchStoresByProductColorStorage } from '../api/inventory'\r\n\r\nexport default {\r\n  name: 'StoreSelector',\r\n  props: {\r\n    modelValue: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    product: { type: String, default: '' },\r\n    color: { type: String, default: '' },\r\n    storage: { type: [String, Number], default: '' }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      storeItems: []\r\n    }\r\n  },\r\n  methods: {\r\n    onUpdate(val) {\r\n      this.$emit('update:modelValue', val)\r\n    },\r\n    async loadStores() {\r\n      this.loading = true\r\n      try {\r\n        const allStores = await fetchDistinctStores()\r\n\r\n        // Build a quick lookup for selection-supported stores (present rows) and availability by quantity\r\n        let presenceMap = new Map()\r\n        if (this.product && this.color) {\r\n          const storesForSelection = await fetchStoresByProductColorStorage(this.product, this.color, this.storage)\r\n          for (const s of storesForSelection) {\r\n            const key = `${String(s.name).trim().replace(/\\s+/g, ' ').toLowerCase()}__${String(s.location).trim().replace(/\\s+/g, ' ').toLowerCase()}`\r\n            presenceMap.set(key, { hasProduct: true, available: s.available })\r\n          }\r\n        }\r\n\r\n        const normalizeKey = (n, l) => `${String(n).trim().replace(/\\s+/g, ' ').toLowerCase()}__${String(l).trim().replace(/\\s+/g, ' ').toLowerCase()}`\r\n        const storeMap = new Map()\r\n        \r\n        // Process each store and ensure no duplicates\r\n        for (const s of allStores) {\r\n          const key = normalizeKey(s.name, s.location)\r\n          \r\n          // Skip if we already processed this store\r\n          if (storeMap.has(key)) {\r\n            continue\r\n          }\r\n          \r\n          const presence = presenceMap.get(key)\r\n          const hasProduct = presence?.hasProduct === true\r\n          const hasInventory = presence?.available === true\r\n          const cleanName = String(s.name).trim().replace(/\\s+/g, ' ')\r\n          const cleanLocation = String(s.location).trim().replace(/\\s+/g, ' ')\r\n          \r\n          let label = `${cleanName} — ${cleanLocation}`\r\n          if (this.product && this.color) {\r\n            if (!hasProduct) {\r\n              label = `(not available) ${label}`\r\n            } else if (!hasInventory) {\r\n              label = `(no available) ${label}`\r\n            }\r\n          }\r\n          \r\n          const value = { name: cleanName, location: cleanLocation }\r\n          const item = {\r\n            label,\r\n            value,\r\n            disabled: this.product && this.color ? !hasProduct : false\r\n          }\r\n          \r\n          storeMap.set(key, item)\r\n        }\r\n        \r\n        this.storeItems = Array.from(storeMap.values())\r\n      } catch (err) {\r\n        // eslint-disable-next-line no-console\r\n        console.error('Failed to load stores', err)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadStores()\r\n  },\r\n  watch: {\r\n    product() { this.loadStores() },\r\n    color() { this.loadStores() },\r\n    storage() { this.loadStores() }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n\r\n","import supabase from '../lib/supabase'\r\n\r\nconst TABLE_NAME = 'inventory'\r\n\r\nexport async function fetchDistinctStores() {\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('name, location')\r\n    .not('name', 'is', null)\r\n    .not('location', 'is', null)\r\n\r\n  if (error) throw error\r\n\r\n  const seen = new Set()\r\n  const stores = []\r\n  const collapse = s => String(s).trim().replace(/\\s+/g, ' ')\r\n  for (const row of data) {\r\n    const name = collapse(row.name)\r\n    const location = collapse(row.location)\r\n    const key = `${name.toLowerCase()}__${location.toLowerCase()}`\r\n    if (!seen.has(key)) {\r\n      seen.add(key)\r\n      stores.push({\r\n        name,\r\n        location,\r\n        label: `${name} — ${location}`\r\n      })\r\n    }\r\n  }\r\n  return stores.sort((a, b) => a.label.localeCompare(b.label))\r\n}\r\n\r\n// New: fetch distinct products across all stores\r\nexport async function fetchDistinctProducts() {\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('product')\r\n    .not('product', 'is', null)\r\n\r\n  if (error) throw error\r\n\r\n  const set = new Set((data || []).map(r => String(r.product).trim().toLowerCase()))\r\n  return Array.from(set).sort()\r\n}\r\n\r\n// New: fetch distinct colors across all stores for a given product\r\nexport async function fetchColorsByProduct(product) {\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('color')\r\n    .ilike('product', product)\r\n    .not('color', 'is', null)\r\n\r\n  if (error) throw error\r\n\r\n  const set = new Set((data || []).map(r => String(r.color).trim().toLowerCase()))\r\n  return Array.from(set).sort()\r\n}\r\n\r\n// New: fetch distinct storages across all stores for a given product+color\r\nexport async function fetchStoragesByProductColor(product, color) {\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('storage')\r\n    .ilike('product', product)\r\n    .ilike('color', color)\r\n    .not('storage', 'is', null)\r\n\r\n  if (error) throw error\r\n\r\n  const set = new Set((data || []).map(r => String(r.storage).trim()))\r\n  return Array.from(set).sort((a, b) => Number(a) - Number(b))\r\n}\r\n\r\n// New: fetch stores for a given product/color/storage with availability flag\r\nexport async function fetchStoresByProductColorStorage(product, color, storage) {\r\n  let query = supabase\r\n    .from(TABLE_NAME)\r\n    .select('name, location, quantity')\r\n    .ilike('product', product)\r\n    .ilike('color', color)\r\n\r\n  if (storage !== undefined && storage !== null && storage !== '') {\r\n    const storageNumber = Number(storage)\r\n    query = Number.isNaN(storageNumber)\r\n      ? query.eq('storage', String(storage))\r\n      : query.eq('storage', storageNumber)\r\n  } else {\r\n    query = query.or('storage.is.null,storage.eq.0')\r\n  }\r\n\r\n  const { data, error } = await query\r\n\r\n  if (error) throw error\r\n\r\n  const collapse = s => String(s).trim().replace(/\\s+/g, ' ')\r\n  const aggregate = new Map()\r\n  for (const row of data || []) {\r\n    const name = collapse(row.name)\r\n    const location = collapse(row.location)\r\n    const key = `${name.toLowerCase()}__${location.toLowerCase()}`\r\n    const prev = aggregate.get(key) || 0\r\n    const n = Number(row.quantity)\r\n    aggregate.set(key, prev + (Number.isNaN(n) ? 0 : n))\r\n  }\r\n\r\n  const results = []\r\n  for (const [key, total] of aggregate.entries()) {\r\n    const [nameLower, locationLower] = key.split('__')\r\n    // We need to restore the original case by finding it from the original data\r\n    const originalRow = data.find(row => \r\n      collapse(row.name).toLowerCase() === nameLower && \r\n      collapse(row.location).toLowerCase() === locationLower\r\n    )\r\n    const name = originalRow ? collapse(originalRow.name) : nameLower\r\n    const location = originalRow ? collapse(originalRow.location) : locationLower\r\n    const available = total > 0\r\n    const baseLabel = `${name} — ${location}`\r\n    const label = available ? baseLabel : `(no available) ${baseLabel}`\r\n    results.push({ name, location, label, available })\r\n  }\r\n  return results.sort((a, b) => a.label.localeCompare(b.label))\r\n}\r\n\r\nexport async function fetchProductsByStore(store) {\r\n  const { name, location } = store\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('product')\r\n    .eq('name', name)\r\n    .eq('location', location)\r\n    .not('product', 'is', null)\r\n\r\n  if (error) throw error\r\n\r\n  const set = new Set(data.map(r => String(r.product).trim().toLowerCase()))\r\n  return Array.from(set).sort()\r\n}\r\n\r\nexport async function fetchColorsByStoreAndProduct(store, product) {\r\n  const { name, location } = store\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('color')\r\n    .eq('name', name)\r\n    .eq('location', location)\r\n    .ilike('product', product)\r\n    .not('color', 'is', null)\r\n\r\n  if (error) throw error\r\n\r\n  const set = new Set(data.map(r => String(r.color).trim().toLowerCase()))\r\n  return Array.from(set).sort()\r\n}\r\n\r\nexport async function fetchStoragesByStoreProductColor(store, product, color) {\r\n  const { name, location } = store\r\n  const { data, error } = await supabase\r\n    .from(TABLE_NAME)\r\n    .select('storage')\r\n    .eq('name', name)\r\n    .eq('location', location)\r\n    .ilike('product', product)\r\n    .ilike('color', color)\r\n    .not('storage', 'is', null)\r\n\r\n  if (error) throw error\r\n\r\n  const set = new Set(\r\n    (data || []).map(r => String(r.storage).trim())\r\n  )\r\n  // sort numeric ascending when possible\r\n  return Array.from(set).sort((a, b) => Number(a) - Number(b))\r\n}\r\n\r\nexport async function fetchQuantitySum(store, product, color, storage) {\r\n  const { name, location } = store\r\n  let query = supabase\r\n    .from(TABLE_NAME)\r\n    .select('quantity')\r\n    .eq('name', name)\r\n    .eq('location', location)\r\n    .ilike('product', product)\r\n    .ilike('color', color)\r\n\r\n  if (storage !== undefined && storage !== null && storage !== '') {\r\n    const storageNumber = Number(storage)\r\n    query = Number.isNaN(storageNumber)\r\n      ? query.eq('storage', String(storage))\r\n      : query.eq('storage', storageNumber)\r\n  } else {\r\n    // If no storage specified, match records where storage is null or 0\r\n    query = query.or('storage.is.null,storage.eq.0')\r\n  }\r\n\r\n  const { data, error } = await query\r\n\r\n  if (error) throw error\r\n\r\n  let total = 0\r\n  for (const row of data || []) {\r\n    const n = Number(row.quantity)\r\n    if (!Number.isNaN(n)) total += n\r\n  }\r\n  return total\r\n}\r\n\r\nexport async function fetchPrice(store, product, color, storage) {\r\n  const { name, location } = store\r\n  let query = supabase\r\n    .from(TABLE_NAME)\r\n    .select('price')\r\n    .eq('name', name)\r\n    .eq('location', location)\r\n    .ilike('product', product)\r\n    .ilike('color', color)\r\n\r\n  if (storage !== undefined && storage !== null && storage !== '') {\r\n    const storageNumber = Number(storage)\r\n    query = Number.isNaN(storageNumber)\r\n      ? query.eq('storage', String(storage))\r\n      : query.eq('storage', storageNumber)\r\n  } else {\r\n    // If no storage specified, match records where storage is null or 0\r\n    query = query.or('storage.is.null,storage.eq.0')\r\n  }\r\n\r\n  const { data, error } = await query\r\n\r\n  if (error) throw error\r\n\r\n  // 返回第一個找到的價格，如果沒有則返回 null\r\n  if (data && data.length > 0) {\r\n    return data[0].price\r\n  }\r\n  return null\r\n}\r\n\r\nexport default {\r\n  fetchDistinctStores,\r\n  fetchDistinctProducts,\r\n  fetchColorsByProduct,\r\n  fetchStoragesByProductColor,\r\n  fetchStoresByProductColorStorage,\r\n  fetchProductsByStore,\r\n  fetchColorsByStoreAndProduct,\r\n  fetchStoragesByStoreProductColor,\r\n  fetchQuantitySum,\r\n  fetchPrice\r\n}\r\n\r\n\r\n","import { render } from \"./StoreSelector.vue?vue&type=template&id=1407a53e\"\nimport script from \"./StoreSelector.vue?vue&type=script&lang=js\"\nexport * from \"./StoreSelector.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <v-autocomplete\r\n    :disabled=\"false\"\r\n    :items=\"items\"\r\n    :loading=\"loading\"\r\n    :model-value=\"modelValue\"\r\n    label=\"Product\"\r\n    placeholder=\"Select a product\"\r\n    clearable\r\n    @update:model-value=\"$emit('update:modelValue', $event)\"\r\n  />\r\n  \r\n</template>\r\n\r\n<script>\r\nimport { fetchDistinctProducts } from '../api/inventory'\r\n\r\nexport default {\r\n  name: 'ProductSelector',\r\n  props: {\r\n    modelValue: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    store: { // kept for compatibility, unused in new flow\r\n      type: Object,\r\n      default: null\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      items: []\r\n    }\r\n  },\r\n  watch: {\r\n    modelValue() {},\r\n  },\r\n  mounted() {\r\n    this.load()\r\n  },\r\n  methods: {\r\n    async load() {\r\n      this.loading = true\r\n      try {\r\n        const products = await fetchDistinctProducts()\r\n        this.items = products.length > 0 ? products : ['(not available)']\r\n      } catch (err) {\r\n        // eslint-disable-next-line no-console\r\n        console.error('Failed to load products', err)\r\n        this.items = ['(not available)']\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n\r\n","import { render } from \"./ProductSelector.vue?vue&type=template&id=b76fc30a\"\nimport script from \"./ProductSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ProductSelector.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <v-autocomplete\r\n    :disabled=\"!product\"\r\n    :items=\"items\"\r\n    :loading=\"loading\"\r\n    :model-value=\"modelValue\"\r\n    label=\"Color\"\r\n    placeholder=\"Select a color\"\r\n    clearable\r\n    @update:model-value=\"$emit('update:modelValue', $event)\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { fetchColorsByProduct } from '../api/inventory'\r\n\r\nexport default {\r\n  name: 'ColorSelector',\r\n  props: {\r\n    modelValue: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    store: { // kept for compatibility, unused in new flow\r\n      type: Object,\r\n      default: null\r\n    },\r\n    product: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      items: []\r\n    }\r\n  },\r\n  watch: {\r\n    product: {\r\n      handler() { this.load() },\r\n      immediate: true\r\n    }\r\n  },\r\n  methods: {\r\n    async load() {\r\n      if (!this.product) {\r\n        this.items = []\r\n        return\r\n      }\r\n      this.loading = true\r\n      try {\r\n        const colors = await fetchColorsByProduct(this.product)\r\n        this.items = (colors && colors.length) ? colors : ['(not available)']\r\n      } catch (err) {\r\n        // eslint-disable-next-line no-console\r\n        console.error('Failed to load colors', err)\r\n        this.items = ['(not available)']\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n\r\n","import { render } from \"./ColorSelector.vue?vue&type=template&id=0ecbbb45\"\nimport script from \"./ColorSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ColorSelector.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <v-autocomplete\r\n    :disabled=\"!product || !color\"\r\n    :items=\"displayItems\"\r\n    :loading=\"loading\"\r\n    :model-value=\"modelValue\"\r\n    item-title=\"label\"\r\n    item-value=\"value\"\r\n    label=\"Storage\"\r\n    placeholder=\"Select storage\"\r\n    clearable\r\n    @update:model-value=\"$emit('update:modelValue', $event)\"\r\n  />\r\n</template>\r\n\r\n<script>\r\nimport { fetchStoragesByProductColor } from '../api/inventory'\r\n\r\nexport default {\r\n  name: 'StorageSelector',\r\n  props: {\r\n    modelValue: {\r\n      type: [String, Number],\r\n      default: ''\r\n    },\r\n    store: { type: Object, default: null }, // kept for compatibility, unused in new flow\r\n    product: { type: String, default: '' },\r\n    color: { type: String, default: '' }\r\n  },\r\n  emits: ['update:modelValue', 'options'],\r\n  data() {\r\n    return {\r\n      loading: false,\r\n      items: []\r\n    }\r\n  },\r\n  computed: {\r\n    displayItems() {\r\n      return this.items.map(v => (\r\n        v === '(not available)'\r\n          ? { label: '(not available)', value: '' }\r\n          : { label: `${v}GB`, value: v }\r\n      ))\r\n    }\r\n  },\r\n  watch: {\r\n    product: { handler() { this.load() }, immediate: true },\r\n    color() { this.load() }\r\n  },\r\n  methods: {\r\n    async load() {\r\n      if (!this.product || !this.color) {\r\n        this.items = []\r\n        this.$emit('options', 0)\r\n        return\r\n      }\r\n      this.loading = true\r\n      try {\r\n        const storages = await fetchStoragesByProductColor(this.product, this.color)\r\n        this.items = (storages && storages.length) ? storages : ['(not available)']\r\n        this.$emit('options', this.items.length)\r\n        if (this.items.length === 0) {\r\n          // 清空已选存储，避免卡住查询\r\n          this.$emit('update:modelValue', '')\r\n        }\r\n      } catch (err) {\r\n        // eslint-disable-next-line no-console\r\n        console.error('Failed to load storages', err)\r\n        this.items = ['(not available)']\r\n        this.$emit('options', 1)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n\r\n","import { render } from \"./StorageSelector.vue?vue&type=template&id=1fcb3a55\"\nimport script from \"./StorageSelector.vue?vue&type=script&lang=js\"\nexport * from \"./StorageSelector.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./InventorySearchPanel.vue?vue&type=template&id=113d676d\"\nimport script from \"./InventorySearchPanel.vue?vue&type=script&lang=js\"\nexport * from \"./InventorySearchPanel.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <v-card class=\"mt-4\" elevation=\"2\">\r\n    <v-card-title>\r\n      Cart\r\n      <v-spacer />\r\n      <v-btn class=\"mr-2\" color=\"primary\" variant=\"text\" :disabled=\"items.length === 0 || loading\" @click=\"$emit('refresh-prices')\">Refresh Prices</v-btn>\r\n      <v-btn color=\"error\" variant=\"text\" :disabled=\"items.length === 0\" @click=\"$emit('clear')\">Clear</v-btn>\r\n    </v-card-title>\r\n    <v-card-text>\r\n      <div v-if=\"items.length === 0\" class=\"text-body-2\">Cart is empty</div>\r\n      <v-table v-else density=\"comfortable\">\r\n        <thead>\r\n          <tr>\r\n            <th class=\"text-left\">Product</th>\r\n            <th class=\"text-left\">Color</th>\r\n            <th class=\"text-left\">Storage</th>\r\n            <th class=\"text-left\" v-if=\"hasEstimates\">Unit Price</th>\r\n            <th class=\"text-left\" v-if=\"hasEstimates\">Subtotal</th>\r\n            <th class=\"text-left\" style=\"width: 140px;\">Qty</th>\r\n            <th class=\"text-left\" style=\"width: 80px;\"></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"item in items\" :key=\"item.key\">\r\n            <td>{{ item.product }}</td>\r\n            <td>{{ item.color }}</td>\r\n            <td>{{ item.storage || '-' }}</td>\r\n            <td v-if=\"hasEstimates\">{{ displayUnitPrice(item.key) }}</td>\r\n            <td v-if=\"hasEstimates\">{{ displaySubtotal(item.key, item.quantity) }}</td>\r\n            <td>\r\n              <v-text-field\r\n                type=\"number\"\r\n                min=\"1\"\r\n                density=\"compact\"\r\n                variant=\"outlined\"\r\n                hide-details\r\n                :model-value=\"item.quantity\"\r\n                @update:model-value=\"v => onUpdateQty(item.key, v)\"\r\n              />\r\n            </td>\r\n            <td>\r\n              <v-btn color=\"error\" variant=\"text\" icon=\"mdi-delete\" @click=\"$emit('remove-item', item.key)\" />\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </v-table>\r\n      <div class=\"mt-4 d-flex align-center\">\r\n        <div class=\"text-body-2 mr-2\">\r\n          Prices are estimated and finalized at checkout\r\n          <span v-if=\"hasEstimates && totalEstimate !== null\"> — Estimated Total: {{ displayCurrency(totalEstimate) }}</span>\r\n        </div>\r\n        <v-spacer />\r\n        <v-btn color=\"primary\" :disabled=\"items.length === 0 || loading\" :loading=\"loading\" @click=\"$emit('checkout')\">Checkout Cart</v-btn>\r\n      </div>\r\n      <v-alert v-if=\"message\" :type=\"messageType\" class=\"mt-3\">{{ message }}</v-alert>\r\n    </v-card-text>\r\n  </v-card>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'CartPanel',\r\n  props: {\r\n    items: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    loading: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    estimates: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    totalEstimate: {\r\n      type: Number,\r\n      default: null\r\n    },\r\n    message: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    messageType: {\r\n      type: String,\r\n      default: 'success'\r\n    }\r\n  },\r\n  emits: ['update-qty', 'remove-item', 'clear', 'checkout', 'refresh-prices'],\r\n  computed: {\r\n    hasEstimates() {\r\n      return !!this.estimates\r\n    }\r\n  },\r\n  methods: {\r\n    onUpdateQty(key, value) {\r\n      const n = parseInt(value, 10)\r\n      this.$emit('update-qty', { key, quantity: Number.isNaN(n) ? 1 : n })\r\n    },\r\n    displayCurrency(n) {\r\n      const num = Number(n) || 0\r\n      return `$${num.toFixed(2)}`\r\n    },\r\n    displayUnitPrice(key) {\r\n      if (!this.estimates || this.estimates[key] === undefined || this.estimates[key] === null) return '-'\r\n      return this.displayCurrency(this.estimates[key])\r\n    },\r\n    displaySubtotal(key, qty) {\r\n      if (!this.estimates || this.estimates[key] === undefined || this.estimates[key] === null) return '-'\r\n      const unit = Number(this.estimates[key]) || 0\r\n      const q = Number(qty) || 0\r\n      return this.displayCurrency(unit * q)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\r\n\r\n","import { render } from \"./CartPanel.vue?vue&type=template&id=2bbf603c\"\nimport script from \"./CartPanel.vue?vue&type=script&lang=js\"\nexport * from \"./CartPanel.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// 購物車持久化與操作工具\r\n\r\nconst CART_STORAGE_KEY = 'app_cart'\r\n\r\nfunction normalizeStorageKey(storage) {\r\n  if (storage === undefined || storage === null || storage === '') return 'NULL'\r\n  return String(storage)\r\n}\r\n\r\nexport function loadCart() {\r\n  try {\r\n    const raw = localStorage.getItem(CART_STORAGE_KEY)\r\n    if (!raw) return { store: null, items: [] }\r\n    const parsed = JSON.parse(raw)\r\n    if (!parsed || typeof parsed !== 'object') return { store: null, items: [] }\r\n    return { store: parsed.store || null, items: Array.isArray(parsed.items) ? parsed.items : [] }\r\n  } catch (e) {\r\n    return { store: null, items: [] }\r\n  }\r\n}\r\n\r\nexport function saveCart(cart) {\r\n  localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart))\r\n}\r\n\r\nexport function clearCart() {\r\n  const empty = { store: null, items: [] }\r\n  saveCart(empty)\r\n  return empty\r\n}\r\n\r\nexport function getCartStore(cart) {\r\n  return cart && cart.store ? cart.store : null\r\n}\r\n\r\nexport function addItem(cart, store, line) {\r\n  // 同店限制\r\n  if (cart.items.length > 0) {\r\n    const { name, location } = cart.store || {}\r\n    if (!store || store.name !== name || store.location !== location) {\r\n      return { cart, error: 'Cart only allows items from the same store.' }\r\n    }\r\n  }\r\n\r\n  const storageKey = normalizeStorageKey(line.storage)\r\n  const key = `${String(line.product).toLowerCase()}|${String(line.color).toLowerCase()}|${storageKey}`\r\n\r\n  const next = { store: cart.items.length === 0 ? store : cart.store, items: [...cart.items] }\r\n\r\n  const idx = next.items.findIndex(i => i.key === key)\r\n  if (idx >= 0) {\r\n    const existing = next.items[idx]\r\n    next.items.splice(idx, 1, { ...existing, quantity: Number(existing.quantity) + Number(line.quantity) })\r\n  } else {\r\n    next.items.push({\r\n      key,\r\n      product: line.product,\r\n      color: line.color,\r\n      storage: line.storage,\r\n      quantity: Number(line.quantity)\r\n    })\r\n  }\r\n\r\n  saveCart(next)\r\n  return { cart: next }\r\n}\r\n\r\nexport function updateQuantity(cart, lineKey, quantity) {\r\n  const qty = Math.max(0, Number(quantity) || 0)\r\n  const next = { store: cart.store, items: cart.items.map(i => (i.key === lineKey ? { ...i, quantity: qty } : i)) }\r\n  // 移除 0 量\r\n  const filtered = { store: next.store, items: next.items.filter(i => i.quantity > 0) }\r\n  if (filtered.items.length === 0) filtered.store = null\r\n  saveCart(filtered)\r\n  return filtered\r\n}\r\n\r\nexport function removeItem(cart, lineKey) {\r\n  const next = { store: cart.store, items: cart.items.filter(i => i.key !== lineKey) }\r\n  if (next.items.length === 0) next.store = null\r\n  saveCart(next)\r\n  return next\r\n}\r\n\r\nexport default {\r\n  loadCart,\r\n  saveCart,\r\n  clearCart,\r\n  getCartStore,\r\n  addItem,\r\n  updateQuantity,\r\n  removeItem\r\n}\r\n\r\n\r\n","import supabase from './supabase'\r\n\r\nexport function sanitizeStorageValue(storage) {\r\n  if (storage === '' || storage === null || storage === undefined) {\r\n    return null\r\n  }\r\n  return storage\r\n}\r\n\r\nexport async function getInventoryRecordId({ store, product, color, storage }) {\r\n  const { name, location } = store\r\n  let query = supabase\r\n    .from('inventory')\r\n    .select('id')\r\n    .eq('name', name)\r\n    .eq('location', location)\r\n    .ilike('product', product)\r\n    .ilike('color', color)\r\n\r\n  const sanitizedStorage = sanitizeStorageValue(storage)\r\n  if (sanitizedStorage !== null) {\r\n    const storageNumber = Number(sanitizedStorage)\r\n    query = Number.isNaN(storageNumber)\r\n      ? query.eq('storage', String(sanitizedStorage))\r\n      : query.eq('storage', storageNumber)\r\n  } else {\r\n    query = query.or('storage.is.null,storage.eq.')\r\n  }\r\n\r\n  const { data, error } = await query\r\n  if (error) throw error\r\n  if (!data || data.length === 0) {\r\n    throw new Error(`No inventory record found for ${product} ${color} ${storage ? storage + 'GB' : 'no storage'}`)\r\n  }\r\n  return data[0].id\r\n}\r\n\r\nexport async function deductInventory({ store, product, color, storage }, quantity) {\r\n  const { name, location } = store\r\n  let query = supabase\r\n    .from('inventory')\r\n    .select('*')\r\n    .eq('name', name)\r\n    .eq('location', location)\r\n    .ilike('product', product)\r\n    .ilike('color', color)\r\n\r\n  const sanitizedStorage = sanitizeStorageValue(storage)\r\n  if (sanitizedStorage !== null) {\r\n    const storageNumber = Number(sanitizedStorage)\r\n    query = Number.isNaN(storageNumber)\r\n      ? query.eq('storage', String(sanitizedStorage))\r\n      : query.eq('storage', storageNumber)\r\n  } else {\r\n    query = query.or('storage.is.null,storage.eq.')\r\n  }\r\n\r\n  const { data: records, error: fetchError } = await query\r\n  if (fetchError) throw fetchError\r\n  if (!records || records.length === 0) {\r\n    throw new Error(`No inventory records found for ${product} ${color} ${storage ? storage + 'GB' : 'no storage'}`)\r\n  }\r\n\r\n  let totalAvailable = 0\r\n  for (const record of records) {\r\n    totalAvailable += Number(record.quantity) || 0\r\n  }\r\n  if (totalAvailable < quantity) {\r\n    throw new Error(`Insufficient inventory. Available: ${totalAvailable}, Required: ${quantity}`)\r\n  }\r\n\r\n  let remaining = quantity\r\n  for (const record of records) {\r\n    if (remaining <= 0) break\r\n    const currentQuantity = Number(record.quantity) || 0\r\n    const deduct = Math.min(remaining, currentQuantity)\r\n    if (deduct > 0) {\r\n      const newQuantity = currentQuantity - deduct\r\n      const { error: updateError } = await supabase\r\n        .from('inventory')\r\n        .update({ quantity: newQuantity })\r\n        .eq('id', record.id)\r\n        .eq('name', record.name)\r\n        .eq('location', record.location)\r\n      if (updateError) throw updateError\r\n      remaining -= deduct\r\n    }\r\n  }\r\n\r\n  if (remaining > 0) {\r\n    throw new Error('Insufficient inventory to complete the sale')\r\n  }\r\n}\r\n\r\nexport default {\r\n  sanitizeStorageValue,\r\n  getInventoryRecordId,\r\n  deductInventory\r\n}\r\n\r\n\r\n","import { render } from \"./Selling.vue?vue&type=template&id=2379b2ea\"\nimport script from \"./Selling.vue?vue&type=script&lang=js\"\nexport * from \"./Selling.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createRouter, createWebHistory } from 'vue-router'\r\nimport SalesRecord from '../views/SalesRecord.vue'\r\nimport Inventory from '../views/Inventory.vue'\r\nimport Selling from '../views/Selling.vue'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    redirect: '/selling'\r\n  },\r\n  {\r\n    path: '/sales-record',\r\n    name: 'SalesRecord',\r\n    component: SalesRecord\r\n  },\r\n  {\r\n    path: '/inventory',\r\n    name: 'Inventory',\r\n    component: Inventory\r\n  },\r\n  {\r\n    path: '/selling',\r\n    name: 'Selling',\r\n    component: Selling\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(),\r\n  routes\r\n})\r\n\r\nexport default router\r\n","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport { createVuetify } from 'vuetify'\r\nimport 'vuetify/styles'\r\nimport '@mdi/font/css/materialdesignicons.css'\r\nimport * as components from 'vuetify/components'\r\nimport * as directives from 'vuetify/directives'\r\nimport router from './router'\r\n\r\nconst vuetify = createVuetify({\r\n  components,\r\n  directives,\r\n})\r\n\r\nconst app = createApp(App)\r\n\r\napp.use(vuetify)\r\napp.use(router)\r\n\r\napp.mount('#app')\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkinventory_management_system\"] = self[\"webpackChunkinventory_management_system\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(9636); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createBlock","_component_v_app","_createVNode","_component_v_app_bar","color","dark","prominent","_component_v_toolbar_title","_cache","_component_v_spacer","_component_v_btn","to","name","variant","class","_component_v_icon","left","icon","_component_v_main","_component_router_view","__exports__","render","_component_v_container","fluid","_component_v_row","_component_v_col","cols","_component_v_card","_component_v_card_title","size","_createElementVNode","onClick","$options","refreshData","loading","$data","isRefreshing","_component_v_card_text","_component_SalesRecordFilters","onFiltersChange","onError","onFilterError","_component_SalesRecordList","salesRecords","stats","salesStats","error","_component_v_dialog","showErrorDialog","$event","errorDialogMessage","_component_v_card_actions","md","_component_v_select","dateFilterType","items","dateFilterOptions","label","outlined","dense","onChange","onDateFilterTypeChange","_component_v_text_field","firstDate","onTwoDaysChange","type","max","Date","toISOString","split","secondDate","_component_v_combobox","selectedProducts","availableProducts","loadingProducts","placeholder","multiple","chips","clearable","selectedStoreNames","availableStoreNames","loadingStoreNames","resetFilters","applyFilters","SUPABASE_URL","process","SUPABASE_ANON_KEY","console","supabase","createClient","TABLE_NAME","async","createSale","saleData","data","from","insert","select","fetchSalesWithFilters","filters","query","dateRange","length","startDate","setHours","endDate","gte","lte","products","in","storeNames","order","ascending","limit","offset","range","fetchDistinctProducts","uniqueProducts","Set","map","item","product","fetchDistinctStoreNames","uniqueStoreNames","fetchSalesStats","totalRecords","totalRevenue","reduce","sum","record","price","totalQuantity","quantity","dailyRevenue","calculateDailyRevenue","monthlyRevenue","calculateMonthlyRevenue","Array","isArray","warn","dailyMap","Map","forEach","index","time","date","isNaN","getTime","dateKey","parseFloat","currentRevenue","get","set","result","entries","revenue","Math","round","sort","a","b","monthlyMap","monthKey","getFullYear","String","getMonth","padStart","has","month","localeCompare","emits","title","value","mounted","this","loadFilterOptions","methods","Promise","all","$emit","resetDateFilters","formatDate","dateObj","localDate","toLocaleDateString","emitFilters","getDateRangeFilter","dates","setTimeout","_component_v_chip","_toDisplayString","$props","_hoisted_1","_hoisted_2","toLocaleString","_hoisted_3","showRevenueChart","disabled","_createElementBlock","_hoisted_4","_component_v_progress_circular","indeterminate","_component_v_alert","_hoisted_5","_hoisted_6","_component_v_expansion_panels","expandedPanels","_Fragment","_renderList","paginatedRecords","_component_v_expansion_panel","key","id","_component_v_expansion_panel_title","default","_withCtx","expanded","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","unit_price","_hoisted_11","_hoisted_12","_component_v_expansion_panel_text","_component_v_divider","_component_v_list","density","_component_v_list_item","prepend","_component_v_list_item_title","_component_v_list_item_subtitle","store_location","storage","start","formatDateTime","totalPages","_component_v_pagination","currentPage","onPageChange","showChartDialog","revenueDateRange","onRevenueDateRangeChange","min","applyRevenueDateRange","clearRevenueDateRange","_component_v_tabs","activeTab","_component_v_tab","_component_v_tabs_window","_component_v_tabs_window_item","filteredDailyRevenue","_hoisted_13","_component_RevenueChart","_hoisted_14","filteredMonthlyRevenue","_hoisted_15","_hoisted_16","ref","align","selectedDate","onDateChange","loadHourlyData","loadingHourlyData","props","required","validator","includes","chart","hourlyData","isUpdating","chartDataSnapshot","hourlyDataSnapshot","updateTimeout","computed","$nextTick","createChart","beforeUnmount","clearTimeout","destroy","watch","handler","newData","createDataSnapshot","updateChart","deep","rawData","toRaw","JSON","parse","stringify","createHourlyDataSnapshot","rawHourlyData","getChartData","chartType","labels","_","i","revenues","hourData","find","h","hour","datasets","borderColor","backgroundColor","borderWidth","fill","tension","pointRadius","pointHoverRadius","dateStr","day","getChartOptions","hasHourlyData","isDailyWithHourly","options","responsive","maintainAspectRatio","animation","duration","easing","plugins","legend","display","position","tooltip","enabled","callbacks","context","dataset","parsed","y","scales","x","text","grid","ticks","callback","interaction","intersect","mode","$refs","chartCanvas","chartData","chartOptions","isolatedConfig","Chart","isolatedLabels","isolatedDatasets","update","fetchHourlyRevenueData","log","isAggregatedData","some","selectedDateObj","startOfDay","endOfDay","dayData","filter","itemDate","hourlyMap","getHours","components","RevenueChart","Object","Boolean","itemsPerPage","ceil","end","slice","filteredSalesRecords","recordDate","year","dateString","minute","second","hour12","page","element","$el","querySelector","scrollIntoView","behavior","expandAll","collapseAll","$forceUpdate","SalesRecordFilters","SalesRecordList","currentFilters","loadSalesData","records","keys","message","sm","idFilter","productFilter","nameFilter","locationFilter","_component_v_data_table","headers","filteredProducts","sortBy","undefined","idQ","trim","toLowerCase","productQ","nameQ","locationQ","row","idStr","productStr","nameStr","locationStr","location","idOk","productOk","nameOk","locationOk","_component_InventorySearchPanel","onSelectionChange","selectedItem","elevation","_component_v_radio_group","selectedQuantity","_component_v_radio","customQuantity","customQuantityValue","totalPriceDisplay","canSell","isSelling","handleSell","isAddingToCart","handleAddToCart","sellMessage","sellMessageType","_component_CartPanel","cart","isCartProcessing","estimates","priceEstimates","totalEstimate","cartMessage","cartMessageType","onUpdateQty","onCartUpdateQty","onRemoveItem","onCartRemoveItem","onClear","onCartClear","onCheckout","onCartCheckout","onRefreshPrices","onRefreshEstimates","activePanel","_component_ProductSelector","selectedProduct","_component_ColorSelector","selectedColor","_component_StorageSelector","selectedStorage","onOptions","onStorageOptions","_component_StoreSelector","selectedStore","_component_v_skeleton_loader","quantityDisplay","_component_v_autocomplete","storeItems","modelValue","onUpdate","fetchDistinctStores","not","seen","stores","collapse","s","replace","add","push","r","fetchColorsByProduct","ilike","fetchStoragesByProductColor","Number","fetchStoresByProductColorStorage","storageNumber","eq","or","aggregate","prev","n","results","total","nameLower","locationLower","originalRow","available","baseLabel","fetchQuantitySum","store","fetchPrice","val","loadStores","allStores","presenceMap","storesForSelection","hasProduct","normalizeKey","l","storeMap","presence","hasInventory","cleanName","cleanLocation","values","err","_ctx","load","immediate","colors","displayItems","v","storages","StoreSelector","ProductSelector","ColorSelector","StorageSelector","storageOptionsCount","hasStoreProductColor","resetAfterProduct","emitSelection","resetAfterColor","triggerQuery","count","qty","_component_v_table","hasEstimates","style","displayUnitPrice","displaySubtotal","displayCurrency","messageType","parseInt","num","toFixed","unit","q","CART_STORAGE_KEY","normalizeStorageKey","loadCart","raw","localStorage","getItem","e","saveCart","setItem","clearCart","empty","addItem","line","storageKey","next","idx","findIndex","existing","splice","updateQuantity","lineKey","filtered","removeItem","sanitizeStorageValue","getInventoryRecordId","sanitizedStorage","Error","deductInventory","fetchError","totalAvailable","remaining","currentQuantity","deduct","newQuantity","updateError","InventorySearchPanel","CartPanel","created","actualQuantity","totalPrice","payload","storageValue","cartAddItem","latestUnitPrice","inventoryRecordId","cartUpdateQuantity","cartRemoveItem","cartClear","qtyAvailable","routes","path","redirect","component","SalesRecord","Inventory","Selling","router","createRouter","history","createWebHistory","vuetify","createVuetify","directives","app","createApp","App","use","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","Function","window","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}